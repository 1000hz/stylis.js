!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function t(e,t,i,r){var n="",o="",s=e.charCodeAt(0);if(91===s){var d=e.substring(1,e.length-1).split("=");n="["+d[0]+"="+(o=d[1])+"]"}else o=35===s||46===s||62===s?(n=e).substring(1):n=e;for(var f=void 0===i||i===!0?o:"",l=void 0===r||r===!0?o:"",a="",h="",u="",c=t.length,g=0,b=0,s=0,m=0,v=1,w=0;g<c;){var p=t.charCodeAt(g);if(123===p||125===p||59===p){h+=t[g];var A=h.charCodeAt(0);32===A&&(A=(h=h.trim()).charCodeAt(0));var C=h.charCodeAt(1)||0;if(47===A&&42===C&&(A=(h=h.substring(h.indexOf("*/")+2)).charCodeAt(0),C=h.charCodeAt(1)||0),64===A)1===v&&(v=0,0!==a.length&&(a=n+"{"+a+"}")),107!==C&&114!==C||(b++,107===C?(u=h.substring(1,11)+f+h.substring(11),h="@-webkit-"+u,s=1):h="");else{var x=h.charCodeAt(2)||0;if(97===A&&110===C&&105===x){for(var y=h.substring(10).split(","),k="animation:",z=0,O=y.length;z<O;z++)k+=(0===z?"":",")+l+y[z].trim();h="-webkit-"+k+"-moz-"+k+k}else if(97===A&&112===C&&112===x||102===A&&108===C&&101===x||111===A&&114===C&&100===x)h="-webkit-"+h+"-moz-"+h+h;else if(116===A&&114===C&&97===x||104===A&&121===C&&112===x||117===A&&115===C&&101===x)h="-webkit-"+h+"-moz-"+h+"-ms-"+h+h;else if(100===A&&105===C&&115===x)h.indexOf("flex")>-1&&(h="display:-webkit-flex; display:flex;");else if(123===p&&(1===v&&(v=0,0!==a.length&&(a=n+"{"+a+"}")),0===b)){for(var j=h.split(","),k="",z=0,O=j.length;z<O;z++){var e=j[z],q=e.charCodeAt(0);32===q&&(q=(e=e.trim()).charCodeAt(0)),e=38===q?n+e.substring(1):n+(58===q?"":" ")+e,k+=0===z?e:","+e}h=k}0!==b&&(125===p?m++:123===p&&0!==m&&m--,2===m?(0===s?h="":(h="}@-moz-"+u+"}@"+u+"}",u=""),s=0,m=b>1?1:0,b--):1===s&&(u+=h))}a+=h,h="",w=0}else 1!==w||13!==p&&10!==p?9!==p&&13!==p&&10!==p&&(47===p&&0===w&&(w=1),h+=t[g]):h="";g++}return 1===v&&0!==a.length?n+"{"+a+"}":a}return t});