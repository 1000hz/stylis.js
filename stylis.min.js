!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,l,i,n){e+="";var s,a,g,o,c,f,h="",d="",u=e.charCodeAt(0);91===u?(g=e.substring(1,e.length-1).split("="),s=(d=g[1]).charCodeAt(0),34!==s&&39!==s||(d=d.substring(1,d.length-1)),h="["+g[0]+'="'+d+'"]'):d=35===u||46===u||62===u?(h=e).substring(1):h=e,u=0,void 0==l||l===!0?(l=!0,o=d):(o="",l=!1);var p=null!=n;p&&(f=(typeof n).charCodeAt(0),111===f?r.use(n,null):102!==f&&(p=!1)),0!==(c=r.plugins).length&&(n=1===c.length?c[0]:function(e,r,t,l){for(var i=r,n=0,s=c.length;n<s;n++)i=c[n](e,i,t,l,h)||i;return i!==r?i:void 0},p=!0);var b,x,v,A,m,C,y,O,w,k,$,j,E,R,z,N,F,q,B,D="-moz-",G="-ms-",H="-webkit-",I="",J="",K="",L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,ee=0;p&&(C=n(0,t,ie,le,h,0),null!=C&&(t=C));for(var re=0,te=0,le=0,ie=1,ne=t.length,se="";re<ne;){if(L=t.charCodeAt(re),0!==W||0!==T||0!==Z||123!==L&&125!==L&&59!==L)if(13===L||10===L)1===ee&&(Z=ee=0,I=I.substring(0,I.indexOf("//"))),le=0,ie++;else{if(9!==L)switch(I+=t.charAt(re),L){case 34:W=34===W?0:39===W?39:34;break;case 39:W=39===W?0:34===W?34:39;break;case 40:0===W&&(T=1);break;case 41:0===W&&(T=0);break;case 47:0===W&&0===T&&(0===_&&47===t.charCodeAt(re-1)?Z=ee=1:42===t.charCodeAt(re-1)&&(Z=_=0,I=I.substring(0,I.indexOf("/*"))));break;case 42:0===W&&0===T&&0===ee&&0===_&&47===t.charCodeAt(re-1)&&(Z=_=1)}le++}else{if(I+=t.charAt(re),p&&125!==L&&p&&(C=123===L?n(1,I.substring(0,I.length-1).trim(),ie,le,h,se.length):n(2,I,ie,le,h,se.length),null!=C&&(I=123===L?C+" {":C)),w=I.charCodeAt(0),32===w&&(w=(I=I.trim()).charCodeAt(0)),k=I.charCodeAt(1),$=I.charCodeAt(2),64===w){if(1===X&&0!==K.length&&(X=0,K=h+" {"+K+"}",p&&(C=n(4,K,ie,le,h,se.length),null!=C&&(K=C)),se+=K,K=""),59!==L)if(107===k||103===k)107===k?(E=I.substring(1,11)+(0===U?o:"")+I.substring(11),I="@"+H+E,u=1):(U=1,I="");else if(109===k)if(i===!0&&105===$)void 0===q&&(q={}),E=(B=I.substring(7,I.indexOf("{"))+" ").trim(),B=B.substring(0,B.indexOf(" ")).trim(),q[B]={key:E.trim(),body:""},u=3,I="",E="";else if(101===$)if(0!==te){for(re++,le++,void 0===m&&(m=""),C="",x="",v=y.split(r.regex.split),Q=1;re<ne&&(s=t.charCodeAt(re),123===s?Q++:125===s&&Q--,0!==Q);)x+=t.charAt(re++),le=13===s||10===s?(ie++,0):le+1;for(var ae=0,ge=v.length;ae<ge;ae++)e=v[ae],C+=r((ae===ge-1?e.substring(0,e.length-1):e).trim(),x,l,i,n);m+=I+C+"}",I="",V=1,u=4}else u=2,z=I,I="";else u=6;if(105===k){if(i===!0&&110===$)if(I=I.substring(9,I.length-1),O=I.indexOf("("),O!==-1){var oe=I.substring(0,O),ce=q[oe],fe=I.substring(oe.length+1,I.length-1).split(","),he=ce.key.replace(oe,"").replace(/\(|\)/g,"").trim().split(",");I=ce.body;for(var ae=0,ge=fe.length;ae<ge;ae++){var de=he[ae].trim();void 0!==de&&(I=I.replace(new RegExp("var\\(~~"+de+"\\)","g"),fe[ae].trim()))}t+=I,ne+=I.length,I=""}else I=q[I].body,0===te&&(t+=I,ne+=I.length,I="");else if(109===$&&p){var ue=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(I);null!==ue&&(I=n(5,ue[1].replace(/['"; ]/g,""),ie,le,h,se.length)||"",I&&(t=t.substring(0,re+1)+I+t.substring(re+1),ne+=I.length),I="")}}else 4!==u&&59!==L&&(107!==k&&103!==k&&109!==k&&(u=5),P=-1,M++)}else if(i===!0&&126===w&&126===k&&59===L&&(b=I.indexOf(":"))!==-1)void 0===F&&(N=[],F=0),N[F++]=[I.substring(0,b),I.substring(b+1,I.length-1).trim()],I="";else{if(97===w&&110===k&&105===$){if(I=I.substring(0,I.length-1),b=I.indexOf(":")+1,A=I.substring(0,b),l===!0&&45!==I.charCodeAt(9))for(var pe=I.substring(b).trim().split(","),be=0,ge=pe.length;be<ge;be++){for(var xe=pe[be],ve=xe.split(" "),Ae=0,me=ve.length;Ae<me;Ae++){var Ce=ve[Ae].trim(),ye=Ce.charCodeAt(0),Oe=Ce.charCodeAt(2),we=Ce.length,ke=Ce.charCodeAt(we-1);41===ke||0===we||105===ye&&102===Oe&&101===ke&&8===we||108===ye&&110===Oe&&114===ke&&6===we||97===ye&&116===Oe&&101===ke&&(9===we||17===we)||110===ye&&114===Oe&&108===ke&&6===we||98===ye&&99===Oe&&115===ke&&9===we||102===ye&&114===Oe&&115===ke&&8===we||98===ye&&116===Oe&&104===ke&&4===we||110===ye&&110===Oe&&101===ke&&4===we||114===ye&&110===Oe&&103===ke&&7===we||112===ye&&117===Oe&&100===ke&&6===we||114===ye&&118===Oe&&100===ke&&8===we||115===ye&&101===Oe&&(116===ke&&10===we||100===ke&&8===we)||101===ye&&115===Oe&&(101===ke&&4===we||(11===we||7===we||8===we)&&45===Ce.charCodeAt(4))||!isNaN(parseFloat(Ce))||Ce.indexOf("(")!==-1||(ve[Ae]=o+Ce)}A+=(0===be?"":",")+ve.join(" ").trim()}else A+=(110!==I.charCodeAt(10)?"":o)+I.substring(b).trim().trim();I=H+A+";"+A+";"}else if(97===w&&112===k&&112===$)I=H+I+D+I+I;else if(100===w&&105===k&&115===$)(O=I.indexOf("flex"))!==-1&&(C=101===I.charCodeAt(O-2)?"inline-":"",I="display: "+H+C+"box;display: "+H+C+"flex;display: "+G+"flexbox;display: "+C+"flex"+(125===L?"}":";"));else if(116===w&&114===k&&97===$)I=H+I+(102===I.charCodeAt(5)?G+I:"")+I;else if(104===w&&121===k&&112===$||117===w&&115===k&&101===$)I=H+I+D+I+G+I+I;else if(102===w&&108===k&&101===$)I=H+I+G+I+I;else if(111===w&&114===k&&100===$)I=H+I+G+"flex-"+I+I;else if(97===w&&108===k&&105===$&&45===I.charCodeAt(5))switch(I.charCodeAt(6)){case 105:C=I.replace("-items",""),I=H+"box-"+C+G+"flex-"+C+I;break;case 115:I=G+"flex-item-"+I.replace("-self","")+I;break;default:I=G+"flex-line-pack"+I.replace("align-content","")+I}else if(99===w&&117===k&&114===$&&null!==/zoo|gra/.exec(I))I=I.replace(/: +/g,": "+H)+I.replace(/: +/g,": "+D)+I;else if(123===L)if(te++,1===X&&0!==K.length&&(X=0,K=h+" {"+K+"}",p&&(C=n(4,K,ie,le,h,se.length),null!=C&&(K=C)),se+=K,K=""),2===te){re++,le++,x="";var $e=I.substring(0,I.length-1).split(r.regex.split),je=y.substring(0,y.length-1).split(r.regex.split);for(Q=1;re<ne&&(s=t.charCodeAt(re),123===s?Q++:125===s&&Q--,0!==Q);)x+=t.charAt(re++),le=13===s||10===s?(ie++,0):le+1;for(var be=0,ge=je.length;be<ge;be++){C=je[be],O=C.indexOf(h),je[be]="";for(var Ae=0,me=$e.length;Ae<me;Ae++)e=O>0?":global()"+C.trim():C.replace(h,"&").trim(),j=$e[Ae].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,je[be]+=e.replace(/ +&/,"").trim()+(Ae===me-1?"":",")}void 0===R&&(R=""),R+="\n"+je.join(",").replace(r.regex.global[1]," $1")+" {"+x+"}",S=1,I="",te--}else if(0!==U||0!==M&&2!==u)y=I;else{v=I.split(r.regex.split),A="";for(var be=0,ge=v.length;be<ge;be++){if(a=(e=v[be]).charCodeAt(0),32===a&&(a=(e=e.trim()).charCodeAt(0)),38===a)e=58===a&&103===e.charCodeAt(2)?e.substring(1).replace(r.regex.global[0],"$1").replace(r.regex.and,h):h+e.substring(1).replace(r.regex.and,h);else if((O=e.indexOf(" &"))>0&&(a=58,0!==e.indexOf(":global()")&&(e=":global("+e.substring(0,O)+")"+e.substring(O))),58===a){var Ee=e.charCodeAt(1);if(104===Ee&&116===e.charCodeAt(4)){var Re=e.charCodeAt(5);e=40===Re?h+e.replace(/:host\((.*)\)/g,"$1"):45===Re?e.replace(/:host-context\((.*)\)/g,"$1 "+h):h+e.substring(5)}else e=103===Ee?e.replace(r.regex.global[0],"$1").replace(r.regex.and,h):h+e}else e=h+" "+e;p&&(C=n(1.5,be===ge-1?e.substring(0,e.length-1).trim():e,ie,le,h,se.length),null!=C&&(e=be===ge-1?C+" {":C)),A+=0===be?e:","+e}y=I=A}125===L&&(0!==te&&te--,0===te&&1===S&&(t=t.substring(0,re+1)+R+t.substring(re+1),ne+=R.length,R="",S=0,P++),125!==w&&32===I.charCodeAt(I.length-2)&&(I=I.substring(0,I.length-1).trim()+"}")),0!==M?(125===L?P++:123===L&&0!==P&&P--,1!==Y||123!==L&&0!==P||0===K.length||(Y=0,I=h+" {"+K+"}"+I,K=""),0===P?(0===u?(U=0,I=""):1===u?(I="}@"+E+"}",E=""):3===u&&(q[B].body=E,B="",I="",E=""),u=0,P--,M--):1===u||3===u?(E+=I,3===u&&(I="")):2===u&&0===te&&(125!==L&&(0===Y&&(K=""),K+=I,I=""),Y=1)):0===te&&125!==L&&(X=1,K=void 0===K?I:K+I,I="")}J+=I,125!==L||0!==u&&2!==u&&4!==u||(a=J.charCodeAt(J.length-2),4===u&&(u=0),void 0!==m&&0!==m.length&&(J=123===a?m:J+m,m="",a=J.charCodeAt(J.length-2)),123!==a&&(p&&(C=n(3,J,ie,le,h,se.length),null!=C&&(J=C)),void 0!==z?(z+=J,125===z.charCodeAt(z.length-2)&&(se+=z,z=void 0)):se+=J),J=""),I=""}re++}if(void 0!==K&&0!==K.length&&(K=h+" {"+K+"}",p&&(C=n(4,K,ie,le,h,se.length),null!=C&&(K=C)),se+=K),i&&void 0!==N)for(var ae=0;ae<F;ae++)se=se.replace(new RegExp("var\\("+N[ae][0]+"\\)","g"),N[ae][1]);return p&&(C=n(6,se,ie,le,h,se.length),null!=C&&(se=C)),se}return r.use=function(e,t){var l=r.plugins,i=l.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)l[i++]=t[s];else if(null==e)l[i]=t;else{var g=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),o=/[ \t\r\n]*,[ \t\r\n]*/g,c=function(e,r){var l=r.replace(o,",").split(","),i=t.apply(null,l);return null!=i?i:e};l[i]=function(e,r){if(6===e)return r.replace(g,c)}}return r},r.plugins=[],r.regex={and:/&/g,split:/,[\s]*(?![^\r\n\[]*[\]\)])/g,"import":/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g,global:[/:global\((.*)\)/g,/(?:&| | .*):global\((.*)\)/g]},r});