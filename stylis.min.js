!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(global);else if("function"==typeof define&&define.amd)define(e(window));else window.stylis=e(window)}(function(e){"use strict";function i(e,l,t,r,f){e+="";var n,s,a,g,o,h="",c="",d=e.charCodeAt(0);if(91===d){if(a=e.substring(1,e.length-1).split("="),n=(c=a[1]).charCodeAt(0),34===n||39===n)c=c.substring(1,c.length-1);h="["+a[0]+'="'+c+'"]'}else if(35===d||46===d||62===d)c=(h=e).substring(1);else c=h=e;if(d=0,void 0==t||true===t)t=true,g=c;else g="",t=false;var u=null!=f,b=i.plugins,p=b.length;if(u)if(o=(typeof f).charCodeAt(0),111===o)i.use(f,null);else if(102===o)b[p++]=f;else u=false;if(0!==p)f=1===p?b[0]:function(e,i,l,t,r,f){for(var n=i,s=0,a=b.length;s<a;s++)n=b[s](e,n,l,t,r,f)||n;if(n!==i)return n},u=true;var x,v,A,m,C,w,y,O,k,E,R,$,j,z,N,F,q,B,D,G,H="-moz-",I="-ms-",J="-webkit-",K="",L="",M="",P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,ee=0,ie=0,le=0,te=0;if(u){if(w=f(0,l,se,ne,h,0),null!=w)l=w;F=""}for(var re=0,fe=0,ne=0,se=1,ae=l.length,ge=ae-1,oe="";re<ae;){if(P=l.charCodeAt(re),0===X&&0===V&&0===ie&&(123===P||125===P||59===P||re===ae-1&&0!==K.length)){if(K+=l.charAt(re),u&&125!==P)if(u){if(123===P)w=f(1,K.substring(0,K.length-1).trim(),se,ne,h,oe.length);else w=f(2,K,se,ne,h,oe.length);if(null!=w)K=123===P?w+" {":w}if(k=K.charCodeAt(0),32===k)k=(K=K.trim()).charCodeAt(0);if(E=K.charCodeAt(1),R=K.charCodeAt(2),64===k){if(1===_&&0!==M.length){if(_=0,M=h+" {"+M+"}",u)if(w=f(4,M,se,ne,h,oe.length),null!=w)M=w;oe+=M,M=""}if(59!==P)if(107===E||103===E)if(107===E)j=K.substring(1,11)+(0===Y?g:"")+K.substring(11),K="@"+J+j,d=1;else Y=1,K="";else if(109===E)if(true===r&&105===R){if(void 0===D)D={};j=(G=K.substring(7,K.indexOf("{"))+" ").trim(),G=G.substring(0,G.indexOf(" ")).trim(),D[G]={key:j.trim(),body:""},d=3,K="",j=""}else if(101===R)if(0!==fe){if(re++,ne++,void 0===C)C="";for(w="",v="",A=y.split(i.regex.split),T=1;re<ae;){if(n=l.charCodeAt(re),123===n)T++;else if(125===n)T--;if(0===T)break;v+=l.charAt(re++),ne=13===n||10===n?(se++,0):ne+1}p=A.length;for(var he=0;he<p;he++)e=A[he],w+=i((he===p-1?e.substring(0,e.length-1):e).trim(),v,t,r,f);C+=K+w+"}",K="",W=1,d=4}else d=2,N=K,K="";else d=6;if(105===E){if(true===r&&110===R){if(K=K.substring(9,K.length-1),O=K.indexOf("("),O!==-1){var ce=K.substring(0,O),de=D[ce],ue=K.substring(ce.length+1,K.length-1).split(","),be=de.key.replace(ce,"").replace(/\(|\)/g,"").trim().split(",");K=de.body,p=ue.length;for(var he=0;he<p;he++){var pe=be[he].trim();if(void 0!==pe)K=K.replace(new RegExp("var\\(~~"+pe+"\\)","g"),ue[he].trim())}l+=K,ae+=K.length,K=""}else if(K=D[K].body,0===fe)l+=K,ae+=K.length,K=""}else if(109===R&&u){var xe=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(K);if(null!==xe){if(K=f(5,xe[1].replace(/['"; ]/g,""),se,ne,h,oe.length)||"")l=l.substring(0,re+1)+K+l.substring(re+1),ae+=K.length;K=""}}}else if(4!==d&&59!==P){if(107!==E&&103!==E&&109!==E)d=5;S=-1,Q++}}else if(true===r&&126===k&&126===E&&59===P&&(x=K.indexOf(":"))!==-1){if(void 0===B)q=[],B=0;q[B++]=[K.substring(0,x),K.substring(x+1,K.length-1).trim()],K=""}else{if(123===P){if(fe++,1===_&&0!==M.length){if(_=0,M=h+" {"+M+"}",u)if(w=f(4,M,se,ne,h,oe.length),null!=w)M=w;oe+=M,M=""}if(2===fe){re++,ne++,v="";var ve=K.substring(0,K.length-1).split(i.regex.split),Ae=y.substring(0,y.length-1).split(i.regex.split);for(T=1;re<ae;){if(n=l.charCodeAt(re),123===n)T++;else if(125===n)T--;if(0===T)break;v+=l.charAt(re++),ne=13===n||10===n?(se++,0):ne+1}p=Ae.length;for(var me=0;me<p;me++){w=Ae[me],O=w.indexOf(h),Ae[me]="";for(var Ce=0,we=ve.length;Ce<we;Ce++){if(O>0)e=":global()"+w.trim();else e=w.replace(h,"&").trim();if($=ve[Ce].trim(),$.indexOf(" &")>0)e=$.replace("&","").trim()+" "+e;else if(null!==i.regex.global[0].exec($))e=$;else e=e+" "+$;Ae[me]+=e.replace(/ +&/,"").trim()+(Ce===we-1?"":",")}}if(void 0===z)z="";z+="\n"+Ae.join(",").replace(i.regex.global[1]," $1")+" {"+v+"}",U=1,K="",fe--}else if(0===Y&&(0===Q||2===d)){A=K.split(i.regex.split),m="",y="",p=A.length;for(var me=0;me<p;me++){if(n=(e=A[me]).charCodeAt(0),32===n)n=(e=e.trim()).charCodeAt(0);if(38===n)e=h+e.substring(1).replace(i.regex.and,h);else{if((O=e.indexOf(" &"))>0){if(Z=2,0!==e.indexOf(":global()"))e=":global("+e.substring(0,O)+")"+e.substring(O);n=58}if(58===n){var ye=e.charCodeAt(1);if(104===ye&&116===e.charCodeAt(4)){var Oe=e.charCodeAt(5);if(40===Oe)e=h+e.replace(/:host\((.*)\)/g,"$1").replace(i.regex.and,h);else if(45===Oe)e=e.replace(/:host-context\((.*)\)/g,"$1 "+h).replace(i.regex.and,h);else e=h+e.substring(5)}else if(103===ye){if(2!==Z)Z=1;e=e.replace(i.regex.global[0],"$1").replace(i.regex.and,h)}else e=h+e}else if(0===Z)e=h+" "+e}if(u)if(w=f(1.5,me===p-1?e.substring(0,e.length-1).trim():e,se,ne,h,oe.length),null!=w)e=me===p-1?w+" {":w;y+=(0!==me?",":"")+(1!==Z?e:":global()"+e),m+=0!==me?","+e:e,Z=0}K=m}else y=K}else if(false==(125===P&&1===K.length)){if(59!==P)K=(125===P?K.substring(0,K.length-1):K.trim())+";";if(97===k&&110===E&&105===R){if(K=K.substring(0,K.length-1),x=K.indexOf(":")+1,m=K.substring(0,x),true===t&&45!==K.charCodeAt(9)){var ke=K.substring(x).trim().split(",");p=ke.length;for(var me=0;me<p;me++){for(var Ee=ke[me],Re=Ee.split(" "),Ce=0,we=Re.length;Ce<we;Ce++){var $e=Re[Ce].trim(),je=$e.charCodeAt(0),ze=$e.charCodeAt(2),Ne=$e.length,ge=$e.charCodeAt(Ne-1);if((je>64&&je<90||je>96&&je<122||45===je||95===je&&95!==$e.charCodeAt(1))&&41!==ge&&0!==Ne&&!(105===je&&(102===ze&&101===ge&&8===Ne||105===ze&&108===ge&&7===Ne||104===ze&&116===ge&&7===Ne))&&!(117===je&&115===ze&&116===ge&&5===Ne)&&!(108===je&&110===ze&&114===ge&&6===Ne)&&!(97===je&&116===ze&&101===ge&&(9===Ne||17===Ne))&&!(110===je&&114===ze&&108===ge&&6===Ne)&&!(98===je&&99===ze&&115===ge&&9===Ne)&&!(102===je&&114===ze&&115===ge&&8===Ne)&&!(98===je&&116===ze&&104===ge&&4===Ne)&&!(110===je&&110===ze&&101===ge&&4===Ne)&&!(114===je&&110===ze&&103===ge&&7===Ne)&&!(112===je&&117===ze&&100===ge&&6===Ne)&&!(114===je&&118===ze&&100===ge&&8===Ne)&&!(115===je&&101===ze&&(116===ge&&10===Ne||100===ge&&8===Ne))&&!(101===je&&115===ze&&(101===ge&&4===Ne||(11===Ne||7===Ne||8===Ne)&&45===$e.charCodeAt(4)))&&isNaN(parseFloat($e))&&$e.indexOf("(")===-1)Re[Ce]=g+$e}m+=(0===me?"":",")+Re.join(" ").trim()}}else m+=(110!==K.charCodeAt(10)?"":g)+K.substring(x).trim().trim();K=J+m+";"+m+(125===P?";}":";")}else if(97===k&&112===E&&112===R)K=J+K+H+K+K;else if(100===k&&105===E&&115===R){if((O=K.indexOf("flex"))!==-1)w=101===K.charCodeAt(O-2)?"inline-":"",K="display: "+J+w+"box;display: "+J+w+"flex;display: "+I+"flexbox;display: "+w+"flex;"}else if(116===k&&114===E&&97===R)K=J+K+(102===K.charCodeAt(5)?I+K:"")+K;else if(104===k&&121===E&&112===R||117===k&&115===E&&101===R)K=J+K+H+K+I+K+K;else if(102===k&&108===E&&101===R)K=J+K+I+K+K;else if(111===k&&114===E&&100===R)K=J+K+I+"flex-"+K+K;else if(97===k&&108===E&&105===R&&45===K.charCodeAt(5))switch(K.charCodeAt(6)){case 105:w=K.replace("-items",""),K=J+"box-"+w+I+"flex-"+w+K;break;case 115:K=I+"flex-item-"+K.replace("-self","")+K;break;default:K=I+"flex-line-pack"+K.replace("align-content","")+K}else if(99===k&&117===E&&114===R&&null!==/zoo|gra/.exec(K))K=K.replace(/: +/g,": "+J)+K.replace(/: +/g,": "+H)+K;else if(119===k&&105===E&&100===R&&(O=K.indexOf("-content"))!==-1)w=K.substring(O-3),K="width: -webkit-"+w+"width: -moz-"+w+"width: "+w;if(59!==P)if(K=K.substring(0,K.length-1),125===P)K+="}"}if(125===P){if(0!==fe)fe--;if(0===fe&&1===U)l=l.substring(0,re+1)+z+l.substring(re+1),ae+=z.length,z="",U=0,S++;if(125!==k&&32===K.charCodeAt(K.length-2))K=K.substring(0,K.length-1).trim()+"}"}if(0!==Q){if(125===P)S++;else if(123===P&&0!==S)S--;if(1===ee&&(123===P||0===S)&&0!==M.length)ee=0,K=h+" {"+M+"}"+K,M="";if(0===S){if(0===d)Y=0,K="";else if(1===d)K="}@"+j+"}",j="";else if(3===d)D[G].body=j,G="",K="",j="";d=0,S--,Q--}else if(1===d||3===d){if(j+=K,3===d)K=""}else if(2===d&&0===fe){if(125!==P){if(0===ee)M="";M+=K,K=""}ee=1}}else if(0===fe&&125!==P)_=1,M=void 0===M?K:M+K,K=""}if(L+=K,125===P&&(0===d||2===d||4===d)){if(n=L.charCodeAt(L.length-2),4===d)d=0;if(void 0!==C&&0!==C.length)L=123===n?C:L+C,C="",n=L.charCodeAt(L.length-2);if(123!==n){if(u)if(w=f(3,L,se,ne,h,oe.length),null!=w)L=w;if(void 0!==N){if(N+=L,125===N.charCodeAt(N.length-2))oe+=N,N=void 0}else oe+=L}L=""}K=""}else if(13===P||10===P){if(1===te)ie=te=0,K=K.substring(0,K.indexOf("//"));else if(u&&0===ie&&0!==(p=(F=F.trim()).length)&&47!==F.charCodeAt(0)){if(0!==K.length)if(w=f(7,F,se,ne,h,oe.length),null!=w)K=K.replace(new RegExp(F+"$"),w);F=""}ne=0,se++}else{if(9!==P){if(s=l.charAt(re),u&&0===ie)F+=s;switch(K+=s,P){case 34:if(0===ie)X=34===X?0:39===X?39:34;break;case 39:if(0===ie)X=39===X?0:34===X?34:39;break;case 40:if(0===X&&0===ie)V=1;break;case 41:if(0===X&&0===ie)V=0;break;case 47:if(0===X&&0===V)if(n=l.charCodeAt(re-1),0===le&&47===n)ie=te=1;else if(42===n)ie=le=0,K=K.substring(0,K.indexOf("/*"));break;case 42:if(0===X&&0===V&&0===te&&0===le)if(47===l.charCodeAt(re-1))ie=le=1}}ne++}re++}if(void 0!==M&&0!==M.length){if(M=h+" {"+M+"}",u)if(w=f(4,M,se,ne,h,oe.length),null!=w)M=w;oe+=M}if(r&&void 0!==q)for(var he=0;he<B;he++)oe=oe.replace(new RegExp("var\\("+q[he][0]+"\\)","g"),q[he][1]);if(u)if(w=f(6,oe,se,ne,h,oe.length),null!=w)oe=w;return oe}return i.use=function(e,l){var t=i.plugins,r=t.length;if(null==l)l=e,e=void 0;if(null!=l)if(l.constructor===Object)for(var f in l)i.use(f,l[f]);else if(l.constructor===Array)for(var n=0,s=l.length;n<s;n++)t[r++]=l[n];else if(null==e)t[r]=l;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),g=/[ \t\r\n]*,[ \t\r\n]*/g,o=function(e,i){var t=i.replace(g,",").split(","),r=l.apply(null,t);return null!=r?r:e};t[r]=function(e,i){if(6===e)return i.replace(a,o)}}return i},i.plugins=[],i.regex={and:/&/g,split:/,[\s]*(?![^\r\n\[]*[\]\)])/g,import:/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g,global:[/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,/(?:&| ):global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g]},i});