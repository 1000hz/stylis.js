!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,l,n){e+="";var s="",a="",f=e.charCodeAt(0)||0;if(91===f){var o=e.substring(1,e.length-1).split("="),g=(a=o[1]).charCodeAt(0);34!==g&&39!==g||(a=a.substring(1,a.length-1)),s="["+o[0]+'="'+a+'"]'}else a=35===f||46===f||62===f?(s=e).substring(1):s=e;f=0;var c;void 0==i||i===!0?(i=!0,c=a):(c="",i=!1);var u,h=null!=n;if(h){var d=(typeof n).charCodeAt(0);111===d?r.use(n,null):102!==d&&(h=!1)}0!==(u=r.plugins).length&&(n=function(e,r,t,i){for(var l=r,n=0,s=u.length;n<s;n++)l=u[n](e,l,t,i)||l;return l!==r?l:void 0},h=!0);var b,p,v,A,m,x,C,y,w,k,O,j="",E="",R="",N="",z="",F=0,q=0,B=0,D=0,G=0,H=0,I=0,J=0,K=0,L="-moz-",M="-ms-",P="-webkit-";h&&(x=n(0,t,U,T),null!=x&&(t=x));for(var Q=0,S=0,T=0,U=1,V=t.length,W="";Q<V;){var X=t.charCodeAt(Q);if(0!==G||0!==I||123!==X&&125!==X&&59!==X){if(13===X||10===X)2===D&&(j="",D=0),T=0,U++;else if(9!==X){switch(X){case 34:G=34===G?0:39===G?39:34;break;case 39:G=39===G?0:34===G?34:39;break;case 40:0===G&&(I=1);break;case 41:0===G&&(I=0);break;case 47:0===G&&1!==I&&47===X&&D<2&&D++}j+=t.charAt(Q)}}else{j+=t.charAt(Q);var Y=j.charCodeAt(0);32===Y&&(Y=(j=j.trim()).charCodeAt(0));var Z=j.charCodeAt(1)||0,$=j.charCodeAt(2)||0;if(h&&125!==X&&(x=123===X?n(1,j.substring(0,j.length-1).trim(),U,T):n(2,j,U,T),null!=x&&(j=123===X?x+"{":x)),2===D)125===X&&(D=0),j="";else if(64===Y){if(1===J&&0!==z.length&&(J=0,z=s+" {"+z+"}",h&&(x=n(4,z,U,T),null!=x&&(z=x)),W+=z,z=""),107===Z||103===Z)107===Z?(E=j.substring(1,11)+c+j.substring(11),j="@"+P+E,f=1):j="";else if(109===Z)if(l===!0&&105===$)void 0===k&&(k={}),E=(O=j.substring(7,j.indexOf("{"))+" ").trim(),O=O.substring(0,O.indexOf(" ")).trim(),k[O]={key:E.trim(),body:""},f=3,j="",E="";else if(101===$)if(0!==S){for(Q++,m="",p="",v=C.split(","),B=1;Q<V&&(g=t.charCodeAt(Q),123===g?B++:125===g&&B--,0!==B);)p+=t.charAt(Q++);for(var _=0,ee=v.length;_<ee;_++)e=v[_],m+=r((_===ee-1?e.substring(0,e.length-1):e).trim(),p,i,l,n);m=j+m+"}",j="",f=4}else f=2;else f=6;if(105===Z){if(l===!0&&110===$)if(j=j.substring(9,j.length-1),y=j.indexOf("("),y>-1){var re=j.substring(0,y),te=k[re],ie=j.substring(re.length+1,j.length-1).split(","),le=te.key.replace(re,"").replace(/\(|\)/g,"").trim().split(",");j=te.body;for(var _=0,ee=ie.length;_<ee;_++){var ne=le[_].trim();void 0!==ne&&(j=j.replace(new RegExp("var\\(~~"+ne+"\\)","g"),ie[_].trim()))}t+=j,V+=j.length,j=""}else j=k[j].body,0===S&&(t+=j,V+=j.length,j="");else if(109===$&&h){var se=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(j);null!==se&&(j=n(5,se[1].replace(/['"; ]/g,""),U,T)||"",j&&(t=t.substring(0,Q+1)+j+t.substring(Q+1),V+=j.length),j="")}}else 4!==f&&(q=-1,F++)}else if(l===!0&&59===X&&126===Y&&126===Z)b=j.indexOf(":"),void 0===w&&(w=[]),w[w.length]=[j.substring(0,b),j.substring(b+1,j.length-1).trim()],j="";else{if(97===Y&&110===Z&&105===$){j=j.substring(0,j.length-1),b=j.indexOf(":")+1,A=j.substring(0,b);var ae=j.substring(b).trim().split(",");if(i===!0&&45!==(j.charCodeAt(9)||0))for(var fe=0,ee=ae.length;fe<ee;fe++){for(var oe=ae[fe],ge=oe.split(" "),ce=0,ue=ge.length;ce<ue;ce++){var he=ge[ce].trim(),de=he.charCodeAt(0),$=he.charCodeAt(2),be=he.length,pe=he.charCodeAt(be-1);41===pe||0===be||105===de&&102===$&&101===pe&&8===be||108===de&&110===$&&114===pe&&6===be||97===de&&116===$&&101===pe&&(9===be||17===be)||110===de&&114===$&&108===pe&&6===be||98===de&&99===$&&115===pe&&9===be||102===de&&114===$&&115===pe&&8===be||98===de&&116===$&&104===pe&&4===be||110===de&&110===$&&101===pe&&4===be||114===de&&110===$&&103===pe&&7===be||112===de&&117===$&&100===pe&&6===be||114===de&&118===$&&100===pe&&8===be||115===de&&101===$&&(116===pe&&10===be||100===pe&&8===be)||101===de&&115===$&&(101===pe&&4===be||(11===be||7===be||8===be)&&45===he.charCodeAt(4))||!isNaN(parseFloat(he))||he.indexOf("(")!==-1||(ge[ce]=c+he)}A+=(0===fe?"":",")+ge.join(" ").trim()}else A+=(110!==(j.charCodeAt(10)||0)?"":c)+ae[0].trim();j=P+A+";"+A+";"}else if(97===Y&&112===Z&&112===$)j=P+j+L+j+j;else if(100===Y&&105===Z&&115===$)(y=j.indexOf("flex"))>-1&&(x=101===j.charCodeAt(y-2)?"inline-":"",j="display:"+P+x+"box;display:"+P+x+"flex;"+M+"flexbox;display:"+x+"flex;");else if(116===Y&&114===Z&&97===$)j=P+j+(102===j.charCodeAt(5)?M+j:"")+j;else if(104===Y&&121===Z&&112===$||117===Y&&115===Z&&101===$)j=P+j+L+j+M+j+j;else if(102===Y&&108===Z&&101===$)j=P+j+M+j+j;else if(111===Y&&114===Z&&100===$)j=P+j+M+"flex-"+j+j;else if(97===Y&&108===Z&&105===$&&45===(j.charCodeAt(5)||0))switch(j.charCodeAt(6)||0){case 105:x=j.replace("-items",""),j=P+"box-"+x+M+"flex-"+x+j;break;case 115:j=M+"flex-item-"+j.replace("-self","")+j;break;default:j=M+"flex-line-pack"+j.replace("align-content","")+j}else if(123===X){if(S++,1===J&&0!==z.length&&(J=0,z=s+" {"+z+"}",h&&(x=n(4,z,U,T),null!=x&&(z=x)),W+=z,z=""),0===F||2===f)if(2===S){Q++,p="";var ve=j.substring(0,j.length-1).split(","),Ae=C.substring(0,C.length-1).split(",");for(B=1;Q<V&&(g=t.charCodeAt(Q),123===g?B++:125===g&&B--,0!==B);)p+=t.charAt(Q++);for(var fe=0,ee=Ae.length;fe<ee;fe++){x=Ae[fe],Ae[fe]="";for(var ce=0,ue=ve.length;ce<ue;ce++)e=x.replace(s,"&").trim(),e=ve[ce].indexOf(" &")>0?ve[ce].replace("&","").trim()+" "+e:e+" "+ve[ce].trim(),Ae[fe]+=e.trim()+(ce===ue-1?"":",")}j="\n"+Ae.join(",")+" {"+p+"}",N+=j.replace(/ +&/g,""),H=1,j="",S--}else{v=j.split(","),A="";for(var fe=0,ee=v.length;fe<ee;fe++){var me=(e=v[fe]).charCodeAt(0);if(32===me&&(me=(e=e.trim()).charCodeAt(0)),91===me)for(var ce=fe+1,ue=ee-fe;ce<ue;ce++){var xe=(e+=","+v[ce]).trim();if(93===xe.charCodeAt(xe.length-1)){ee-=ce,v.splice(fe,ce);break}}if(38===me)e=s+e.substring(1);else if((y=e.indexOf(" &"))>0&&(me=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===me){var Ce=e.charCodeAt(1);if(104===Ce&&116===e.charCodeAt(4)){var ye=(e=e.substring(5)).charCodeAt(0);40===ye?e=s+e.substring(1).replace(")",""):45===ye?(y=e.indexOf(")"),e=e.substring(9,y)+" "+s+e.substring(y+1)):e=s+e}else e=103===Ce?e.substring(8).replace(")","").replace("&",s):s+e}else e=s+" "+e;A+=0===fe?e:","+e}C=j=A}}else 125===X&&(0!==S&&S--,0===S&&1===H&&(t=t.substring(0,Q+1)+N+t.substring(Q+1),V+=N.length,N="",H=0,q++));0!==F?(125===X?q++:123===X&&0!==q&&q--,1!==K||123!==X&&0!==q||0===z.length||(K=0,j=s+" {"+z+"}"+j,z=""),0===q?(0===f?j="":1===f?(j="}@"+E+"}",E=""):3===f&&(k[O].body=E,O="",j="",E=""),f=0,q--,F--):1===f||3===f?(E+=j,3===f&&(j="")):2===f&&0===S&&(125!==X&&(0===K&&(z=""),z+=j,j=""),K=1)):0===S&&125!==X&&(J=1,z=void 0===z?j:z+j,j="")}R+=j,j="",125!==X||0!==D||0!==f&&4!==f||(123!==R.charCodeAt(R.length-2)&&(h&&0!==R.length&&(x=n(3,R,U,T),null!=x&&(R=x)),W+=R.trim()),4===f&&(h&&(x=n(3,m,U,T),null!=x&&(m=x)),f=0,W+=m),R="")}Q++,T++}if(void 0!==z&&0!==z.length&&(z=s+" {"+z+"}",h&&(x=n(4,z,U,T),null!=x&&(z=x)),W+=z),l&&void 0!==w)for(var _=0,ee=w.length;_<ee;_++)W=W.replace(new RegExp("var\\("+w[_][0]+"\\)","g"),w[_][1]);return h&&(x=n(6,W,U,T),null!=x&&(W=x)),W}return r.use=function(e,t){var i=r.plugins,l=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,l=t.length;s<l;s++)i[l++]=t[s];else if(null==e)i[l]=t;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[l]=function(e,r,i,l){if(6===e)return r=r.replace(a,function(e,r){var i=r.replace(f,",").split(","),l=t.apply(null,i);return null!=l?l:e})}}return r},r.plugins=[],r});