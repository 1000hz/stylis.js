!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,n,l){e+="";var s,a,f,o,g,c="",u="",h=e.charCodeAt(0)||0;91===h?(a=e.substring(1,e.length-1).split("="),s=(u=a[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),c="["+a[0]+'="'+u+'"]'):u=35===h||46===h||62===h?(c=e).substring(1):c=e,h=0,void 0==i||i===!0?(i=!0,f=u):(f="",i=!1);var d=null!=l;d&&(g=(typeof l).charCodeAt(0),111===g?r.use(l,null):102!==g&&(d=!1)),0!==(o=r.plugins).length&&(l=function(e,r,t,i){for(var n=r,l=0,s=o.length;l<s;l++)n=o[l](e,n,t,i)||n;return n!==r?n:void 0},d=!0);var b,p,v,A,x,m,C,y,O,w,k,j,E,R,N,z="",F="",q="",B="",D="",G=0,H=0,I=0,J=0,K=0,L=0,M=0,P=0,Q=0,S=0,T=0,U="-moz-",V="-ms-",W="-webkit-";d&&(m=l(0,t,$,Z),null!=m&&(t=m));for(var X=0,Y=0,Z=0,$=1,_=t.length,ee="";X<_;){if(G=t.charCodeAt(X),0!==M||0!==Q||123!==G&&125!==G&&59!==G){if(13===G||10===G)2===K&&(z=42===z.charCodeAt(z.length-2)?z.substring(0,z.indexOf("/*")).trim():47!==z.charCodeAt(0)&&(y=z.indexOf("//"))!==-1?z.substring(0,y).trim():"",L=0,K=0),Z=0,$++;else if(9!==G){switch(G){case 34:M=34===M?0:39===M?39:34;break;case 39:M=39===M?0:34===M?34:39;break;case 40:0===M&&(Q=1);break;case 41:0===M&&(Q=0);break;case 47:0===M&&1!==Q&&K<2&&(0!==L&&42!==t.charCodeAt(X-1)||K++,0===L&&42===t.charCodeAt(X+1)&&(L=1))}z+=t.charAt(X)}}else{if(z+=t.charAt(X),O=z.charCodeAt(0),32===O&&(O=(z=z.trim()).charCodeAt(0)),w=z.charCodeAt(1)||0,k=z.charCodeAt(2)||0,d&&125!==G&&(m=123===G?l(1,z.substring(0,z.length-1).trim(),$,Z):l(2,z,$,Z),null!=m&&(z=123===G?m+"{":m)),2===K)125===G&&(K=0),z="";else if(64===O){if(1===S&&0!==D.length&&(S=0,D=c+" {"+D+"}",d&&(m=l(4,D,$,Z),null!=m&&(D=m)),ee+=D,D=""),107===w||103===w)107===w?(F=z.substring(1,11)+f+z.substring(11),z="@"+W+F,h=1):z="";else if(109===w)if(n===!0&&105===k)void 0===R&&(R={}),F=(N=z.substring(7,z.indexOf("{"))+" ").trim(),N=N.substring(0,N.indexOf(" ")).trim(),R[N]={key:F.trim(),body:""},h=3,z="",F="";else if(101===k)if(0!==Y){for(X++,x="",p="",v=C.split(","),J=1;X<_&&(s=t.charCodeAt(X),123===s?J++:125===s&&J--,0!==J);)p+=t.charAt(X++);for(var re=0,te=v.length;re<te;re++)e=v[re],x+=r((re===te-1?e.substring(0,e.length-1):e).trim(),p,i,n,l);x=z+x+"}",z="",h=4}else h=2;else h=6;if(105===w){if(n===!0&&110===k)if(z=z.substring(9,z.length-1),y=z.indexOf("("),y!==-1){var ie=z.substring(0,y),ne=R[ie],le=z.substring(ie.length+1,z.length-1).split(","),se=ne.key.replace(ie,"").replace(/\(|\)/g,"").trim().split(",");z=ne.body;for(var re=0,te=le.length;re<te;re++){var ae=se[re].trim();void 0!==ae&&(z=z.replace(new RegExp("var\\(~~"+ae+"\\)","g"),le[re].trim()))}t+=z,_+=z.length,z=""}else z=R[z].body,0===Y&&(t+=z,_+=z.length,z="");else if(109===k&&d){var fe=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(z);null!==fe&&(z=l(5,fe[1].replace(/['"; ]/g,""),$,Z)||"",z&&(t=t.substring(0,X+1)+z+t.substring(X+1),_+=z.length),z="")}}else 4!==h&&(I=-1,H++)}else if(n===!0&&59===G&&126===O&&126===w)b=z.indexOf(":"),void 0===E&&(E=[]),E[E.length]=[z.substring(0,b),z.substring(b+1,z.length-1).trim()],z="";else{if(97===O&&110===w&&105===k){z=z.substring(0,z.length-1),b=z.indexOf(":")+1,A=z.substring(0,b);var oe=z.substring(b).trim().split(",");if(i===!0&&45!==(z.charCodeAt(9)||0))for(var ge=0,te=oe.length;ge<te;ge++){for(var ce=oe[ge],ue=ce.split(" "),he=0,de=ue.length;he<de;he++){var be=ue[he].trim(),pe=be.charCodeAt(0),ve=be.charCodeAt(2),Ae=be.length,xe=be.charCodeAt(Ae-1);41===xe||0===Ae||105===pe&&102===ve&&101===xe&&8===Ae||108===pe&&110===ve&&114===xe&&6===Ae||97===pe&&116===ve&&101===xe&&(9===Ae||17===Ae)||110===pe&&114===ve&&108===xe&&6===Ae||98===pe&&99===ve&&115===xe&&9===Ae||102===pe&&114===ve&&115===xe&&8===Ae||98===pe&&116===ve&&104===xe&&4===Ae||110===pe&&110===ve&&101===xe&&4===Ae||114===pe&&110===ve&&103===xe&&7===Ae||112===pe&&117===ve&&100===xe&&6===Ae||114===pe&&118===ve&&100===xe&&8===Ae||115===pe&&101===ve&&(116===xe&&10===Ae||100===xe&&8===Ae)||101===pe&&115===ve&&(101===xe&&4===Ae||(11===Ae||7===Ae||8===Ae)&&45===be.charCodeAt(4))||!isNaN(parseFloat(be))||be.indexOf("(")!==-1||(ue[he]=f+be)}A+=(0===ge?"":",")+ue.join(" ").trim()}else A+=(110!==(z.charCodeAt(10)||0)?"":f)+oe[0].trim();z=W+A+";"+A+";"}else if(97===O&&112===w&&112===k)z=W+z+U+z+z;else if(100===O&&105===w&&115===k)(y=z.indexOf("flex"))!==-1&&(m=101===z.charCodeAt(y-2)?"inline-":"",z="display:"+W+m+"box;display:"+W+m+"flex;"+V+"flexbox;display:"+m+"flex;");else if(116===O&&114===w&&97===k)z=W+z+(102===z.charCodeAt(5)?V+z:"")+z;else if(104===O&&121===w&&112===k||117===O&&115===w&&101===k)z=W+z+U+z+V+z+z;else if(102===O&&108===w&&101===k)z=W+z+V+z+z;else if(111===O&&114===w&&100===k)z=W+z+V+"flex-"+z+z;else if(97===O&&108===w&&105===k&&45===(z.charCodeAt(5)||0))switch(z.charCodeAt(6)||0){case 105:m=z.replace("-items",""),z=W+"box-"+m+V+"flex-"+m+z;break;case 115:z=V+"flex-item-"+z.replace("-self","")+z;break;default:z=V+"flex-line-pack"+z.replace("align-content","")+z}else if(123===G){if(Y++,1===S&&0!==D.length&&(S=0,D=c+" {"+D+"}",d&&(m=l(4,D,$,Z),null!=m&&(D=m)),ee+=D,D=""),0===H||2===h)if(2===Y){X++,p="";var me=z.substring(0,z.length-1).split(","),Ce=C.substring(0,C.length-1).split(",");for(J=1;X<_&&(s=t.charCodeAt(X),123===s?J++:125===s&&J--,0!==J);)p+=t.charAt(X++);for(var ge=0,te=Ce.length;ge<te;ge++){m=Ce[ge],Ce[ge]="";for(var he=0,de=me.length;he<de;he++)e=m.replace(c,"&").trim(),j=me[he].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,Ce[ge]+=e.trim()+(he===de-1?"":",")}z="\n"+Ce.join(",")+" {"+p+"}",B+=z.replace(/ +&/g,""),P=1,z="",Y--}else{v=z.split(","),A="";for(var ge=0,te=v.length;ge<te;ge++){var ye=(e=v[ge]).charCodeAt(0);if(32===ye&&(ye=(e=e.trim()).charCodeAt(0)),91===ye&&e.indexOf("]")===-1)for(var he=ge+1,de=te;he<de;he++){var Oe=(e+=","+v[he]).trim();if(Oe.indexOf("]")!==-1){te-=he,v.splice(ge,he);break}}if(38===ye)e=c+e.substring(1);else if((y=e.indexOf(" &"))>0&&(ye=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===ye){var we=e.charCodeAt(1);if(104===we&&116===e.charCodeAt(4)){var ke=(e=e.substring(5)).charCodeAt(0);40===ke?e=c+e.substring(1).replace(")",""):45===ke?(y=e.indexOf(")"),e=e.substring(9,y)+" "+c+e.substring(y+1)):e=c+e}else e=103===we?e.substring(8).replace(")","").replace("&",c):c+e}else e=c+" "+e;A+=0===ge?e:","+e}C=z=A}}else 125===G&&(0!==Y&&Y--,0===Y&&1===P&&(t=t.substring(0,X+1)+B+t.substring(X+1),_+=B.length,B="",P=0,I++));0!==H?(125===G?I++:123===G&&0!==I&&I--,1!==T||123!==G&&0!==I||0===D.length||(T=0,z=c+" {"+D+"}"+z,D=""),0===I?(0===h?z="":1===h?(z="}@"+F+"}",F=""):3===h&&(R[N].body=F,N="",z="",F=""),h=0,I--,H--):1===h||3===h?(F+=z,3===h&&(z="")):2===h&&0===Y&&(125!==G&&(0===T&&(D=""),D+=z,z=""),T=1)):0===Y&&125!==G&&(S=1,D=void 0===D?z:D+z,z="")}q+=z,z="",125!==G||0!==K||0!==h&&4!==h||(123!==q.charCodeAt(q.length-2)&&(d&&0!==q.length&&(m=l(3,q,$,Z),null!=m&&(q=m)),ee+=q.trim()),4===h&&(d&&(m=l(3,x,$,Z),null!=m&&(x=m)),h=0,ee+=x),q="")}X++,Z++}if(void 0!==D&&0!==D.length&&(D=c+" {"+D+"}",d&&(m=l(4,D,$,Z),null!=m&&(D=m)),ee+=D),n&&void 0!==E)for(var re=0,te=E.length;re<te;re++)ee=ee.replace(new RegExp("var\\("+E[re][0]+"\\)","g"),E[re][1]);return d&&(m=l(6,ee,$,Z),null!=m&&(ee=m)),ee}return r.use=function(e,t){var i=r.plugins,n=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var l in t)r.use(l,t[l]);else if(t.constructor===Array)for(var s=0,n=t.length;s<n;s++)i[n++]=t[s];else if(null==e)i[n]=t;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[n]=function(e,r,i,n){if(6===e)return r=r.replace(a,function(e,r){var i=r.replace(f,",").split(","),n=t.apply(null,i);return null!=n?n:e})}}return r},r.plugins=[],r});