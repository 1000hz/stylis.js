!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(global);else if("function"==typeof define&&define.amd)define(e(window));else window.stylis=e(window)}(function(e){"use strict";function i(e,h,g,u,d){e+="";var p,b,A,m="",C="",x=e.charCodeAt(0);if(x<33)x=(e=e.trim()).charCodeAt(0);switch(x){case 35:case 46:C=(m=e).substring(1);break;case 91:if(b=e.substring(1,e.length-1).split("="),p=(C=b[1]).charCodeAt(0),34===p||39===p)C=C.substring(1,C.length-1);m="["+b[0]+'="'+C+'"]';break;default:C=m=e}if(x=0,void 0==g||true===g)g=true,A=C;else A="",g=false;var v,k=null!=d,w=r.length;if(true===k)if(v=(typeof d).charCodeAt(0),111===v)t(d);else if(102===v)r[w++]=d;else k=false;if(0!==w)d=1===w?r[0]:function(e,i,t,l,f,s){for(var n=i,a=0,c=r.length;a<c;a++)n=r[a](e,n,t,l,f,s)||n;if(n!==i)return n},k=true;var O,y,$,j,z,N,B,E,F,R,q,D,G,H,I,J,K,L,M="",P="",Q="",S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,ee=0,ie=0,te=0,re=0,le=0;if(true===k){if(N=d(0,h,ae,ne,m,0),null!=N)h=N;I=""}for(var fe=0,se=0,ne=0,ae=1,ce=h.length,oe="";fe<ce;){if(S=h.charCodeAt(fe),1===T&&fe===ce-1||0===Z&&0===Y&&0===te&&(123===S||125===S||59===S||fe===ce-1&&0!==M.length)){if(M+=h.charAt(fe),true===k&&125!==S){if(123===S)N=d(1,M.substring(0,M.length-1).trim(),ae,ne,m,oe.length);else N=d(2,M,ae,ne,m,oe.length);if(null!=N)M=123===S?N+" {":N}if(F=M.charCodeAt(0),32===F)F=(M=M.trim()).charCodeAt(0);if(R=M.charCodeAt(1),q=M.charCodeAt(2),64===F){if(1===ie&&0!==Q.length){if(ie=0,Q=m+" {"+Q+"}",true===k)if(N=d(4,Q,ae,ne,m,oe.length),null!=N)Q=N;oe+=Q,Q=""}if(59!==S)if(107===R)G=M.substring(1,11)+A+M.substring(11),M="@"+o+G,x=1;else if(109===R&&101===q||115===R&&117===q||103===R){if(fe++,ne++,void 0===K)K="";for($="",W=1;fe<ce;){if(p=h.charCodeAt(fe),123===p)W++;else if(125===p)W--;if(0===W){fe++;break}$+=h.charAt(fe++),ne=13===p||10===p?(ae++,0):ne+1}if(e=0===se?m:B.substring(0,B.length-1).trim(),K+=M+i(e,$.trim(),g,u,d).trim()+"}",true===k)if(N=d(3,K,ae,ne,m,oe.length),null!=N)K=N;if(M="",T=1,fe===ce)ce++;continue}else x=6;if(59!==S&&105!==R){if(107!==R&&109!==R&&115!==R&&103!==R)x=5;V=-1,U++}}else{if(123===S){if(se++,1===ie&&0!==Q.length){if(ie=0,Q=m+" {"+Q+"}",true===k)if(N=d(4,Q,ae,ne,m,oe.length),null!=N)Q=N;oe+=Q,Q=""}if(2===se){fe++,ne++,$="";var he=M.substring(0,M.length-1).split(f),ge=B.substring(0,B.length-1).split(f);for(W=1;fe<ce;){if(p=h.charCodeAt(fe),123===p)W++;else if(125===p)W--;if(0===W)break;$+=h.charAt(fe++),ne=13===p||10===p?(ae++,0):ne+1}w=ge.length;for(var ue=0;ue<w;ue++){N=ge[ue],E=N.indexOf(m),ge[ue]="";for(var de=0,pe=he.length;de<pe;de++){if(E>0)e=":global(%)"+N.trim();else e=N.replace(m,"&").trim();if(D=he[de].trim(),D.indexOf(" &")>0)e=D.replace("&","").trim()+" "+e;else if(null!==s.exec(D))e=D;else e=e+" "+D;ge[ue]+=e.replace(/ +&/,"").trim()+(de===pe-1?"":",")}}if(void 0===H)H="";H+="\n"+ge.join(",").replace(n," $1")+" {"+$+"}",X=1,M="",se--}else if(0===U||2===x){if(0===ee&&M.indexOf("::place")!==-1)ee=1;j=M.split(f),z="",B="",w=j.length;for(var ue=0;ue<w;ue++){if(p=(e=j[ue]).charCodeAt(0),32===p)p=(e=e.trim()).charCodeAt(0);if(38===p)e=m+e.substring(1).replace(l,m);else if((E=e.indexOf(" &"))>0)e=e.replace(l,m).trim();else if(58===p)if(L=e.charCodeAt(1),true===u&&104===L&&116===e.charCodeAt(4))if(L=e.charCodeAt(5),40===L)e=m+e.replace(/:host\((.*)\)/g,"$1").replace(l,m);else if(45===L)e=e.replace(/:host-context\((.*)\)/g,"$1 "+m).replace(l,m);else e=m+e.substring(5);else if(103===L&&(true===u||37===(L=e.charCodeAt(8))))_=1,e=e.replace(s,"$1").replace(l,m).trim();else e=m+e;else if(0===_)e=m+" "+e;if(true===k)if(N=d(1.5,ue===w-1?e.substring(0,e.length-1).trim():e,ae,ne,m,oe.length),null!=N)e=ue===w-1?N+" {":N;B+=(0!==ue?",​":"")+(1!==_?e:":global(%)"+e),z+=0!==ue?","+e:e,_=0}M=z}else B=M}else if(false==(125===S&&1===M.length)){if(59!==S)M=(125===S?M.substring(0,M.length-1):M.trim())+";";if(97===F&&110===R&&105===q){if(M=M.substring(0,M.length-1),y=M.indexOf(":")+1,z=M.substring(0,y),true===g&&45!==M.charCodeAt(9)){var be=M.substring(y).trim().split(",");w=be.length;for(var ue=0;ue<w;ue++){for(var Ae=be[ue],me=Ae.split(" "),de=0,pe=me.length;de<pe;de++){var Ce=me[de].trim(),xe=Ce.charCodeAt(0),ve=Ce.charCodeAt(2),ke=Ce.length,we=Ce.charCodeAt(ke-1);if((xe>64&&xe<90||xe>96&&xe<122||45===xe||95===xe&&95!==Ce.charCodeAt(1))&&41!==we&&0!==ke&&!(105===xe&&(102===ve&&101===we&&8===ke||105===ve&&108===we&&7===ke||104===ve&&116===we&&7===ke))&&!(117===xe&&115===ve&&116===we&&5===ke)&&!(108===xe&&110===ve&&114===we&&6===ke)&&!(97===xe&&116===ve&&101===we&&(9===ke||17===ke))&&!(110===xe&&114===ve&&108===we&&6===ke)&&!(98===xe&&99===ve&&115===we&&9===ke)&&!(102===xe&&114===ve&&115===we&&8===ke)&&!(98===xe&&116===ve&&104===we&&4===ke)&&!(110===xe&&110===ve&&101===we&&4===ke)&&!(114===xe&&110===ve&&103===we&&7===ke)&&!(112===xe&&117===ve&&100===we&&6===ke)&&!(114===xe&&118===ve&&100===we&&8===ke)&&!(115===xe&&101===ve&&(116===we&&10===ke||100===we&&8===ke))&&!(101===xe&&115===ve&&(101===we&&4===ke||(11===ke||7===ke||8===ke)&&45===Ce.charCodeAt(4)))&&isNaN(parseFloat(Ce))&&Ce.indexOf("(")===-1)me[de]=A+Ce}z+=(0===ue?"":",")+me.join(" ").trim()}}else z+=(110!==M.charCodeAt(10)?"":A)+M.substring(y).trim().trim();M=o+z+";"+z+(125===S?";}":";")}else if(97===F&&112===R&&112===q)M=o+M+a+M+M;else if(100===F&&105===R&&115===q){if((E=M.indexOf("flex"))!==-1)N=101===M.charCodeAt(E-2)?"inline-":"",M=M.indexOf(" !important")!==-1?" !important":"",M="display: "+o+N+"box"+M+";display: "+o+N+"flex"+M+";display: "+c+"flexbox"+M+";display: "+N+"flex"+M+";"}else if(116===F&&(114===R&&97===q||101===R&&120===q))M=o+M+(102===M.charCodeAt(5)?c+M:"")+M;else if(104===F&&121===R&&112===q||117===F&&115===R&&101===q)M=o+M+a+M+c+M+M;else if(102===F&&108===R&&101===q)M=o+M+c+M+M;else if(111===F&&114===R&&100===q)M=o+M+c+"flex-"+M+M;else if(97===F&&108===R&&105===q&&45===M.charCodeAt(5))switch(M.charCodeAt(6)){case 105:N=M.replace("-items",""),M=o+M+o+"box-"+N+c+"flex-"+N+M;break;case 115:M=c+"flex-item-"+M.replace("-self","")+M;break;default:M=c+"flex-line-pack"+M.replace("align-content","")+M}else if(106===F&&117===R&&115===q)y=M.indexOf(":"),N=M.substring(y).replace("flex-",""),M=o+"box-pack"+N+o+M+c+"flex-pack"+N+M;else if(99===F&&117===R&&114===q&&null!==/zoo|gra/.exec(M))M=M.replace(/: +/g,": "+o)+M.replace(/: +/g,": "+a)+M;else if(119===F&&105===R&&100===q&&(E=M.indexOf("-content"))!==-1)N=M.substring(E-3),M="width: "+o+N+"width: "+a+N+"width: "+N;if(59!==S)if(M=M.substring(0,M.length-1),125===S)M+="}"}if(125===S){if(0!==se)se--;if(0===se&&1===X)h=h.substring(0,fe+1)+H+h.substring(fe+1),ce+=H.length,H="",X=0,V++;if(125!==F&&32===M.charCodeAt(M.length-2))M=M.substring(0,M.length-1).trim()+"}"}if(0!==U){if(125===S)V++;else if(123===S&&0!==V)V--;if(0===V){if(1===x)M="}@"+G+"}",G="";x=0,V--,U--}else if(1===x)G+=M}else if(0===se&&125!==S)ie=1,Q=void 0===Q?M:Q+M,M=""}if(P+=M,125===S&&0===x||1===T){if(p=P.charCodeAt(P.length-2),1===T){if(123===p)P=K,p=0;else if(123===S)P=K+P;else P+=K;T=0,K=""}if(123!==p){if(true===k)if(N=d(3,P,ae,ne,m,oe.length),null!=N)P=N;if(1===ee){if(void 0===J)J=/::place/g;ee=0,N="input-place",P=P.replace(J,"::"+o+N)+P.replace(J,"::"+a+"place")+P.replace(J,":"+c+N)+P}oe+=P}P=""}M=""}else if(13===S||10===S){if(1===le)te=le=0,M=M.substring(0,M.indexOf("//")).trim();else if(true===k&&0===te&&0!==(w=(I=I.trim()).length)&&47!==I.charCodeAt(0)){if(0!==M.length)if(N=d(7,I,ae,ne,m,oe.length),null!=N)M=M.replace(new RegExp(I+"$"),N).trim();I=""}ne=0,ae++}else{if(9!==S){if(O=h.charAt(fe),true===k&&0===te)I+=O;switch(M+=O,S){case 44:if(0===Z&&0===te&&0===Y)M+="​";break;case 34:if(0===te)Z=34===Z?0:39===Z?39:34;break;case 39:if(0===te)Z=39===Z?0:34===Z?34:39;break;case 40:if(0===Z&&0===te)Y=1;break;case 41:if(0===Z&&0===te)Y=0;break;case 47:if(0===Z&&0===Y)if(p=h.charCodeAt(fe-1),0===re&&47===p)te=le=1;else if(42===p)te=re=0,M=M.substring(0,M.indexOf("/*")).trim();break;case 42:if(0===Z&&0===Y&&0===le&&0===re)if(47===h.charCodeAt(fe-1))te=re=1}}ne++}fe++}if(void 0!==Q&&0!==Q.length){if(Q=m+" {"+Q+"}",true===k)if(N=d(4,Q,ae,ne,m,oe.length),null!=N)Q=N;oe+=Q}if(true===k)if(N=d(6,oe,ae,ne,m,oe.length),null!=N)oe=N;return oe}function t(e){var t=r.length;if(null!=e)if(e.constructor===Array)for(var l=0,f=e.length;l<f;l++)r[t++]=e[l];else r[t]=e;return i}var r=[],l=/&/g,f=/,\u200B/g,s=/:global\(%?((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,n=/(?:&| ):global\(%?((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,a="-moz-",c="-ms-",o="-webkit-";return i.use=t,i.p=r,i.r={a:l,s:f,g:s,n:n},i});