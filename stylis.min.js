!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,l,n){e+="";var s,a,o,f,g,c="",u="",d=e.charCodeAt(0)||0;91===d?(a=e.substring(1,e.length-1).split("="),s=(u=a[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),c="["+a[0]+'="'+u+'"]'):u=35===d||46===d||62===d?(c=e).substring(1):c=e,d=0,void 0==i||i===!0?(i=!0,o=u):(o="",i=!1);var h=null!=n;h&&(g=(typeof n).charCodeAt(0),111===g?r.use(n,null):102!==g&&(h=!1)),0!==(f=r.plugins).length&&(n=1===f.length?f[0]:function(e,r,t,i){for(var l=r,n=0,s=f.length;n<s;n++)l=f[n](e,l,t,i,c)||l;return l!==r?l:void 0},h=!0);var b,p,v,A,x,m,C,y,O,k,w,j,E,R,z,N,F="-moz-",q="-ms-",B="-webkit-",D="",G="",H="",I="",J="",K=0,L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0;h&&(m=n(0,t,re,ee,c),null!=m&&(t=m));for(var $=0,_=0,ee=0,re=1,te=t.length,ie="";$<te;){if(K=t.charCodeAt($),0!==Q||0!==T||0!==X||123!==K&&125!==K&&59!==K)if(13===K||10===K)1===Z&&(X=Z=0,D=D.substring(0,D.indexOf("//"))),ee=0,re++;else{if(9!==K)switch(D+=t.charAt($),K){case 34:Q=34===Q?0:39===Q?39:34;break;case 39:Q=39===Q?0:34===Q?34:39;break;case 40:0===Q&&(T=1);break;case 41:0===Q&&(T=0);break;case 47:0===Q&&0===T&&(0===Y&&47===t.charCodeAt($-1)?X=Z=1:42===t.charCodeAt($-1)&&(X=Y=0,D=D.substring(0,D.indexOf("/*"))));break;case 42:0===Q&&0===T&&0===Z&&0===Y&&47===t.charCodeAt($-1)&&(X=Y=1)}ee++}else{if(D+=t.charAt($),O=D.charCodeAt(0),32===O&&(O=(D=D.trim()).charCodeAt(0)),k=D.charCodeAt(1)||0,w=D.charCodeAt(2)||0,h&&125!==K&&(m=123===K?n(1,D.substring(0,D.length-1).trim(),re,ee,c):n(2,D,re,ee,c),null!=m&&(D=123===K?m+" {":m)),64===O){if(1===V&&0!==J.length&&(V=0,J=c+" {"+J+"}",h&&(m=n(4,J,re,ee,c),null!=m&&(J=m)),ie+=J,J=""),59!==K)if(107===k||103===k)107===k?(G=D.substring(1,11)+(0===U?o:"")+D.substring(11),D="@"+B+G,d=1):(U=1,D="");else if(109===k)if(l===!0&&105===w)void 0===z&&(z={}),G=(N=D.substring(7,D.indexOf("{"))+" ").trim(),N=N.substring(0,N.indexOf(" ")).trim(),z[N]={key:G.trim(),body:""},d=3,D="",G="";else if(101===w)if(0!==_){for($++,x="",p="",v=C.split(","),P=1;$<te&&(s=t.charCodeAt($),123===s?P++:125===s&&P--,0!==P);)p+=t.charAt($++);for(var le=0,ne=v.length;le<ne;le++)e=v[le],x+=r((le===ne-1?e.substring(0,e.length-1):e).trim(),p,i,l,n);x=D+x+"}",D="",d=4}else d=2;else d=6;if(105===k){if(l===!0&&110===w)if(D=D.substring(9,D.length-1),y=D.indexOf("("),y!==-1){var se=D.substring(0,y),ae=z[se],oe=D.substring(se.length+1,D.length-1).split(","),fe=ae.key.replace(se,"").replace(/\(|\)/g,"").trim().split(",");D=ae.body;for(var le=0,ne=oe.length;le<ne;le++){var ge=fe[le].trim();void 0!==ge&&(D=D.replace(new RegExp("var\\(~~"+ge+"\\)","g"),oe[le].trim()))}t+=D,te+=D.length,D=""}else D=z[D].body,0===_&&(t+=D,te+=D.length,D="");else if(109===w&&h){var ce=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(D);null!==ce&&(D=n(5,ce[1].replace(/['"; ]/g,""),re,ee,c)||"",D&&(t=t.substring(0,$+1)+D+t.substring($+1),te+=D.length),D="")}}else 4!==d&&59!==K&&(107!==k&&103!==k&&109!==k&&(d=5),M=-1,L++)}else if(l===!0&&126===O&&126===k&&59===K&&(b=D.indexOf(":"))!==-1)void 0===R&&(E=[],R=0),E[R++]=[D.substring(0,b),D.substring(b+1,D.length-1).trim()],D="";else{if(97===O&&110===k&&105===w){if(D=D.substring(0,D.length-1),b=D.indexOf(":")+1,A=D.substring(0,b),i===!0&&45!==(D.charCodeAt(9)||0))for(var ue=D.substring(b).trim().split(","),de=0,ne=ue.length;de<ne;de++){for(var he=ue[de],be=he.split(" "),pe=0,ve=be.length;pe<ve;pe++){var Ae=be[pe].trim(),xe=Ae.charCodeAt(0),me=Ae.charCodeAt(2),Ce=Ae.length,ye=Ae.charCodeAt(Ce-1);41===ye||0===Ce||105===xe&&102===me&&101===ye&&8===Ce||108===xe&&110===me&&114===ye&&6===Ce||97===xe&&116===me&&101===ye&&(9===Ce||17===Ce)||110===xe&&114===me&&108===ye&&6===Ce||98===xe&&99===me&&115===ye&&9===Ce||102===xe&&114===me&&115===ye&&8===Ce||98===xe&&116===me&&104===ye&&4===Ce||110===xe&&110===me&&101===ye&&4===Ce||114===xe&&110===me&&103===ye&&7===Ce||112===xe&&117===me&&100===ye&&6===Ce||114===xe&&118===me&&100===ye&&8===Ce||115===xe&&101===me&&(116===ye&&10===Ce||100===ye&&8===Ce)||101===xe&&115===me&&(101===ye&&4===Ce||(11===Ce||7===Ce||8===Ce)&&45===Ae.charCodeAt(4))||!isNaN(parseFloat(Ae))||Ae.indexOf("(")!==-1||(be[pe]=o+Ae)}A+=(0===de?"":",")+be.join(" ").trim()}else A+=(110!==(D.charCodeAt(10)||0)?"":o)+D.substring(b).trim().trim();D=B+A+";"+A+";"}else if(97===O&&112===k&&112===w)D=B+D+F+D+D;else if(100===O&&105===k&&115===w)(y=D.indexOf("flex"))!==-1&&(m=101===D.charCodeAt(y-2)?"inline-":"",D="display: "+B+m+"box;display: "+B+m+"flex;display: "+q+"flexbox;display: "+m+"flex;");else if(116===O&&114===k&&97===w)D=B+D+(102===D.charCodeAt(5)?q+D:"")+D;else if(104===O&&121===k&&112===w||117===O&&115===k&&101===w)D=B+D+F+D+q+D+D;else if(102===O&&108===k&&101===w)D=B+D+q+D+D;else if(111===O&&114===k&&100===w)D=B+D+q+"flex-"+D+D;else if(97===O&&108===k&&105===w&&45===(D.charCodeAt(5)||0))switch(D.charCodeAt(6)||0){case 105:m=D.replace("-items",""),D=B+"box-"+m+q+"flex-"+m+D;break;case 115:D=q+"flex-item-"+D.replace("-self","")+D;break;default:D=q+"flex-line-pack"+D.replace("align-content","")+D}else if(99===O&&117===k&&114===w&&null!==/zoo|gra/.exec(D))D=D.replace(/: +/g,": "+B)+D.replace(/: +/g,": "+F)+D;else if(123===K)if(_++,1===V&&0!==J.length&&(V=0,J=c+" {"+J+"}",h&&(m=n(4,J,re,ee,c),null!=m&&(J=m)),ie+=J,J=""),2===_){$++,p="";var Oe=D.substring(0,D.length-1).split(","),ke=C.substring(0,C.length-1).split(",");for(P=1;$<te&&(s=t.charCodeAt($),123===s?P++:125===s&&P--,0!==P);)p+=t.charAt($++);for(var de=0,ne=ke.length;de<ne;de++){m=ke[de],ke[de]="";for(var pe=0,ve=Oe.length;pe<ve;pe++)e=m.replace(c,"&").trim(),j=Oe[pe].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,ke[de]+=e.replace(/ +&/,"").trim()+(pe===ve-1?"":",")}I+="\n"+ke.join(",")+" {"+p+"}",S=1,D="",_--}else if(0!==U||0!==L&&2!==d)C=D;else{v=D.split(","),A="";for(var de=0,ne=v.length;de<ne;de++){var we=(e=v[de]).charCodeAt(0);if(32===we&&(we=(e=e.trim()).charCodeAt(0)),91===we&&e.indexOf("]")===-1)for(var pe=de+1,ve=ne;pe<ve;pe++){var je=(e+=","+v[pe]).trim();if(je.indexOf("]")!==-1){ne-=pe,v.splice(de,pe);break}}if(38===we)e=38===e.charCodeAt(1)?e.replace(/&/g,c):c+e.substring(1);else if((y=e.indexOf(" &"))>0&&(we=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===we){var Ee=e.charCodeAt(1);if(104===Ee&&116===e.charCodeAt(4)){var Re=(e=e.substring(5)).charCodeAt(0);40===Re?e=c+e.substring(1).replace(")",""):45===Re?(y=e.indexOf(")"),e=e.substring(9,y)+" "+c+e.substring(y+1)):e=c+e}else e=103===Ee?e.substring(8).replace(")","").replace("&",c):c+e}else e=c+" "+e;h&&(m=n(1.5,de===ne-1?e.substring(0,e.length-1).trim():e,re,ee,c),null!=m&&(e=de===ne-1?m+" {":m)),A+=0===de?e:","+e}C=D=A}else 125===K&&(0!==_&&_--,0===_&&1===S&&(t=t.substring(0,$+1)+I+t.substring($+1),te+=I.length,I="",S=0,M++));0!==L?(125===K?M++:123===K&&0!==M&&M--,1!==W||123!==K&&0!==M||0===J.length||(W=0,D=c+" {"+J+"}"+D,J=""),0===M?(0===d?(U=0,D=""):1===d?(D="}@"+G+"}",G=""):3===d&&(z[N].body=G,N="",D="",G=""),d=0,M--,L--):1===d||3===d?(G+=D,3===d&&(D="")):2===d&&0===_&&(125!==K&&(0===W&&(J=""),J+=D,D=""),W=1)):0===_&&125!==K&&(V=1,J=void 0===J?D:J+D,D="")}H+=D,D="",125!==K||0!==d&&4!==d||(123!==H.charCodeAt(H.length-2)&&(h&&0!==H.length&&(m=n(3,H,re,ee,c),null!=m&&(H=m)),ie+=H.trim()),4===d&&(h&&(m=n(3,x,re,ee,c),null!=m&&(x=m)),d=0,ie+=x),H="")}$++}if(void 0!==J&&0!==J.length&&(J=c+" {"+J+"}",h&&(m=n(4,J,re,ee,c),null!=m&&(J=m)),ie+=J),l&&void 0!==E)for(var le=0;le<R;le++)ie=ie.replace(new RegExp("var\\("+E[le][0]+"\\)","g"),E[le][1]);return h&&(m=n(6,ie,re,ee,c),null!=m&&(ie=m)),ie}return r.use=function(e,t){var i=r.plugins,l=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)i[l++]=t[s];else if(null==e)i[l]=t;else{var o=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[l]=function(e,r,i,l){if(6===e)return r=r.replace(o,function(e,r){var i=r.replace(f,",").split(","),l=t.apply(null,i);return null!=l?l:e})}}return r},r.plugins=[],r});