!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function t(e,t,i,r){var s="",n="",o=e.charCodeAt(0)||0;if(91===o){var l=e.substring(1,e.length-1).split("="),a=(n=l[1]).charCodeAt(0);34!==a&&39!==a||(n=n.substring(1,n.length-1)),s="["+l[0]+"='"+n+"']"}else n=35===o||46===o||62===o?(s=e).substring(1):s=e;for(var d=void 0===i||i===!0?n:"",f=void 0===r||r===!0?n:"",h="",c="",u="",b=t.length,g=0,A=0,o=0,C=0,v=1,w=0;g<b;){var m=t.charCodeAt(g);if(123===m||125===m||59===m){c+=t[g];var p=c.charCodeAt(0);32===p&&(p=(c=c.trim()).charCodeAt(0));var x=c.charCodeAt(1)||0;if(47===p&&42===x&&(p=(c=c.substring(c.indexOf("*/")+2)).charCodeAt(0),x=c.charCodeAt(1)||0),64===p)1===v&&(v=0,0!==h.length&&(h=s+" {"+h+"}")),107!==x&&114!==x||(A++,107===x?(u=c.substring(1,11)+d+c.substring(11),c="@-webkit-"+u,o=1):c="");else{var k=c.charCodeAt(2)||0;if(97===p&&110===x&&105===k){for(var y=c.substring(10).split(","),O="animation:",z=0,j=y.length;z<j;z++)O+=(0===z?"":",")+f+y[z].trim();c="-webkit-"+O+O}else if(97===p&&112===x&&112===k)c="-webkit-"+c+"-moz-"+c+c;else if(104===p&&121===x&&112===k||117===p&&115===x&&101===k)c="-webkit-"+c+"-moz-"+c+"-ms-"+c+c;else if(102===p&&108===x&&101===k||111===p&&114===x&&100===k)c="-webkit-"+c+c;else if(116===p&&114===x&&97===k)c="-webkit-"+c+(102===c.charCodeAt(5)?"-ms-"+c:"")+c;else if(100===p&&105===x&&115===k)c.indexOf("flex")>-1&&(c="display:-webkit-flex; display:flex;");else if(123===m&&(1===v&&(v=0,0!==h.length&&(h=s+" {"+h+"}")),0===A)){for(var q=c.split(","),O="",z=0,j=q.length;z<j;z++){var e=q[z],B=e.charCodeAt(0);if(32===B&&(B=(e=e.trim()).charCodeAt(0)),38===B)e=s+e.substring(1);else if(58===B&&104===e.charCodeAt(1)){var D=(e=e.substring(5)).charCodeAt(0);e=40===D?s+e.substring(1).replace(")",""):45===D?e.substring(9,e.indexOf(")"))+" "+s+" {":s+e}else e=s+(58===B?"":" ")+e;O+=0===z?e:","+e}c=O}0!==A&&(125===m?C++:123===m&&0!==C&&C--,2===C?(0===o?c="":(c="}@"+u+"}",u=""),o=0,C=A>1?1:0,A--):1===o&&(u+=c))}h+=c,c="",w=0}else 1!==w||13!==m&&10!==m?9!==m&&13!==m&&10!==m&&(47===m&&0===w&&(w=1),c+=t[g]):c="";g++}return 1===v&&0!==h.length?s+" {"+h+"}":h}return t});