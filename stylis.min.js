!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,l,n){e+="";var s="",a="",f=e.charCodeAt(0)||0;if(91===f){var g=e.substring(1,e.length-1).split("="),o=(a=g[1]).charCodeAt(0);34!==o&&39!==o||(a=a.substring(1,a.length-1)),s="["+g[0]+'="'+a+'"]'}else a=35===f||46===f||62===f?(s=e).substring(1):s=e;f=0;var u,h=void 0===i||i===!0?a:"",c=null!=n;if(c){var d=(typeof n).charCodeAt(0);if(111===d)for(var p=0,b=Object.keys(n),v=b.length;p<v;p++)r.use(b[p],n[b[p]]);else 102!==d&&(c=!1)}0!==(u=r.plugins).length&&(n=function(e,r,t,i){for(var l=r,n=0,s=u.length;n<s;n++)l=u[n](e,l,t,i)||l;return l!==r?l:void 0},c=!0);var m,x,A,C,y,w,O,k,j,E,R,N="",z="",F="",q="",B="",D=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,P="-moz-",Q="-ms-",S="-webkit-";c&&(w=n(0,t,W,V),null!=w&&(t=w));for(var T=0,U=0,V=0,W=1,X=t.length,Y="";T<X;){var Z=t.charCodeAt(T);if(0!==J||123!==Z&&125!==Z&&59!==Z)13===Z||10===Z?(2===I&&(N="",I=0),V=0,W++):9!==Z&&(34===Z?J=34===J?0:39===J?39:34:39===Z?J=39===J?0:34===J?34:39:47===Z&&47===Z&&I<2&&I++,N+=t[T]);else{N+=t[T];var $=N.charCodeAt(0);32===$&&($=(N=N.trim()).charCodeAt(0));var _=N.charCodeAt(1)||0,ee=N.charCodeAt(2)||0;if(c&&125!==Z&&(w=123===Z?n(1,N.substring(0,N.length-1).trim(),W,V):n(2,N,W,V),null!=w&&(N=123===Z?w+"{":w)),2===I)125===Z&&(I=0),N="";else if(64===$){if(1===L&&0!==B.length&&(L=0,B=s+" {"+B+"}",c&&(w=n(4,B,W,V),null!=w&&(B=w)),Y+=B,B=""),107===_||103===_)107===_?(z=N.substring(1,11)+h+N.substring(11),N="@"+S+z,f=1):N="";else if(109===_)if(l===!0&&105===ee)void 0===E&&(E={}),z=(R=N.substring(7,N.indexOf("{"))+" ").trim(),R=R.substring(0,R.indexOf(" ")).trim(),E[R]={key:z.trim(),body:""},f=3,N="",z="";else if(101===ee)if(0!==U){for(T++,y="",x="",A=O.split(","),H=1;T<X&&(o=t.charCodeAt(T),123===o?H++:125===o&&H--,0!==H);)x+=t[T++];for(var p=0,v=A.length;p<v;p++)e=A[p],y+=r((p===v-1?e.substring(0,e.length-1):e).trim(),x,i,l,n);y=N+y+"}",N="",f=4}else f=2;else f=6;if(105===_){if(l===!0&&110===ee)if(N=N.substring(9,N.length-1),k=N.indexOf("("),k>-1){var re=N.substring(0,k),te=E[re],ie=N.substring(re.length+1,N.length-1).split(","),le=te.key.replace(re,"").replace(/\(|\)/g,"").trim().split(",");N=te.body;for(var p=0,v=ie.length;p<v;p++){var ne=le[p].trim();void 0!==ne&&(N=N.replace(new RegExp("var\\(~~"+ne+"\\)","g"),ie[p].trim()))}t+=N,X+=N.length,N=""}else N=E[N].body,0===U&&(t+=N,X+=N.length,N="");else if(109===ee&&c){var se=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(N);null!==se&&(N=n(5,se[1].replace(/['"; ]/g,""),W,V)||"",N&&(t=t.substring(0,T+1)+N+t.substring(T+1),X+=N.length),N="")}}else 4!==f&&(G=-1,D++)}else if(l===!0&&59===Z&&126===$&&126===_)m=N.indexOf(":"),void 0===j&&(j=[]),j[j.length]=[N.substring(0,m),N.substring(m+1,N.length-1).trim()],N="";else{if(97===$&&110===_&&105===ee){N=N.substring(0,N.length-1),m=N.indexOf(":")+1,C=N.substring(0,m);var ae=N.substring(m).trim().split(",");if(45!==(N.charCodeAt(9)||0))for(var fe=0,v=ae.length;fe<v;fe++){for(var ge=ae[fe],oe=ge.split(" "),ue=0,he=oe.length;ue<he;ue++){var ce=oe[ue].trim(),de=ce.charCodeAt(0),ee=ce.charCodeAt(2),pe=ce.length,be=ce.charCodeAt(pe-1);99===de&&41===be||105===de&&102===ee&&101===be&&8===pe||108===de&&110===ee&&114===be&&6===pe||97===de&&116===ee&&101===be&&9===pe||110===de&&114===ee&&108===be&&6===pe||98===de&&99===ee&&115===be&&9===pe||102===de&&114===ee&&115===be&&8===pe||98===de&&116===ee&&104===be&&4===pe||110===de&&110===ee&&101===be&&4===pe||101===de&&115===ee&&101===be&&4===pe||101===de&&pe>4&&45===ce.charCodeAt(4)||!isNaN(parseFloat(ce))||(oe[ue]=h+ce,ge=oe.join(" "))}C+=(0===fe?"":",")+ge.trim()}else C+=(110!==(N.charCodeAt(10)||0)?"":h)+ae[0].trim();N=S+C+";"+C+";"}else if(97===$&&112===_&&112===ee)N=S+N+P+N+N;else if(100===$&&105===_&&115===ee)N.indexOf("flex")>-1&&(N="display:"+S+"box;display:"+S+"flex;"+Q+"flexbox;display:flex;");else if(116===$&&114===_&&97===ee)N=S+N+(102===N.charCodeAt(5)?Q+N:"")+N;else if(104===$&&121===_&&112===ee||117===$&&115===_&&101===ee)N=S+N+P+N+Q+N+N;else if(102===$&&108===_&&101===ee)N=S+N+Q+N+N;else if(111===$&&114===_&&100===ee)N=S+N+Q+"flex-"+N+N;else if(97===$&&108===_&&105===ee&&45===(N.charCodeAt(5)||0))switch(N.charCodeAt(6)||0){case 105:w=N.replace("-items",""),N=S+"box-"+w+Q+"flex-"+w+N;break;case 115:N=Q+"flex-item-"+N.replace("-self","")+N;break;default:N=Q+"flex-line-pack"+N.replace("align-content","")+N}else if(123===Z){if(U++,1===L&&0!==B.length&&(L=0,B=s+" {"+B+"}",c&&(w=n(4,B,W,V),null!=w&&(B=w)),Y+=B,B=""),0===D||2===f)if(2===U){T++,x="";var ve=N.substring(0,N.length-1).split(","),me=O.substring(0,O.length-1).split(",");for(H=1;T<X&&(o=t.charCodeAt(T),123===o?H++:125===o&&H--,0!==H);)x+=t[T++];for(var fe=0,v=me.length;fe<v;fe++){w=me[fe],me[fe]="";for(var ue=0,he=ve.length;ue<he;ue++)e=w.replace(s,"").trim(),e=ve[ue].indexOf(" &")>0?ve[ue].replace("&","").trim()+" "+e:e+" "+ve[ue].trim(),me[fe]+=e.trim()+(ue===he-1?"":",")}N="\n"+me.join(",")+" {"+x+"}",q+=N.replace(/&| +&/g,""),K=1,N="",U--}else{A=N.split(","),C="";for(var fe=0,v=A.length;fe<v;fe++){var xe=(e=A[fe]).charCodeAt(0);if(32===xe&&(xe=(e=e.trim()).charCodeAt(0)),91===xe)for(var ue=fe+1,he=v-fe;ue<he;ue++){var Ae=(e+=","+A[ue]).trim();if(93===Ae.charCodeAt(Ae.length-1)){v-=ue,A.splice(fe,ue);break}}if(38===xe)e=s+e.substring(1);else if((k=e.indexOf(" &"))>0&&(xe=58,e=":global("+e.substring(0,k)+")"+e.substring(k)),58===xe){var Ce=e.charCodeAt(1);if(104===Ce&&116===e.charCodeAt(4)){var ye=(e=e.substring(5)).charCodeAt(0);40===ye?e=s+e.substring(1).replace(")",""):45===ye?(k=e.indexOf(")"),e=e.substring(9,k)+" "+s+e.substring(k+1)):e=s+e}else e=103===Ce?e.substring(8).replace(")","").replace("&",s):s+e}else e=s+" "+e;C+=0===fe?e:","+e}O=N=C}}else 125===Z&&(0!==U&&U--,0===U&&1===K&&(t=t.substring(0,T+1)+q+t.substring(T+1),X+=q.length,q="",K=0,G++));0!==D?(125===Z?G++:123===Z&&0!==G&&G--,1!==M||123!==Z&&0!==G||0===B.length||(M=0,N=s+" {"+B+"}"+N,B=""),0===G?(0===f?N="":1===f?(N="}@"+z+"}",z=""):3===f&&(E[R].body=z,R="",N="",z=""),f=0,G--,D--):1===f||3===f?(z+=N,3===f&&(N="")):2===f&&0===U&&(125!==Z&&(0===M&&(B=""),B+=N,N=""),M=1)):0===U&&125!==Z&&(L=1,B=void 0===B?N:B+N,N="")}F+=N,N="",125!==Z||0!==I||0!==f&&4!==f||(123!==F.charCodeAt(F.length-2)&&(c&&0!==F.length&&(w=n(3,F,W,V),null!=w&&(F=w)),Y+=F.trim()),4===f&&(c&&(w=n(3,y,W,V),null!=w&&(y=w)),f=0,Y+=y),F="")}T++,V++}if(void 0!==B&&0!==B.length&&(B=s+" {"+B+"}",c&&(w=n(4,B,W,V),null!=w&&(B=w)),Y+=B),l&&void 0!==j)for(var p=0,v=j.length;p<v;p++)Y=Y.replace(new RegExp("var\\("+j[p][0]+"\\)","g"),j[p][1]);return c&&(w=n(6,Y,W,V),null!=w&&(Y=w)),Y}return r.use=function(e,t){var i=this.plugins,l=i.length;if(null==t&&(t=e,e=void 0),t instanceof Array)for(var n=0,l=t.length;n<l;n++)i[l++]=t[n];else if(null==e)i[l]=t;else{var s=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),a=/[ \t\r\n]*,[ \t\r\n]*/g;i[l]=function(e,r,i,l){if(6===e)return r=r.replace(s,function(e,r){var i=r.replace(a,",").split(","),l=t.apply(null,i);return null!=l?l:e})}}return r},r.plugins=[],r});