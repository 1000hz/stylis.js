!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,l,i,n){e+="";var s,a,g,o,f,c,h="",u="",d=e.charCodeAt(0)||0;91===d?(g=e.substring(1,e.length-1).split("="),s=(u=g[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),h="["+g[0]+'="'+u+'"]'):u=35===d||46===d||62===d?(h=e).substring(1):h=e,d=0,void 0==l||l===!0?(l=!0,o=u):(o="",l=!1);var p=null!=n;p&&(c=(typeof n).charCodeAt(0),111===c?r.use(n,null):102!==c&&(p=!1)),0!==(f=r.plugins).length&&(n=1===f.length?f[0]:function(e,r,t,l){for(var i=r,n=0,s=f.length;n<s;n++)i=f[n](e,i,t,l,h)||i;return i!==r?i:void 0},p=!0);var b,v,A,x,m,C,y,O,k,w,$,j,E,R,z,N,F,q,B="-moz-",D="-ms-",G="-webkit-",H="",I="",J="",K=0,L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0;p&&(C=n(0,t,le,te,h,0),null!=C&&(t=C));for(var ee=0,re=0,te=0,le=1,ie=t.length,ne="";ee<ie;){if(K=t.charCodeAt(ee),0!==V||0!==S||0!==Y||123!==K&&125!==K&&59!==K)if(13===K||10===K)1===_&&(Y=_=0,H=H.substring(0,H.indexOf("//"))),te=0,le++;else{if(9!==K)switch(H+=t.charAt(ee),K){case 34:V=34===V?0:39===V?39:34;break;case 39:V=39===V?0:34===V?34:39;break;case 40:0===V&&(S=1);break;case 41:0===V&&(S=0);break;case 47:0===V&&0===S&&(0===Z&&47===t.charCodeAt(ee-1)?Y=_=1:42===t.charCodeAt(ee-1)&&(Y=Z=0,H=H.substring(0,H.indexOf("/*"))));break;case 42:0===V&&0===S&&0===_&&0===Z&&47===t.charCodeAt(ee-1)&&(Y=Z=1)}te++}else{if(H+=t.charAt(ee),k=H.charCodeAt(0),32===k&&(k=(H=H.trim()).charCodeAt(0)),w=H.charCodeAt(1)||0,$=H.charCodeAt(2)||0,p&&125!==K&&(C=123===K?n(1,H.substring(0,H.length-1).trim(),le,te,h,ne.length):n(2,H,le,te,h,ne.length),null!=C&&(H=123===K?C+" {":C)),64===k){if(1===W&&0!==J.length&&(W=0,J=h+" {"+J+"}",p&&(C=n(4,J,le,te,h,ne.length),null!=C&&(J=C)),ne+=J,J=""),59!==K)if(107===w||103===w)107===w?(E=H.substring(1,11)+(0===T?o:"")+H.substring(11),H="@"+G+E,d=1):(T=1,H="");else if(109===w)if(i===!0&&105===$)void 0===F&&(F={}),E=(q=H.substring(7,H.indexOf("{"))+" ").trim(),q=q.substring(0,q.indexOf(" ")).trim(),F[q]={key:E.trim(),body:""},d=3,H="",E="";else if(101===$)if(0!==re){for(ee++,te++,void 0===m&&(m=""),C="",v="",A=y.split(","),P=1;ee<ie&&(s=t.charCodeAt(ee),123===s?P++:125===s&&P--,0!==P);)v+=t.charAt(ee++),te=13===s||10===s?(le++,0):te+1;for(var se=0,ae=A.length;se<ae;se++)e=A[se],C+=r((se===ae-1?e.substring(0,e.length-1):e).trim(),v,l,i,n);m+=H+C+"}",H="",U=1,d=4}else d=2;else d=6;if(105===w){if(i===!0&&110===$)if(H=H.substring(9,H.length-1),O=H.indexOf("("),O!==-1){var ge=H.substring(0,O),oe=F[ge],fe=H.substring(ge.length+1,H.length-1).split(","),ce=oe.key.replace(ge,"").replace(/\(|\)/g,"").trim().split(",");H=oe.body;for(var se=0,ae=fe.length;se<ae;se++){var he=ce[se].trim();void 0!==he&&(H=H.replace(new RegExp("var\\(~~"+he+"\\)","g"),fe[se].trim()))}t+=H,ie+=H.length,H=""}else H=F[H].body,0===re&&(t+=H,ie+=H.length,H="");else if(109===$&&p){var ue=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(H);null!==ue&&(H=n(5,ue[1].replace(/['"; ]/g,""),le,te,h,ne.length)||"",H&&(t=t.substring(0,ee+1)+H+t.substring(ee+1),ie+=H.length),H="")}}else 4!==d&&59!==K&&(107!==w&&103!==w&&109!==w&&(d=5),M=-1,L++)}else if(i===!0&&126===k&&126===w&&59===K&&(b=H.indexOf(":"))!==-1)void 0===N&&(z=[],N=0),z[N++]=[H.substring(0,b),H.substring(b+1,H.length-1).trim()],H="";else{if(97===k&&110===w&&105===$){if(H=H.substring(0,H.length-1),b=H.indexOf(":")+1,x=H.substring(0,b),l===!0&&45!==(H.charCodeAt(9)||0))for(var de=H.substring(b).trim().split(","),pe=0,ae=de.length;pe<ae;pe++){for(var be=de[pe],ve=be.split(" "),Ae=0,xe=ve.length;Ae<xe;Ae++){var me=ve[Ae].trim(),Ce=me.charCodeAt(0),ye=me.charCodeAt(2),Oe=me.length,ke=me.charCodeAt(Oe-1);41===ke||0===Oe||105===Ce&&102===ye&&101===ke&&8===Oe||108===Ce&&110===ye&&114===ke&&6===Oe||97===Ce&&116===ye&&101===ke&&(9===Oe||17===Oe)||110===Ce&&114===ye&&108===ke&&6===Oe||98===Ce&&99===ye&&115===ke&&9===Oe||102===Ce&&114===ye&&115===ke&&8===Oe||98===Ce&&116===ye&&104===ke&&4===Oe||110===Ce&&110===ye&&101===ke&&4===Oe||114===Ce&&110===ye&&103===ke&&7===Oe||112===Ce&&117===ye&&100===ke&&6===Oe||114===Ce&&118===ye&&100===ke&&8===Oe||115===Ce&&101===ye&&(116===ke&&10===Oe||100===ke&&8===Oe)||101===Ce&&115===ye&&(101===ke&&4===Oe||(11===Oe||7===Oe||8===Oe)&&45===me.charCodeAt(4))||!isNaN(parseFloat(me))||me.indexOf("(")!==-1||(ve[Ae]=o+me)}x+=(0===pe?"":",")+ve.join(" ").trim()}else x+=(110!==(H.charCodeAt(10)||0)?"":o)+H.substring(b).trim().trim();H=G+x+";"+x+";"}else if(97===k&&112===w&&112===$)H=G+H+B+H+H;else if(100===k&&105===w&&115===$)(O=H.indexOf("flex"))!==-1&&(C=101===H.charCodeAt(O-2)?"inline-":"",H="display: "+G+C+"box;display: "+G+C+"flex;display: "+D+"flexbox;display: "+C+"flex;");else if(116===k&&114===w&&97===$)H=G+H+(102===H.charCodeAt(5)?D+H:"")+H;else if(104===k&&121===w&&112===$||117===k&&115===w&&101===$)H=G+H+B+H+D+H+H;else if(102===k&&108===w&&101===$)H=G+H+D+H+H;else if(111===k&&114===w&&100===$)H=G+H+D+"flex-"+H+H;else if(97===k&&108===w&&105===$&&45===(H.charCodeAt(5)||0))switch(H.charCodeAt(6)||0){case 105:C=H.replace("-items",""),H=G+"box-"+C+D+"flex-"+C+H;break;case 115:H=D+"flex-item-"+H.replace("-self","")+H;break;default:H=D+"flex-line-pack"+H.replace("align-content","")+H}else if(99===k&&117===w&&114===$&&null!==/zoo|gra/.exec(H))H=H.replace(/: +/g,": "+G)+H.replace(/: +/g,": "+B)+H;else if(123===K)if(re++,1===W&&0!==J.length&&(W=0,J=h+" {"+J+"}",p&&(C=n(4,J,le,te,h,ne.length),null!=C&&(J=C)),ne+=J,J=""),2===re){ee++,te++,v="";var we=H.substring(0,H.length-1).split(","),$e=y.substring(0,y.length-1).split(",");for(P=1;ee<ie&&(s=t.charCodeAt(ee),123===s?P++:125===s&&P--,0!==P);)v+=t.charAt(ee++),te=13===s||10===s?(le++,0):te+1;for(var pe=0,ae=$e.length;pe<ae;pe++){C=$e[pe],$e[pe]="";for(var Ae=0,xe=we.length;Ae<xe;Ae++)e=C.replace(h,"&").trim(),j=we[Ae].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,$e[pe]+=e.replace(/ +&/,"").trim()+(Ae===xe-1?"":",")}void 0===R&&(R=""),R+="\n"+$e.join(",").replace(/(?:&| | .*):global\((.*)\)/g," $1")+" {"+v+"}",Q=1,H="",re--}else if(0!==T||0!==L&&2!==d)y=H;else{A=H.split(","),x="";for(var pe=0,ae=A.length;pe<ae;pe++){if(a=(e=A[pe]).charCodeAt(0),32===a&&(a=(e=e.trim()).charCodeAt(0)),null!==/\[.+=/g.exec(e)&&e.indexOf("]")===-1)for(var Ae=pe+1,xe=ae;Ae<xe;Ae++){var je=(e+=","+A[Ae]).trim();if(je.indexOf("]")!==-1){ae-=Ae,A.splice(pe,Ae);break}}if(38===a)e=58===a&&103===e.charCodeAt(2)?e.substring(1).replace(/:global\((.*)\)/g,"$1").replace(/&/g,h):h+e.substring(1).replace(/&/g,h);else if((O=e.indexOf(" &"))>0&&(a=58,e=":global("+e.substring(0,O)+")"+e.substring(O)),58===a){var Ee=e.charCodeAt(1);if(104===Ee&&116===e.charCodeAt(4)){var Re=e.charCodeAt(5);e=40===Re?h+e.replace(/:host\((.*)\)/g,"$1"):45===Re?e.replace(/:host-context\((.*)\)/g,"$1 "+h):h+e.substring(5)}else e=103===Ee?e.replace(/:global\((.*)\)/g,"$1").replace(/&/g,h):h+e}else e=h+" "+e;p&&(C=n(1.5,pe===ae-1?e.substring(0,e.length-1).trim():e,le,te,h,ne.length),null!=C&&(e=pe===ae-1?C+" {":C)),x+=0===pe?e:","+e}y=H=x}else 125===K&&(0!==re&&re--,0===re&&1===Q&&(t=t.substring(0,ee+1)+R+t.substring(ee+1),ie+=R.length,R="",Q=0,M++));0!==L?(125===K?M++:123===K&&0!==M&&M--,1!==X||123!==K&&0!==M||0===J.length||(X=0,H=h+" {"+J+"}"+H,J=""),0===M?(0===d?(T=0,H=""):1===d?(H="}@"+E+"}",E=""):3===d&&(F[q].body=E,q="",H="",E=""),d=0,M--,L--):1===d||3===d?(E+=H,3===d&&(H="")):2===d&&0===re&&(125!==K&&(0===X&&(J=""),J+=H,H=""),X=1)):0===re&&125!==K&&(W=1,J=void 0===J?H:J+H,H="")}I+=H,H="",125!==K||0!==d&&4!==d||(a=I.charCodeAt(I.length-2),4===d&&(d=0),void 0!==m&&0!==m.length&&(I=123===a?m:I+m,m="",a=0),123!==a&&(p&&(C=n(3,I,le,te,h,ne.length),null!=C&&(I=C)),ne+=I),I="")}ee++}if(void 0!==J&&0!==J.length&&(J=h+" {"+J+"}",p&&(C=n(4,J,le,te,h,ne.length),null!=C&&(J=C)),ne+=J),i&&void 0!==z)for(var se=0;se<N;se++)ne=ne.replace(new RegExp("var\\("+z[se][0]+"\\)","g"),z[se][1]);return p&&(C=n(6,ne,le,te,h,ne.length),null!=C&&(ne=C)),ne}return r.use=function(e,t){var l=r.plugins,i=l.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)l[i++]=t[s];else if(null==e)l[i]=t;else{var g=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),o=/[ \t\r\n]*,[ \t\r\n]*/g;l[i]=function(e,r,l,i){if(6===e)return r=r.replace(g,function(e,r){var l=r.replace(o,",").split(","),i=t.apply(null,l);return null!=i?i:e})}}return r},r.plugins=[],r});