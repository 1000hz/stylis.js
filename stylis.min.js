!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,l,n){e+="";var s="",a="",f=e.charCodeAt(0)||0;if(91===f){var o=e.substring(1,e.length-1).split("="),g=(a=o[1]).charCodeAt(0);34!==g&&39!==g||(a=a.substring(1,a.length-1)),s="["+o[0]+'="'+a+'"]'}else a=35===f||46===f||62===f?(s=e).substring(1):s=e;f=0;var u;void 0==i||i===!0?(i=!0,u=a):(u="",i=!1);var c,h=null!=n;if(h){var d=(typeof n).charCodeAt(0);111===d?r.use(n,null):102!==d&&(h=!1)}0!==(c=r.plugins).length&&(n=function(e,r,t,i){for(var l=r,n=0,s=c.length;n<s;n++)l=c[n](e,l,t,i)||l;return l!==r?l:void 0},h=!0);var p,b,v,A,m,x,C,y,w,O,k,j="",E="",R="",N="",z="",F=0,q=0,B=0,D=0,G=0,H=0,I=0,J=0,K="-moz-",L="-ms-",M="-webkit-";h&&(x=n(0,t,T,S),null!=x&&(t=x));for(var P=0,Q=0,S=0,T=1,U=t.length,V="";P<U;){var W=t.charCodeAt(P);if(0!==G||123!==W&&125!==W&&59!==W)13===W||10===W?(2===D&&(j="",D=0),S=0,T++):9!==W&&(34===W?G=34===G?0:39===G?39:34:39===W?G=39===G?0:34===G?34:39:47===W&&47===W&&D<2&&D++,j+=t.charAt(P));else{j+=t.charAt(P);var X=j.charCodeAt(0);32===X&&(X=(j=j.trim()).charCodeAt(0));var Y=j.charCodeAt(1)||0,Z=j.charCodeAt(2)||0;if(h&&125!==W&&(x=123===W?n(1,j.substring(0,j.length-1).trim(),T,S):n(2,j,T,S),null!=x&&(j=123===W?x+"{":x)),2===D)125===W&&(D=0),j="";else if(64===X){if(1===I&&0!==z.length&&(I=0,z=s+" {"+z+"}",h&&(x=n(4,z,T,S),null!=x&&(z=x)),V+=z,z=""),107===Y||103===Y)107===Y?(E=j.substring(1,11)+u+j.substring(11),j="@"+M+E,f=1):j="";else if(109===Y)if(l===!0&&105===Z)void 0===O&&(O={}),E=(k=j.substring(7,j.indexOf("{"))+" ").trim(),k=k.substring(0,k.indexOf(" ")).trim(),O[k]={key:E.trim(),body:""},f=3,j="",E="";else if(101===Z)if(0!==Q){for(P++,m="",b="",v=C.split(","),B=1;P<U&&(g=t.charCodeAt(P),123===g?B++:125===g&&B--,0!==B);)b+=t.charAt(P++);for(var $=0,_=v.length;$<_;$++)e=v[$],m+=r(($===_-1?e.substring(0,e.length-1):e).trim(),b,i,l,n);m=j+m+"}",j="",f=4}else f=2;else f=6;if(105===Y){if(l===!0&&110===Z)if(j=j.substring(9,j.length-1),y=j.indexOf("("),y>-1){var ee=j.substring(0,y),re=O[ee],te=j.substring(ee.length+1,j.length-1).split(","),ie=re.key.replace(ee,"").replace(/\(|\)/g,"").trim().split(",");j=re.body;for(var $=0,_=te.length;$<_;$++){var le=ie[$].trim();void 0!==le&&(j=j.replace(new RegExp("var\\(~~"+le+"\\)","g"),te[$].trim()))}t+=j,U+=j.length,j=""}else j=O[j].body,0===Q&&(t+=j,U+=j.length,j="");else if(109===Z&&h){var ne=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(j);null!==ne&&(j=n(5,ne[1].replace(/['"; ]/g,""),T,S)||"",j&&(t=t.substring(0,P+1)+j+t.substring(P+1),U+=j.length),j="")}}else 4!==f&&(q=-1,F++)}else if(l===!0&&59===W&&126===X&&126===Y)p=j.indexOf(":"),void 0===w&&(w=[]),w[w.length]=[j.substring(0,p),j.substring(p+1,j.length-1).trim()],j="";else{if(97===X&&110===Y&&105===Z){j=j.substring(0,j.length-1),p=j.indexOf(":")+1,A=j.substring(0,p);var se=j.substring(p).trim().split(",");if(i===!0&&45!==(j.charCodeAt(9)||0))for(var ae=0,_=se.length;ae<_;ae++){for(var fe=se[ae],oe=fe.split(" "),ge=0,ue=oe.length;ge<ue;ge++){var ce=oe[ge].trim(),he=ce.charCodeAt(0),Z=ce.charCodeAt(2),de=ce.length,pe=ce.charCodeAt(de-1);41===pe||0===de||105===he&&102===Z&&101===pe&&8===de||108===he&&110===Z&&114===pe&&6===de||97===he&&116===Z&&101===pe&&(9===de||17===de)||110===he&&114===Z&&108===pe&&6===de||98===he&&99===Z&&115===pe&&9===de||102===he&&114===Z&&115===pe&&8===de||98===he&&116===Z&&104===pe&&4===de||110===he&&110===Z&&101===pe&&4===de||114===he&&110===Z&&103===pe&&7===de||112===he&&117===Z&&100===pe&&6===de||114===he&&118===Z&&100===pe&&8===de||115===he&&101===Z&&(116===pe&&10===de||100===pe&&8===de)||101===he&&115===Z&&(101===pe&&4===de||(11===de||7===de||8===de)&&45===ce.charCodeAt(4))||!isNaN(parseFloat(ce))||ce.indexOf("(")!==-1||(oe[ge]=u+ce)}A+=(0===ae?"":",")+oe.join(" ").trim()}else A+=(110!==(j.charCodeAt(10)||0)?"":u)+se[0].trim();j=M+A+";"+A+";"}else if(97===X&&112===Y&&112===Z)j=M+j+K+j+j;else if(100===X&&105===Y&&115===Z)j.indexOf("flex")>-1&&(j="display:"+M+"box;display:"+M+"flex;"+L+"flexbox;display:flex;");else if(116===X&&114===Y&&97===Z)j=M+j+(102===j.charCodeAt(5)?L+j:"")+j;else if(104===X&&121===Y&&112===Z||117===X&&115===Y&&101===Z)j=M+j+K+j+L+j+j;else if(102===X&&108===Y&&101===Z)j=M+j+L+j+j;else if(111===X&&114===Y&&100===Z)j=M+j+L+"flex-"+j+j;else if(97===X&&108===Y&&105===Z&&45===(j.charCodeAt(5)||0))switch(j.charCodeAt(6)||0){case 105:x=j.replace("-items",""),j=M+"box-"+x+L+"flex-"+x+j;break;case 115:j=L+"flex-item-"+j.replace("-self","")+j;break;default:j=L+"flex-line-pack"+j.replace("align-content","")+j}else if(123===W){if(Q++,1===I&&0!==z.length&&(I=0,z=s+" {"+z+"}",h&&(x=n(4,z,T,S),null!=x&&(z=x)),V+=z,z=""),0===F||2===f)if(2===Q){P++,b="";var be=j.substring(0,j.length-1).split(","),ve=C.substring(0,C.length-1).split(",");for(B=1;P<U&&(g=t.charCodeAt(P),123===g?B++:125===g&&B--,0!==B);)b+=t.charAt(P++);for(var ae=0,_=ve.length;ae<_;ae++){x=ve[ae],ve[ae]="";for(var ge=0,ue=be.length;ge<ue;ge++)e=x.replace(s,"").trim(),e=be[ge].indexOf(" &")>0?be[ge].replace("&","").trim()+" "+e:e+" "+be[ge].trim(),ve[ae]+=e.trim()+(ge===ue-1?"":",")}j="\n"+ve.join(",")+" {"+b+"}",N+=j.replace(/&| +&/g,""),H=1,j="",Q--}else{v=j.split(","),A="";for(var ae=0,_=v.length;ae<_;ae++){var Ae=(e=v[ae]).charCodeAt(0);if(32===Ae&&(Ae=(e=e.trim()).charCodeAt(0)),91===Ae)for(var ge=ae+1,ue=_-ae;ge<ue;ge++){var me=(e+=","+v[ge]).trim();if(93===me.charCodeAt(me.length-1)){_-=ge,v.splice(ae,ge);break}}if(38===Ae)e=s+e.substring(1);else if((y=e.indexOf(" &"))>0&&(Ae=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===Ae){var xe=e.charCodeAt(1);if(104===xe&&116===e.charCodeAt(4)){var Ce=(e=e.substring(5)).charCodeAt(0);40===Ce?e=s+e.substring(1).replace(")",""):45===Ce?(y=e.indexOf(")"),e=e.substring(9,y)+" "+s+e.substring(y+1)):e=s+e}else e=103===xe?e.substring(8).replace(")","").replace("&",s):s+e}else e=s+" "+e;A+=0===ae?e:","+e}C=j=A}}else 125===W&&(0!==Q&&Q--,0===Q&&1===H&&(t=t.substring(0,P+1)+N+t.substring(P+1),U+=N.length,N="",H=0,q++));0!==F?(125===W?q++:123===W&&0!==q&&q--,1!==J||123!==W&&0!==q||0===z.length||(J=0,j=s+" {"+z+"}"+j,z=""),0===q?(0===f?j="":1===f?(j="}@"+E+"}",E=""):3===f&&(O[k].body=E,k="",j="",E=""),f=0,q--,F--):1===f||3===f?(E+=j,3===f&&(j="")):2===f&&0===Q&&(125!==W&&(0===J&&(z=""),z+=j,j=""),J=1)):0===Q&&125!==W&&(I=1,z=void 0===z?j:z+j,j="")}R+=j,j="",125!==W||0!==D||0!==f&&4!==f||(123!==R.charCodeAt(R.length-2)&&(h&&0!==R.length&&(x=n(3,R,T,S),null!=x&&(R=x)),V+=R.trim()),4===f&&(h&&(x=n(3,m,T,S),null!=x&&(m=x)),f=0,V+=m),R="")}P++,S++}if(void 0!==z&&0!==z.length&&(z=s+" {"+z+"}",h&&(x=n(4,z,T,S),null!=x&&(z=x)),V+=z),l&&void 0!==w)for(var $=0,_=w.length;$<_;$++)V=V.replace(new RegExp("var\\("+w[$][0]+"\\)","g"),w[$][1]);return h&&(x=n(6,V,T,S),null!=x&&(V=x)),V}return r.use=function(e,t){var i=this.plugins,l=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)this.use(n,t[n]);else if(t.constructor===Array)for(var s=0,l=t.length;s<l;s++)i[l++]=t[s];else if(null==e)i[l]=t;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[l]=function(e,r,i,l){if(6===e)return r=r.replace(a,function(e,r){var i=r.replace(f,",").split(","),l=t.apply(null,i);return null!=l?l:e})}}return r},r.plugins=[],r});