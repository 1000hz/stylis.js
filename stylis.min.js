!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,l,n){e+="";var s,a,o,f,g,c="",u="",d=e.charCodeAt(0)||0;91===d?(a=e.substring(1,e.length-1).split("="),s=(u=a[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),c="["+a[0]+'="'+u+'"]'):u=35===d||46===d||62===d?(c=e).substring(1):c=e,d=0,void 0==i||i===!0?(i=!0,o=u):(o="",i=!1);var h=null!=n;h&&(g=(typeof n).charCodeAt(0),111===g?r.use(n,null):102!==g&&(h=!1)),0!==(f=r.plugins).length&&(n=1===f.length?f[0]:function(e,r,t,i){for(var l=r,n=0,s=f.length;n<s;n++)l=f[n](e,l,t,i,c)||l;return l!==r?l:void 0},h=!0);var b,p,v,A,x,m,C,y,O,k,w,j,E,R,z,N,F="-moz-",q="-ms-",B="-webkit-",D="",G="",H="",I="",J="",K=0,L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0;h&&(m=n(0,t,ee,_,c),null!=m&&(t=m));for(var Z=0,$=0,_=0,ee=1,re=t.length,te="";Z<re;){if(K=t.charCodeAt(Z),0!==Q||0!==T||0!==W||123!==K&&125!==K&&59!==K)if(13===K||10===K)1===Y&&(W=Y=0,D=D.substring(0,D.indexOf("//"))),_=0,ee++;else{if(9!==K)switch(D+=t.charAt(Z),K){case 34:Q=34===Q?0:39===Q?39:34;break;case 39:Q=39===Q?0:34===Q?34:39;break;case 40:0===Q&&(T=1);break;case 41:0===Q&&(T=0);break;case 47:0===Q&&0===T&&(0===X&&47===t.charCodeAt(Z-1)?W=Y=1:42===t.charCodeAt(Z-1)&&(W=X=0,D=D.substring(0,D.indexOf("/*"))));break;case 42:0===Q&&0===T&&0===Y&&0===X&&47===t.charCodeAt(Z-1)&&(W=X=1)}_++}else{if(D+=t.charAt(Z),O=D.charCodeAt(0),32===O&&(O=(D=D.trim()).charCodeAt(0)),k=D.charCodeAt(1)||0,w=D.charCodeAt(2)||0,h&&125!==K&&(m=123===K?n(1,D.substring(0,D.length-1).trim(),ee,_,c):n(2,D,ee,_,c),null!=m&&(D=123===K?m+" {":m)),64===O){if(1===U&&0!==J.length&&(U=0,J=c+" {"+J+"}",h&&(m=n(4,J,ee,_,c),null!=m&&(J=m)),te+=J,J=""),59!==K)if(107===k||103===k)107===k?(G=D.substring(1,11)+o+D.substring(11),D="@"+B+G,d=1):D="";else if(109===k)if(l===!0&&105===w)void 0===z&&(z={}),G=(N=D.substring(7,D.indexOf("{"))+" ").trim(),N=N.substring(0,N.indexOf(" ")).trim(),z[N]={key:G.trim(),body:""},d=3,D="",G="";else if(101===w)if(0!==$){for(Z++,x="",p="",v=C.split(","),P=1;Z<re&&(s=t.charCodeAt(Z),123===s?P++:125===s&&P--,0!==P);)p+=t.charAt(Z++);for(var ie=0,le=v.length;ie<le;ie++)e=v[ie],x+=r((ie===le-1?e.substring(0,e.length-1):e).trim(),p,i,l,n);x=D+x+"}",D="",d=4}else d=2;else d=6;if(105===k){if(l===!0&&110===w)if(D=D.substring(9,D.length-1),y=D.indexOf("("),y!==-1){var ne=D.substring(0,y),se=z[ne],ae=D.substring(ne.length+1,D.length-1).split(","),oe=se.key.replace(ne,"").replace(/\(|\)/g,"").trim().split(",");D=se.body;for(var ie=0,le=ae.length;ie<le;ie++){var fe=oe[ie].trim();void 0!==fe&&(D=D.replace(new RegExp("var\\(~~"+fe+"\\)","g"),ae[ie].trim()))}t+=D,re+=D.length,D=""}else D=z[D].body,0===$&&(t+=D,re+=D.length,D="");else if(109===w&&h){var ge=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(D);null!==ge&&(D=n(5,ge[1].replace(/['"; ]/g,""),ee,_,c)||"",D&&(t=t.substring(0,Z+1)+D+t.substring(Z+1),re+=D.length),D="")}}else 4!==d&&59!==K&&(107!==k&&103!==k&&109!==k&&(d=5),M=-1,L++)}else if(l===!0&&126===O&&126===k&&59===K&&(b=D.indexOf(":"))!==-1)void 0===R&&(E=[],R=0),E[R++]=[D.substring(0,b),D.substring(b+1,D.length-1).trim()],D="";else{if(97===O&&110===k&&105===w){D=D.substring(0,D.length-1),b=D.indexOf(":")+1,A=D.substring(0,b);var ce=D.substring(b).trim().split(",");if(i===!0&&45!==(D.charCodeAt(9)||0))for(var ue=0,le=ce.length;ue<le;ue++){for(var de=ce[ue],he=de.split(" "),be=0,pe=he.length;be<pe;be++){var ve=he[be].trim(),Ae=ve.charCodeAt(0),xe=ve.charCodeAt(2),me=ve.length,Ce=ve.charCodeAt(me-1);41===Ce||0===me||105===Ae&&102===xe&&101===Ce&&8===me||108===Ae&&110===xe&&114===Ce&&6===me||97===Ae&&116===xe&&101===Ce&&(9===me||17===me)||110===Ae&&114===xe&&108===Ce&&6===me||98===Ae&&99===xe&&115===Ce&&9===me||102===Ae&&114===xe&&115===Ce&&8===me||98===Ae&&116===xe&&104===Ce&&4===me||110===Ae&&110===xe&&101===Ce&&4===me||114===Ae&&110===xe&&103===Ce&&7===me||112===Ae&&117===xe&&100===Ce&&6===me||114===Ae&&118===xe&&100===Ce&&8===me||115===Ae&&101===xe&&(116===Ce&&10===me||100===Ce&&8===me)||101===Ae&&115===xe&&(101===Ce&&4===me||(11===me||7===me||8===me)&&45===ve.charCodeAt(4))||!isNaN(parseFloat(ve))||ve.indexOf("(")!==-1||(he[be]=o+ve)}A+=(0===ue?"":",")+he.join(" ").trim()}else A+=(110!==(D.charCodeAt(10)||0)?"":o)+ce[0].trim();D=B+A+";"+A+";"}else if(97===O&&112===k&&112===w)D=B+D+F+D+D;else if(100===O&&105===k&&115===w)(y=D.indexOf("flex"))!==-1&&(m=101===D.charCodeAt(y-2)?"inline-":"",D="display: "+B+m+"box;display: "+B+m+"flex;display: "+q+"flexbox;display: "+m+"flex;");else if(116===O&&114===k&&97===w)D=B+D+(102===D.charCodeAt(5)?q+D:"")+D;else if(104===O&&121===k&&112===w||117===O&&115===k&&101===w)D=B+D+F+D+q+D+D;else if(102===O&&108===k&&101===w)D=B+D+q+D+D;else if(111===O&&114===k&&100===w)D=B+D+q+"flex-"+D+D;else if(97===O&&108===k&&105===w&&45===(D.charCodeAt(5)||0))switch(D.charCodeAt(6)||0){case 105:m=D.replace("-items",""),D=B+"box-"+m+q+"flex-"+m+D;break;case 115:D=q+"flex-item-"+D.replace("-self","")+D;break;default:D=q+"flex-line-pack"+D.replace("align-content","")+D}else if(99===O&&117===k&&114===w&&null!==/zoo|gra/.exec(D))D=D.replace(/: +/g,": "+B)+D.replace(/: +/g,": "+F)+D;else if(123===K){if($++,1===U&&0!==J.length&&(U=0,J=c+" {"+J+"}",h&&(m=n(4,J,ee,_,c),null!=m&&(J=m)),te+=J,J=""),0===L||2===d)if(2===$){Z++,p="";var ye=D.substring(0,D.length-1).split(","),Oe=C.substring(0,C.length-1).split(",");for(P=1;Z<re&&(s=t.charCodeAt(Z),123===s?P++:125===s&&P--,0!==P);)p+=t.charAt(Z++);for(var ue=0,le=Oe.length;ue<le;ue++){m=Oe[ue],Oe[ue]="";for(var be=0,pe=ye.length;be<pe;be++)e=m.replace(c,"&").trim(),j=ye[be].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,Oe[ue]+=e.replace(/ +&/,"").trim()+(be===pe-1?"":",")}I+="\n"+Oe.join(",")+" {"+p+"}",S=1,D="",$--}else{v=D.split(","),A="";for(var ue=0,le=v.length;ue<le;ue++){var ke=(e=v[ue]).charCodeAt(0);if(32===ke&&(ke=(e=e.trim()).charCodeAt(0)),91===ke&&e.indexOf("]")===-1)for(var be=ue+1,pe=le;be<pe;be++){var we=(e+=","+v[be]).trim();if(we.indexOf("]")!==-1){le-=be,v.splice(ue,be);break}}if(38===ke)e=38===e.charCodeAt(1)?e.replace(/&/g,c):c+e.substring(1);else if((y=e.indexOf(" &"))>0&&(ke=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===ke){var je=e.charCodeAt(1);if(104===je&&116===e.charCodeAt(4)){var Ee=(e=e.substring(5)).charCodeAt(0);40===Ee?e=c+e.substring(1).replace(")",""):45===Ee?(y=e.indexOf(")"),e=e.substring(9,y)+" "+c+e.substring(y+1)):e=c+e}else e=103===je?e.substring(8).replace(")","").replace("&",c):c+e}else e=c+" "+e;h&&(m=n(1.5,ue===le-1?e.substring(0,e.length-1).trim():e,ee,_,c),null!=m&&(e=ue===le-1?m+" {":m)),A+=0===ue?e:","+e}C=D=A}}else 125===K&&(0!==$&&$--,0===$&&1===S&&(t=t.substring(0,Z+1)+I+t.substring(Z+1),re+=I.length,I="",S=0,M++));0!==L?(125===K?M++:123===K&&0!==M&&M--,1!==V||123!==K&&0!==M||0===J.length||(V=0,D=c+" {"+J+"}"+D,J=""),0===M?(0===d?D="":1===d?(D="}@"+G+"}",G=""):3===d&&(z[N].body=G,N="",D="",G=""),d=0,M--,L--):1===d||3===d?(G+=D,3===d&&(D="")):2===d&&0===$&&(125!==K&&(0===V&&(J=""),J+=D,D=""),V=1)):0===$&&125!==K&&(U=1,J=void 0===J?D:J+D,D="")}H+=D,D="",125!==K||0!==d&&4!==d||(123!==H.charCodeAt(H.length-2)&&(h&&0!==H.length&&(m=n(3,H,ee,_,c),null!=m&&(H=m)),te+=H.trim()),4===d&&(h&&(m=n(3,x,ee,_,c),null!=m&&(x=m)),d=0,te+=x),H="")}Z++}if(void 0!==J&&0!==J.length&&(J=c+" {"+J+"}",h&&(m=n(4,J,ee,_,c),null!=m&&(J=m)),te+=J),l&&void 0!==E)for(var ie=0;ie<R;ie++)te=te.replace(new RegExp("var\\("+E[ie][0]+"\\)","g"),E[ie][1]);return h&&(m=n(6,te,ee,_,c),null!=m&&(te=m)),te}return r.use=function(e,t){var i=r.plugins,l=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)i[l++]=t[s];else if(null==e)i[l]=t;else{var o=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[l]=function(e,r,i,l){if(6===e)return r=r.replace(o,function(e,r){var i=r.replace(f,",").split(","),l=t.apply(null,i);return null!=l?l:e})}}return r},r.plugins=[],r});