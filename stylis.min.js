!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,l,n,i){e+="";var s,a,g,o,c,f="",h="",d=e.charCodeAt(0);91===d?(g=e.substring(1,e.length-1).split("="),s=(h=g[1]).charCodeAt(0),34!==s&&39!==s||(h=h.substring(1,h.length-1)),f="["+g[0]+'="'+h+'"]'):h=35===d||46===d||62===d?(f=e).substring(1):f=e,d=0,void 0==l||l===!0?(l=!0,o=h):(o="",l=!1);var u=null!=i,p=r.plugins,b=p.length;u&&(c=(typeof i).charCodeAt(0),111===c?r.use(i,null):102===c?p[b++]=i:u=!1),0!==b&&(i=1===b?p[0]:function(e,r,t,l,n,i){for(var s=r,a=0,g=p.length;a<g;a++)s=p[a](e,s,t,l,n,i)||s;if(s!==r)return s},u=!0);var x,v,A,m,C,y,O,w,k,E,R,$,j,z,N,F,q,B,D,G,H="-moz-",I="-ms-",J="-webkit-",K="",L="",M="",P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,ee=0,re=0,te=0,le=0;u&&(y=i(0,t,ae,se,f,0),null!=y&&(t=y),F="");for(var ne=0,ie=0,se=0,ae=1,ge=t.length,oe="";ne<ge;){if(P=t.charCodeAt(ne),0!==X||0!==V||0!==re||123!==P&&125!==P&&59!==P)if(13===P||10===P)1===le?(re=le=0,K=K.substring(0,K.indexOf("//"))):u&&0===re&&0!==(b=(F=F.trim()).length)&&47!==F.charCodeAt(0)&&(0!==K.length&&(y=i(7,F,ae,se,f,oe.length),null!=y&&(K=K.replace(new RegExp(F+"$"),y))),F=""),se=0,ae++;else{if(9!==P)switch(a=t.charAt(ne),u&&0===re&&(F+=a),K+=a,P){case 34:0===re&&(X=34===X?0:39===X?39:34);break;case 39:0===re&&(X=39===X?0:34===X?34:39);break;case 40:0===X&&0===re&&(V=1);break;case 41:0===X&&0===re&&(V=0);break;case 47:0===X&&0===V&&(s=t.charCodeAt(ne-1),0===te&&47===s?re=le=1:42===s&&(re=te=0,K=K.substring(0,K.indexOf("/*"))));break;case 42:0===X&&0===V&&0===le&&0===te&&47===t.charCodeAt(ne-1)&&(re=te=1)}se++}else{if(K+=t.charAt(ne),u&&125!==P&&u&&(y=123===P?i(1,K.substring(0,K.length-1).trim(),ae,se,f,oe.length):i(2,K,ae,se,f,oe.length),null!=y&&(K=123===P?y+" {":y)),k=K.charCodeAt(0),32===k&&(k=(K=K.trim()).charCodeAt(0)),E=K.charCodeAt(1),R=K.charCodeAt(2),64===k){if(1===_&&0!==M.length&&(_=0,M=f+" {"+M+"}",u&&(y=i(4,M,ae,se,f,oe.length),null!=y&&(M=y)),oe+=M,M=""),59!==P)if(107===E||103===E)107===E?(j=K.substring(1,11)+(0===Y?o:"")+K.substring(11),K="@"+J+j,d=1):(Y=1,K="");else if(109===E)if(n===!0&&105===R)void 0===D&&(D={}),j=(G=K.substring(7,K.indexOf("{"))+" ").trim(),G=G.substring(0,G.indexOf(" ")).trim(),D[G]={key:j.trim(),body:""},d=3,K="",j="";else if(101===R)if(0!==ie){for(ne++,se++,void 0===C&&(C=""),y="",v="",A=O.split(r.regex.split),T=1;ne<ge&&(s=t.charCodeAt(ne),123===s?T++:125===s&&T--,0!==T);)v+=t.charAt(ne++),se=13===s||10===s?(ae++,0):se+1;b=A.length;for(var ce=0;ce<b;ce++)e=A[ce],y+=r((ce===b-1?e.substring(0,e.length-1):e).trim(),v,l,n,i);C+=K+y+"}",K="",W=1,d=4}else d=2,N=K,K="";else d=6;if(105===E){if(n===!0&&110===R)if(K=K.substring(9,K.length-1),w=K.indexOf("("),w!==-1){var fe=K.substring(0,w),he=D[fe],de=K.substring(fe.length+1,K.length-1).split(","),ue=he.key.replace(fe,"").replace(/\(|\)/g,"").trim().split(",");K=he.body,b=de.length;for(var ce=0;ce<b;ce++){var pe=ue[ce].trim();void 0!==pe&&(K=K.replace(new RegExp("var\\(~~"+pe+"\\)","g"),de[ce].trim()))}t+=K,ge+=K.length,K=""}else K=D[K].body,0===ie&&(t+=K,ge+=K.length,K="");else if(109===R&&u){var be=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(K);null!==be&&(K=i(5,be[1].replace(/['"; ]/g,""),ae,se,f,oe.length)||"",K&&(t=t.substring(0,ne+1)+K+t.substring(ne+1),ge+=K.length),K="")}}else 4!==d&&59!==P&&(107!==E&&103!==E&&109!==E&&(d=5),S=-1,Q++)}else if(n===!0&&126===k&&126===E&&59===P&&(x=K.indexOf(":"))!==-1)void 0===B&&(q=[],B=0),q[B++]=[K.substring(0,x),K.substring(x+1,K.length-1).trim()],K="";else{if(97===k&&110===E&&105===R){if(K=K.substring(0,K.length-1),x=K.indexOf(":")+1,m=K.substring(0,x),l===!0&&45!==K.charCodeAt(9)){var xe=K.substring(x).trim().split(",");b=xe.length;for(var ve=0;ve<b;ve++){for(var Ae=xe[ve],me=Ae.split(" "),Ce=0,ye=me.length;Ce<ye;Ce++){var Oe=me[Ce].trim(),we=Oe.charCodeAt(0),ke=Oe.charCodeAt(2),Ee=Oe.length,Re=Oe.charCodeAt(Ee-1);41===Re||0===Ee||105===we&&102===ke&&101===Re&&8===Ee||108===we&&110===ke&&114===Re&&6===Ee||97===we&&116===ke&&101===Re&&(9===Ee||17===Ee)||110===we&&114===ke&&108===Re&&6===Ee||98===we&&99===ke&&115===Re&&9===Ee||102===we&&114===ke&&115===Re&&8===Ee||98===we&&116===ke&&104===Re&&4===Ee||110===we&&110===ke&&101===Re&&4===Ee||114===we&&110===ke&&103===Re&&7===Ee||112===we&&117===ke&&100===Re&&6===Ee||114===we&&118===ke&&100===Re&&8===Ee||115===we&&101===ke&&(116===Re&&10===Ee||100===Re&&8===Ee)||101===we&&115===ke&&(101===Re&&4===Ee||(11===Ee||7===Ee||8===Ee)&&45===Oe.charCodeAt(4))||!isNaN(parseFloat(Oe))||Oe.indexOf("(")!==-1||(me[Ce]=o+Oe)}m+=(0===ve?"":",")+me.join(" ").trim()}}else m+=(110!==K.charCodeAt(10)?"":o)+K.substring(x).trim().trim();K=J+m+";"+m+(125===P?";}":";")}else if(97===k&&112===E&&112===R)K=J+K+H+K+K;else if(100===k&&105===E&&115===R)(w=K.indexOf("flex"))!==-1&&(y=101===K.charCodeAt(w-2)?"inline-":"",K="display: "+J+y+"box;display: "+J+y+"flex;display: "+I+"flexbox;display: "+y+"flex"+(125===P?"}":";"));else if(116===k&&114===E&&97===R)K=J+K+(102===K.charCodeAt(5)?I+K:"")+K;else if(104===k&&121===E&&112===R||117===k&&115===E&&101===R)K=J+K+H+K+I+K+K;else if(102===k&&108===E&&101===R)K=J+K+I+K+K;else if(111===k&&114===E&&100===R)K=J+K+I+"flex-"+K+K;else if(97===k&&108===E&&105===R&&45===K.charCodeAt(5))switch(K.charCodeAt(6)){case 105:y=K.replace("-items",""),K=J+"box-"+y+I+"flex-"+y+K;break;case 115:K=I+"flex-item-"+K.replace("-self","")+K;break;default:K=I+"flex-line-pack"+K.replace("align-content","")+K}else if(99===k&&117===E&&114===R&&null!==/zoo|gra/.exec(K))K=K.replace(/: +/g,": "+J)+K.replace(/: +/g,": "+H)+K;else if(123===P)if(ie++,1===_&&0!==M.length&&(_=0,M=f+" {"+M+"}",u&&(y=i(4,M,ae,se,f,oe.length),null!=y&&(M=y)),oe+=M,M=""),2===ie){ne++,se++,v="";var $e=K.substring(0,K.length-1).split(r.regex.split),je=O.substring(0,O.length-1).split(r.regex.split);for(T=1;ne<ge&&(s=t.charCodeAt(ne),123===s?T++:125===s&&T--,0!==T);)v+=t.charAt(ne++),se=13===s||10===s?(ae++,0):se+1;b=je.length;for(var ve=0;ve<b;ve++){y=je[ve],w=y.indexOf(f),je[ve]="";for(var Ce=0,ye=$e.length;Ce<ye;Ce++)e=w>0?":global()"+y.trim():y.replace(f,"&").trim(),$=$e[Ce].trim(),e=$.indexOf(" &")>0?$.replace("&","").trim()+" "+e:null!==r.regex.global[0].exec($)?$:e+" "+$,je[ve]+=e.replace(/ +&/,"").trim()+(Ce===ye-1?"":",")}void 0===z&&(z=""),z+="\n"+je.join(",").replace(r.regex.global[1]," $1")+" {"+v+"}",U=1,K="",ie--}else if(0!==Y||0!==Q&&2!==d)O=K;else{A=K.split(r.regex.split),m="",O="",b=A.length;for(var ve=0;ve<b;ve++){if(s=(e=A[ve]).charCodeAt(0),32===s&&(s=(e=e.trim()).charCodeAt(0)),38===s)e=f+e.substring(1).replace(r.regex.and,f);else if((w=e.indexOf(" &"))>0&&(Z=2,0!==e.indexOf(":global()")&&(e=":global("+e.substring(0,w)+")"+e.substring(w)),s=58),58===s){var ze=e.charCodeAt(1);if(104===ze&&116===e.charCodeAt(4)){var Ne=e.charCodeAt(5);e=40===Ne?f+e.replace(/:host\((.*)\)/g,"$1").replace(r.regex.and,f):45===Ne?e.replace(/:host-context\((.*)\)/g,"$1 "+f).replace(r.regex.and,f):f+e.substring(5)}else 103===ze?(2!==Z&&(Z=1),e=e.replace(r.regex.global[0],"$1").replace(r.regex.and,f)):e=f+e}else 0===Z&&(e=f+" "+e);u&&(y=i(1.5,ve===b-1?e.substring(0,e.length-1).trim():e,ae,se,f,oe.length),null!=y&&(e=ve===b-1?y+" {":y)),O+=(0!==ve?",":"")+(1!==Z?e:":global()"+e),m+=0!==ve?","+e:e,Z=0}K=m}125===P&&(0!==ie&&ie--,0===ie&&1===U&&(t=t.substring(0,ne+1)+z+t.substring(ne+1),ge+=z.length,z="",U=0,S++),125!==k&&32===K.charCodeAt(K.length-2)&&(K=K.substring(0,K.length-1).trim()+"}")),0!==Q?(125===P?S++:123===P&&0!==S&&S--,1!==ee||123!==P&&0!==S||0===M.length||(ee=0,K=f+" {"+M+"}"+K,M=""),0===S?(0===d?(Y=0,K=""):1===d?(K="}@"+j+"}",j=""):3===d&&(D[G].body=j,G="",K="",j=""),d=0,S--,Q--):1===d||3===d?(j+=K,3===d&&(K="")):2===d&&0===ie&&(125!==P&&(0===ee&&(M=""),M+=K,K=""),ee=1)):0===ie&&125!==P&&(_=1,M=void 0===M?K:M+K,K="")}L+=K,125!==P||0!==d&&2!==d&&4!==d||(s=L.charCodeAt(L.length-2),4===d&&(d=0),void 0!==C&&0!==C.length&&(L=123===s?C:L+C,C="",s=L.charCodeAt(L.length-2)),123!==s&&(u&&(y=i(3,L,ae,se,f,oe.length),null!=y&&(L=y)),void 0!==N?(N+=L,125===N.charCodeAt(N.length-2)&&(oe+=N,N=void 0)):oe+=L),L=""),K=""}ne++}if(void 0!==M&&0!==M.length&&(M=f+" {"+M+"}",u&&(y=i(4,M,ae,se,f,oe.length),null!=y&&(M=y)),oe+=M),n&&void 0!==q)for(var ce=0;ce<B;ce++)oe=oe.replace(new RegExp("var\\("+q[ce][0]+"\\)","g"),q[ce][1]);return u&&(y=i(6,oe,ae,se,f,oe.length),null!=y&&(oe=y)),oe}return r.use=function(e,t){var l=r.plugins,n=l.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var i in t)r.use(i,t[i]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)l[n++]=t[s];else if(null==e)l[n]=t;else{var g=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),o=/[ \t\r\n]*,[ \t\r\n]*/g,c=function(e,r){var l=r.replace(o,",").split(","),n=t.apply(null,l);return null!=n?n:e};l[n]=function(e,r){if(6===e)return r.replace(g,c)}}return r},r.plugins=[],r.regex={and:/&/g,split:/,[\s]*(?![^\r\n\[]*[\]\)])/g,"import":/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g,global:[/:global\((.*)\)/g,/(?:&| | .*):global\((.*)\)/g]},r});