!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function t(e,t,i,r){var s="",n="",o=e.charCodeAt(0)||0;if(91===o){var a=e.substring(1,e.length-1).split("="),l=(n=a[1]).charCodeAt(0);34!==l&&39!==l||(n=n.substring(1,n.length-1)),s="["+a[0]+"='"+n+"']"}else n=35===o||46===o||62===o?(s=e).substring(1):s=e;for(var f=void 0===i||i===!0?n:"",d=void 0===r||r===!0?n:"",c="",h="",b="",g=t.length,u=0,v=0,o=0,A=0,C=1,p=0;u<g;){var w=t.charCodeAt(u);if(123===w||125===w||59===w){h+=t[u];var m=h.charCodeAt(0);32===m&&(m=(h=h.trim()).charCodeAt(0));var k=h.charCodeAt(1)||0;if(47===m&&42===k&&(m=(h=h.substring(h.indexOf("*/")+2)).charCodeAt(0),k=h.charCodeAt(1)||0),64===m)1===C&&(C=0,0!==c.length&&(c=s+" {"+c+"}")),107!==k&&103!==k||(v++,107===k?(b=h.substring(1,11)+f+h.substring(11),h="@-webkit-"+b,o=1):h="");else{var x=h.charCodeAt(2)||0;if(97===m&&110===k&&105===x){for(var y=h.substring(10).split(","),O="animation:",z=0,j=y.length;z<j;z++)O+=(0===z?"":",")+d+y[z].trim();h="-webkit-"+O+O}else if(97===m&&112===k&&112===x)h="-webkit-"+h+"-moz-"+h+h;else if(104===m&&121===k&&112===x||117===m&&115===k&&101===x)h="-webkit-"+h+"-moz-"+h+"-ms-"+h+h;else if(102===m&&108===k&&101===x||111===m&&114===k&&100===x)h="-webkit-"+h+h;else if(116===m&&114===k&&97===x)h="-webkit-"+h+(102===h.charCodeAt(5)?"-ms-"+h:"")+h;else if(100===m&&105===k&&115===x)h.indexOf("flex")>-1&&(h="display:-webkit-flex; display:flex;");else if(123===w&&(1===C&&(C=0,0!==c.length&&(c=s+" {"+c+"}")),0===v)){for(var q=h.split(","),O="",z=0,j=q.length;z<j;z++){var e=q[z],B=e.charCodeAt(0);if(32===B&&(B=(e=e.trim()).charCodeAt(0)),91===B)for(var D=z+1,E=j-z;D<E;D++){var F=(e+=","+q[D]).trim();if(93===F.charCodeAt(F.length-1)){j-=D,q.splice(z,D);break}}if(38===B)e=s+e.substring(1);else if(58===B){var G=e.charCodeAt(1);if(104===G){var H=(e=e.substring(5)).charCodeAt(0);e=40===H?s+e.substring(1).replace(")",""):45===H?e.substring(9,e.indexOf(")"))+" "+s+" {":s+e}else e=103===G?e.substring(8).replace(")",""):s+(58===B?"":" ")+e}else e=s+(58===B?"":" ")+e;O+=0===z?e:","+e}h=O}0!==v&&(125===w?A++:123===w&&0!==A&&A--,2===A?(0===o?h="":(h="}@"+b+"}",b=""),o=0,A=v>1?1:0,v--):1===o&&(b+=h))}c+=h,h="",p=0}else 1!==p||13!==w&&10!==w?9!==w&&13!==w&&10!==w&&(47===w&&0===p&&(p=1),h+=t[u]):h="";u++}return 1===C&&0!==c.length?s+" {"+c+"}":c}return t});