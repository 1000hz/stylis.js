!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,l,i,n){e+="";var s,a,g,o,c,f,h="",d="",u=e.charCodeAt(0);91===u?(g=e.substring(1,e.length-1).split("="),s=(d=g[1]).charCodeAt(0),34!==s&&39!==s||(d=d.substring(1,d.length-1)),h="["+g[0]+'="'+d+'"]'):d=35===u||46===u||62===u?(h=e).substring(1):h=e,u=0,void 0==l||l===!0?(l=!0,o=d):(o="",l=!1);var p=null!=n;p&&(f=(typeof n).charCodeAt(0),111===f?r.use(n,null):102!==f&&(p=!1)),0!==(c=r.plugins).length&&(n=1===c.length?c[0]:function(e,r,t,l){for(var i=r,n=0,s=c.length;n<s;n++)i=c[n](e,i,t,l,h)||i;return i!==r?i:void 0},p=!0);var b,x,v,A,m,C,y,w,O,k,$,j,E,R,z,N,F,q,B="-moz-",D="-ms-",G="-webkit-",H="",I="",J="",K=0,L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0;p&&(C=n(0,t,le,te,h,0),null!=C&&(t=C));for(var ee=0,re=0,te=0,le=1,ie=t.length,ne="";ee<ie;){if(K=t.charCodeAt(ee),0!==V||0!==S||0!==Y||123!==K&&125!==K&&59!==K)if(13===K||10===K)1===_&&(Y=_=0,H=H.substring(0,H.indexOf("//"))),te=0,le++;else{if(9!==K)switch(H+=t.charAt(ee),K){case 34:V=34===V?0:39===V?39:34;break;case 39:V=39===V?0:34===V?34:39;break;case 40:0===V&&(S=1);break;case 41:0===V&&(S=0);break;case 47:0===V&&0===S&&(0===Z&&47===t.charCodeAt(ee-1)?Y=_=1:42===t.charCodeAt(ee-1)&&(Y=Z=0,H=H.substring(0,H.indexOf("/*"))));break;case 42:0===V&&0===S&&0===_&&0===Z&&47===t.charCodeAt(ee-1)&&(Y=Z=1)}te++}else{if(H+=t.charAt(ee),p&&125!==K&&(C=123===K?n(1,H.substring(0,H.length-1).trim(),le,te,h,ne.length):n(2,H,le,te,h,ne.length),null!=C&&(H=123===K?C+" {":C)),O=H.charCodeAt(0),32===O&&(O=(H=H.trim()).charCodeAt(0)),k=H.charCodeAt(1),$=H.charCodeAt(2),64===O){if(1===W&&0!==J.length&&(W=0,J=h+" {"+J+"}",p&&(C=n(4,J,le,te,h,ne.length),null!=C&&(J=C)),ne+=J,J=""),59!==K)if(107===k||103===k)107===k?(E=H.substring(1,11)+(0===T?o:"")+H.substring(11),H="@"+G+E,u=1):(T=1,H="");else if(109===k)if(i===!0&&105===$)void 0===F&&(F={}),E=(q=H.substring(7,H.indexOf("{"))+" ").trim(),q=q.substring(0,q.indexOf(" ")).trim(),F[q]={key:E.trim(),body:""},u=3,H="",E="";else if(101===$)if(0!==re){for(ee++,te++,void 0===m&&(m=""),C="",x="",v=y.split(r.regex.split),P=1;ee<ie&&(s=t.charCodeAt(ee),123===s?P++:125===s&&P--,0!==P);)x+=t.charAt(ee++),te=13===s||10===s?(le++,0):te+1;for(var se=0,ae=v.length;se<ae;se++)e=v[se],C+=r((se===ae-1?e.substring(0,e.length-1):e).trim(),x,l,i,n);m+=H+C+"}",H="",U=1,u=4}else u=2;else u=6;if(105===k){if(i===!0&&110===$)if(H=H.substring(9,H.length-1),w=H.indexOf("("),w!==-1){var ge=H.substring(0,w),oe=F[ge],ce=H.substring(ge.length+1,H.length-1).split(","),fe=oe.key.replace(ge,"").replace(/\(|\)/g,"").trim().split(",");H=oe.body;for(var se=0,ae=ce.length;se<ae;se++){var he=fe[se].trim();void 0!==he&&(H=H.replace(new RegExp("var\\(~~"+he+"\\)","g"),ce[se].trim()))}t+=H,ie+=H.length,H=""}else H=F[H].body,0===re&&(t+=H,ie+=H.length,H="");else if(109===$&&p){var de=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(H);null!==de&&(H=n(5,de[1].replace(/['"; ]/g,""),le,te,h,ne.length)||"",H&&(t=t.substring(0,ee+1)+H+t.substring(ee+1),ie+=H.length),H="")}}else 4!==u&&59!==K&&(107!==k&&103!==k&&109!==k&&(u=5),M=-1,L++)}else if(i===!0&&126===O&&126===k&&59===K&&(b=H.indexOf(":"))!==-1)void 0===N&&(z=[],N=0),z[N++]=[H.substring(0,b),H.substring(b+1,H.length-1).trim()],H="";else{if(97===O&&110===k&&105===$){if(H=H.substring(0,H.length-1),b=H.indexOf(":")+1,A=H.substring(0,b),l===!0&&45!==H.charCodeAt(9))for(var ue=H.substring(b).trim().split(","),pe=0,ae=ue.length;pe<ae;pe++){for(var be=ue[pe],xe=be.split(" "),ve=0,Ae=xe.length;ve<Ae;ve++){var me=xe[ve].trim(),Ce=me.charCodeAt(0),ye=me.charCodeAt(2),we=me.length,Oe=me.charCodeAt(we-1);41===Oe||0===we||105===Ce&&102===ye&&101===Oe&&8===we||108===Ce&&110===ye&&114===Oe&&6===we||97===Ce&&116===ye&&101===Oe&&(9===we||17===we)||110===Ce&&114===ye&&108===Oe&&6===we||98===Ce&&99===ye&&115===Oe&&9===we||102===Ce&&114===ye&&115===Oe&&8===we||98===Ce&&116===ye&&104===Oe&&4===we||110===Ce&&110===ye&&101===Oe&&4===we||114===Ce&&110===ye&&103===Oe&&7===we||112===Ce&&117===ye&&100===Oe&&6===we||114===Ce&&118===ye&&100===Oe&&8===we||115===Ce&&101===ye&&(116===Oe&&10===we||100===Oe&&8===we)||101===Ce&&115===ye&&(101===Oe&&4===we||(11===we||7===we||8===we)&&45===me.charCodeAt(4))||!isNaN(parseFloat(me))||me.indexOf("(")!==-1||(xe[ve]=o+me)}A+=(0===pe?"":",")+xe.join(" ").trim()}else A+=(110!==H.charCodeAt(10)?"":o)+H.substring(b).trim().trim();H=G+A+";"+A+";"}else if(97===O&&112===k&&112===$)H=G+H+B+H+H;else if(100===O&&105===k&&115===$)(w=H.indexOf("flex"))!==-1&&(C=101===H.charCodeAt(w-2)?"inline-":"",H="display: "+G+C+"box;display: "+G+C+"flex;display: "+D+"flexbox;display: "+C+"flex;");else if(116===O&&114===k&&97===$)H=G+H+(102===H.charCodeAt(5)?D+H:"")+H;else if(104===O&&121===k&&112===$||117===O&&115===k&&101===$)H=G+H+B+H+D+H+H;else if(102===O&&108===k&&101===$)H=G+H+D+H+H;else if(111===O&&114===k&&100===$)H=G+H+D+"flex-"+H+H;else if(97===O&&108===k&&105===$&&45===H.charCodeAt(5))switch(H.charCodeAt(6)){case 105:C=H.replace("-items",""),H=G+"box-"+C+D+"flex-"+C+H;break;case 115:H=D+"flex-item-"+H.replace("-self","")+H;break;default:H=D+"flex-line-pack"+H.replace("align-content","")+H}else if(99===O&&117===k&&114===$&&null!==/zoo|gra/.exec(H))H=H.replace(/: +/g,": "+G)+H.replace(/: +/g,": "+B)+H;else if(123===K)if(re++,1===W&&0!==J.length&&(W=0,J=h+" {"+J+"}",p&&(C=n(4,J,le,te,h,ne.length),null!=C&&(J=C)),ne+=J,J=""),2===re){ee++,te++,x="";var ke=H.substring(0,H.length-1).split(r.regex.split),$e=y.substring(0,y.length-1).split(r.regex.split);for(P=1;ee<ie&&(s=t.charCodeAt(ee),123===s?P++:125===s&&P--,0!==P);)x+=t.charAt(ee++),te=13===s||10===s?(le++,0):te+1;for(var pe=0,ae=$e.length;pe<ae;pe++){C=$e[pe],$e[pe]="";for(var ve=0,Ae=ke.length;ve<Ae;ve++)e=C.replace(h,"&").trim(),j=ke[ve].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,$e[pe]+=e.replace(/ +&/,"").trim()+(ve===Ae-1?"":",")}void 0===R&&(R=""),R+="\n"+$e.join(",").replace(r.regex.global[1]," $1")+" {"+x+"}",Q=1,H="",re--}else if(0!==T||0!==L&&2!==u)y=H;else{v=H.split(r.regex.split),A="";for(var pe=0,ae=v.length;pe<ae;pe++){if(a=(e=v[pe]).charCodeAt(0),32===a&&(a=(e=e.trim()).charCodeAt(0)),38===a)e=58===a&&103===e.charCodeAt(2)?e.substring(1).replace(r.regex.global[0],"$1").replace(r.regex.and,h):h+e.substring(1).replace(r.regex.and,h);else if((w=e.indexOf(" &"))>0&&(a=58,e=":global("+e.substring(0,w)+")"+e.substring(w)),58===a){var je=e.charCodeAt(1);if(104===je&&116===e.charCodeAt(4)){var Ee=e.charCodeAt(5);e=40===Ee?h+e.replace(/:host\((.*)\)/g,"$1"):45===Ee?e.replace(/:host-context\((.*)\)/g,"$1 "+h):h+e.substring(5)}else e=103===je?e.replace(r.regex.global[0],"$1").replace(r.regex.and,h):h+e}else e=h+" "+e;p&&(C=n(1.5,pe===ae-1?e.substring(0,e.length-1).trim():e,le,te,h,ne.length),null!=C&&(e=pe===ae-1?C+" {":C)),A+=0===pe?e:","+e}y=H=A}else 125===K&&(0!==re&&re--,0===re&&1===Q&&(t=t.substring(0,ee+1)+R+t.substring(ee+1),ie+=R.length,R="",Q=0,M++));0!==L?(125===K?M++:123===K&&0!==M&&M--,1!==X||123!==K&&0!==M||0===J.length||(X=0,H=h+" {"+J+"}"+H,J=""),0===M?(0===u?(T=0,H=""):1===u?(H="}@"+E+"}",E=""):3===u&&(F[q].body=E,q="",H="",E=""),u=0,M--,L--):1===u||3===u?(E+=H,3===u&&(H="")):2===u&&0===re&&(125!==K&&(0===X&&(J=""),J+=H,H=""),X=1)):0===re&&125!==K&&(W=1,J=void 0===J?H:J+H,H="")}I+=H,H="",125!==K||0!==u&&4!==u||(a=I.charCodeAt(I.length-2),4===u&&(u=0),void 0!==m&&0!==m.length&&(I=123===a?m:I+m,m="",a=0),123!==a&&(p&&(C=n(3,I,le,te,h,ne.length),null!=C&&(I=C)),ne+=I),I="")}ee++}if(void 0!==J&&0!==J.length&&(J=h+" {"+J+"}",p&&(C=n(4,J,le,te,h,ne.length),null!=C&&(J=C)),ne+=J),i&&void 0!==z)for(var se=0;se<N;se++)ne=ne.replace(new RegExp("var\\("+z[se][0]+"\\)","g"),z[se][1]);return p&&(C=n(6,ne,le,te,h,ne.length),null!=C&&(ne=C)),ne}return r.use=function(e,t){var l=r.plugins,i=l.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)l[i++]=t[s];else if(null==e)l[i]=t;else{var g=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),o=/[ \t\r\n]*,[ \t\r\n]*/g,c=function(e,r){var l=r.replace(o,",").split(","),i=t.apply(null,l);return null!=i?i:e};l[i]=function(e,r){if(6===e)return r.replace(g,c)}}return r},r.plugins=[],r.regex={and:/&/g,split:/,[\s]*(?![^\r\n\[]*[\]\)])/g,"import":/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g,global:[/:global\((.*)\)/g,/(?:&| | .*):global\((.*)\)/g]},r});