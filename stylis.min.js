!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,l,n){e+="";var s,a,o,f,g,c,u="",d="",h=e.charCodeAt(0)||0;91===h?(o=e.substring(1,e.length-1).split("="),s=(d=o[1]).charCodeAt(0),34!==s&&39!==s||(d=d.substring(1,d.length-1)),u="["+o[0]+'="'+d+'"]'):d=35===h||46===h||62===h?(u=e).substring(1):u=e,h=0,void 0==i||i===!0?(i=!0,f=d):(f="",i=!1);var b=null!=n;b&&(c=(typeof n).charCodeAt(0),111===c?r.use(n,null):102!==c&&(b=!1)),0!==(g=r.plugins).length&&(n=1===g.length?g[0]:function(e,r,t,i){for(var l=r,n=0,s=g.length;n<s;n++)l=g[n](e,l,t,i,u)||l;return l!==r?l:void 0},b=!0);var p,v,A,x,m,C,y,O,k,w,j,E,R,z,N,F,q,B,D="-moz-",G="-ms-",H="-webkit-",I="",J="",K="",L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=0;b&&(C=n(0,t,ie,te,u),null!=C&&(t=C));for(var ee=0,re=0,te=0,ie=1,le=t.length,ne="";ee<le;){if(L=t.charCodeAt(ee),0!==W||0!==T||0!==Z||123!==L&&125!==L&&59!==L)if(13===L||10===L)1===_&&(Z=_=0,I=I.substring(0,I.indexOf("//"))),te=0,ie++;else{if(9!==L)switch(I+=t.charAt(ee),L){case 34:W=34===W?0:39===W?39:34;break;case 39:W=39===W?0:34===W?34:39;break;case 40:0===W&&(T=1);break;case 41:0===W&&(T=0);break;case 47:0===W&&0===T&&(0===$&&47===t.charCodeAt(ee-1)?Z=_=1:42===t.charCodeAt(ee-1)&&(Z=$=0,I=I.substring(0,I.indexOf("/*"))));break;case 42:0===W&&0===T&&0===_&&0===$&&47===t.charCodeAt(ee-1)&&(Z=$=1)}te++}else{if(I+=t.charAt(ee),k=I.charCodeAt(0),32===k&&(k=(I=I.trim()).charCodeAt(0)),w=I.charCodeAt(1)||0,j=I.charCodeAt(2)||0,b&&125!==L&&(C=123===L?n(1,I.substring(0,I.length-1).trim(),ie,te,u):n(2,I,ie,te,u),null!=C&&(I=123===L?C+" {":C)),64===k){if(1===X&&0!==K.length&&(X=0,K=u+" {"+K+"}",b&&(C=n(4,K,ie,te,u),null!=C&&(K=C)),ne+=K,K=""),59!==L)if(107===w||103===w)107===w?(R=I.substring(1,11)+(0===U?f:"")+I.substring(11),I="@"+H+R,h=1):(U=1,I="");else if(109===w)if(l===!0&&105===j)void 0===q&&(q={}),R=(B=I.substring(7,I.indexOf("{"))+" ").trim(),B=B.substring(0,B.indexOf(" ")).trim(),q[B]={key:R.trim(),body:""},h=3,I="",R="";else if(101===j)if(0!==re){for(ee++,te++,void 0===m&&(m=""),C="",v="",A=y.split(","),Q=1;ee<le&&(s=t.charCodeAt(ee),123===s?Q++:125===s&&Q--,0!==Q);)v+=t.charAt(ee++),te=13===s||10===s?(ie++,0):te+1;for(var se=0,ae=A.length;se<ae;se++)e=A[se],C+=r((se===ae-1?e.substring(0,e.length-1):e).trim(),v,i,l,n);m+=I+C+"}",I="",V=1,h=4}else h=2;else h=6;if(105===w){if(l===!0&&110===j)if(I=I.substring(9,I.length-1),O=I.indexOf("("),O!==-1){var oe=I.substring(0,O),fe=q[oe],ge=I.substring(oe.length+1,I.length-1).split(","),ce=fe.key.replace(oe,"").replace(/\(|\)/g,"").trim().split(",");I=fe.body;for(var se=0,ae=ge.length;se<ae;se++){var ue=ce[se].trim();void 0!==ue&&(I=I.replace(new RegExp("var\\(~~"+ue+"\\)","g"),ge[se].trim()))}t+=I,le+=I.length,I=""}else I=q[I].body,0===re&&(t+=I,le+=I.length,I="");else if(109===j&&b){var de=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(I);null!==de&&(I=n(5,de[1].replace(/['"; ]/g,""),ie,te,u)||"",I&&(t=t.substring(0,ee+1)+I+t.substring(ee+1),le+=I.length),I="")}}else 4!==h&&59!==L&&(107!==w&&103!==w&&109!==w&&(h=5),P=-1,M++)}else if(l===!0&&126===k&&126===w&&59===L&&(p=I.indexOf(":"))!==-1)void 0===F&&(N=[],F=0),N[F++]=[I.substring(0,p),I.substring(p+1,I.length-1).trim()],I="";else{if(97===k&&110===w&&105===j){if(I=I.substring(0,I.length-1),p=I.indexOf(":")+1,x=I.substring(0,p),i===!0&&45!==(I.charCodeAt(9)||0))for(var he=I.substring(p).trim().split(","),be=0,ae=he.length;be<ae;be++){for(var pe=he[be],ve=pe.split(" "),Ae=0,xe=ve.length;Ae<xe;Ae++){var me=ve[Ae].trim(),Ce=me.charCodeAt(0),ye=me.charCodeAt(2),Oe=me.length,ke=me.charCodeAt(Oe-1);41===ke||0===Oe||105===Ce&&102===ye&&101===ke&&8===Oe||108===Ce&&110===ye&&114===ke&&6===Oe||97===Ce&&116===ye&&101===ke&&(9===Oe||17===Oe)||110===Ce&&114===ye&&108===ke&&6===Oe||98===Ce&&99===ye&&115===ke&&9===Oe||102===Ce&&114===ye&&115===ke&&8===Oe||98===Ce&&116===ye&&104===ke&&4===Oe||110===Ce&&110===ye&&101===ke&&4===Oe||114===Ce&&110===ye&&103===ke&&7===Oe||112===Ce&&117===ye&&100===ke&&6===Oe||114===Ce&&118===ye&&100===ke&&8===Oe||115===Ce&&101===ye&&(116===ke&&10===Oe||100===ke&&8===Oe)||101===Ce&&115===ye&&(101===ke&&4===Oe||(11===Oe||7===Oe||8===Oe)&&45===me.charCodeAt(4))||!isNaN(parseFloat(me))||me.indexOf("(")!==-1||(ve[Ae]=f+me)}x+=(0===be?"":",")+ve.join(" ").trim()}else x+=(110!==(I.charCodeAt(10)||0)?"":f)+I.substring(p).trim().trim();I=H+x+";"+x+";"}else if(97===k&&112===w&&112===j)I=H+I+D+I+I;else if(100===k&&105===w&&115===j)(O=I.indexOf("flex"))!==-1&&(C=101===I.charCodeAt(O-2)?"inline-":"",I="display: "+H+C+"box;display: "+H+C+"flex;display: "+G+"flexbox;display: "+C+"flex;");else if(116===k&&114===w&&97===j)I=H+I+(102===I.charCodeAt(5)?G+I:"")+I;else if(104===k&&121===w&&112===j||117===k&&115===w&&101===j)I=H+I+D+I+G+I+I;else if(102===k&&108===w&&101===j)I=H+I+G+I+I;else if(111===k&&114===w&&100===j)I=H+I+G+"flex-"+I+I;else if(97===k&&108===w&&105===j&&45===(I.charCodeAt(5)||0))switch(I.charCodeAt(6)||0){case 105:C=I.replace("-items",""),I=H+"box-"+C+G+"flex-"+C+I;break;case 115:I=G+"flex-item-"+I.replace("-self","")+I;break;default:I=G+"flex-line-pack"+I.replace("align-content","")+I}else if(99===k&&117===w&&114===j&&null!==/zoo|gra/.exec(I))I=I.replace(/: +/g,": "+H)+I.replace(/: +/g,": "+D)+I;else if(123===L)if(re++,1===X&&0!==K.length&&(X=0,K=u+" {"+K+"}",b&&(C=n(4,K,ie,te,u),null!=C&&(K=C)),ne+=K,K=""),2===re){ee++,te++,v="";var we=I.substring(0,I.length-1).split(","),je=y.substring(0,y.length-1).split(",");for(Q=1;ee<le&&(s=t.charCodeAt(ee),123===s?Q++:125===s&&Q--,0!==Q);)v+=t.charAt(ee++),te=13===s||10===s?(ie++,0):te+1;for(var be=0,ae=je.length;be<ae;be++){C=je[be],je[be]="";for(var Ae=0,xe=we.length;Ae<xe;Ae++)e=C.replace(u,"&").trim(),E=we[Ae].trim(),e=E.indexOf(" &")>0?E.replace("&","").trim()+" "+e:e+" "+E,je[be]+=e.replace(/ +&/,"").trim()+(Ae===xe-1?"":",")}void 0===z&&(z=""),z+="\n"+je.join(",")+" {"+v+"}",S=1,I="",re--}else if(0!==U||0!==M&&2!==h)y=I;else{A=I.split(","),x="";for(var be=0,ae=A.length;be<ae;be++){var Ee=(e=A[be]).charCodeAt(0);if(32===Ee&&(Ee=(e=e.trim()).charCodeAt(0)),91===Ee&&e.indexOf("]")===-1)for(var Ae=be+1,xe=ae;Ae<xe;Ae++){var Re=(e+=","+A[Ae]).trim();if(Re.indexOf("]")!==-1){ae-=Ae,A.splice(be,Ae);break}}if(38===Ee)e=38===e.charCodeAt(1)?e.replace(/&/g,u):u+e.substring(1);else if((O=e.indexOf(" &"))>0&&(Ee=58,e=":global("+e.substring(0,O)+")"+e.substring(O)),58===Ee){var ze=e.charCodeAt(1);if(104===ze&&116===e.charCodeAt(4)){var Ne=(e=e.substring(5)).charCodeAt(0);40===Ne?e=u+e.substring(1).replace(")",""):45===Ne?(O=e.indexOf(")"),e=e.substring(9,O)+" "+u+e.substring(O+1)):e=u+e}else e=103===ze?e.substring(8).replace(")","").replace("&",u):u+e}else e=u+" "+e;b&&(C=n(1.5,be===ae-1?e.substring(0,e.length-1).trim():e,ie,te,u),null!=C&&(e=be===ae-1?C+" {":C)),x+=0===be?e:","+e}y=I=x}else 125===L&&(0!==re&&re--,0===re&&1===S&&(t=t.substring(0,ee+1)+z+t.substring(ee+1),le+=z.length,z="",S=0,P++));0!==M?(125===L?P++:123===L&&0!==P&&P--,1!==Y||123!==L&&0!==P||0===K.length||(Y=0,I=u+" {"+K+"}"+I,K=""),0===P?(0===h?(U=0,I=""):1===h?(I="}@"+R+"}",R=""):3===h&&(q[B].body=R,B="",I="",R=""),h=0,P--,M--):1===h||3===h?(R+=I,3===h&&(I="")):2===h&&0===re&&(125!==L&&(0===Y&&(K=""),K+=I,I=""),Y=1)):0===re&&125!==L&&(X=1,K=void 0===K?I:K+I,I="")}J+=I,I="",125!==L||0!==h&&4!==h||(a=J.charCodeAt(J.length-2),4===h&&(h=0),void 0!==m&&0!==m.length&&(J=123===a?m:J+m,m="",a=0),123!==a&&(b&&(C=n(3,J,ie,te,u),null!=C&&(J=C)),ne+=J),J="")}ee++}if(void 0!==K&&0!==K.length&&(K=u+" {"+K+"}",b&&(C=n(4,K,ie,te,u),null!=C&&(K=C)),ne+=K),l&&void 0!==N)for(var se=0;se<F;se++)ne=ne.replace(new RegExp("var\\("+N[se][0]+"\\)","g"),N[se][1]);return b&&(C=n(6,ne,ie,te,u),null!=C&&(ne=C)),ne}return r.use=function(e,t){var i=r.plugins,l=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var n in t)r.use(n,t[n]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)i[l++]=t[s];else if(null==e)i[l]=t;else{var o=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[l]=function(e,r,i,l){if(6===e)return r=r.replace(o,function(e,r){var i=r.replace(f,",").split(","),l=t.apply(null,i);return null!=l?l:e})}}return r},r.plugins=[],r});