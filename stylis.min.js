!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,n,l){e+="";var s,a,f,o,g,c="",u="",d=e.charCodeAt(0)||0;91===d?(a=e.substring(1,e.length-1).split("="),s=(u=a[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),c="["+a[0]+'="'+u+'"]'):u=35===d||46===d||62===d?(c=e).substring(1):c=e,d=0,void 0==i||i===!0?(i=!0,f=u):(f="",i=!1);var h=null!=l;h&&(g=(typeof l).charCodeAt(0),111===g?r.use(l,null):102!==g&&(h=!1)),0!==(o=r.plugins).length&&(l=function(e,r,t,i){for(var n=r,l=0,s=o.length;l<s;l++)n=o[l](e,n,t,i)||n;return n!==r?n:void 0},h=!0);var b,p,v,A,x,m,C,y,O,k,w,j,E,R,N,z=0,F=0,q="-moz-",B="-ms-",D="-webkit-",G="",H="",I="",J="",K="",L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0;h&&(m=l(0,t,_,$),null!=m&&(t=m));for(var Y=0,Z=0,$=0,_=1,ee=t.length,re="";Y<ee;){if(L=t.charCodeAt(Y),0!==S||0!==U||0!==V||123!==L&&125!==L&&59!==L){if(13===L||10===L)1===X&&(V=X=0,G=G.substring(0,G.indexOf("//"))),$=0,_++;else if(9!==L)switch(G+=t.charAt(Y),L){case 34:S=34===S?0:39===S?39:34;break;case 39:S=39===S?0:34===S?34:39;break;case 40:0===S&&(U=1);break;case 41:0===S&&(U=0);break;case 47:0===S&&0===U&&(0===W&&47===t.charCodeAt(Y-1)?V=X=1:42===t.charCodeAt(Y-1)&&(V=W=0,G=G.substring(0,G.indexOf("/*"))));break;case 42:0===S&&0===U&&0===X&&0===W&&47===t.charCodeAt(Y-1)&&(V=W=1)}}else{if(G+=t.charAt(Y),O=G.charCodeAt(0),32===O&&(O=(G=G.trim()).charCodeAt(0)),k=G.charCodeAt(1)||0,w=G.charCodeAt(2)||0,h&&125!==L&&(m=123===L?l(1,G.substring(0,G.length-1).trim(),_,$):l(2,G,_,$),null!=m&&(G=123===L?m+"{":m)),64===O){if(1===z&&0!==K.length&&(z=0,K=c+" {"+K+"}",h&&(m=l(4,K,_,$),null!=m&&(K=m)),re+=K,K=""),107===k||103===k)107===k?(H=G.substring(1,11)+f+G.substring(11),G="@"+D+H,d=1):G="";else if(109===k)if(n===!0&&105===w)void 0===R&&(R={}),H=(N=G.substring(7,G.indexOf("{"))+" ").trim(),N=N.substring(0,N.indexOf(" ")).trim(),R[N]={key:H.trim(),body:""},d=3,G="",H="";else if(101===w)if(0!==Z){for(Y++,x="",p="",v=C.split(","),Q=1;Y<ee&&(s=t.charCodeAt(Y),123===s?Q++:125===s&&Q--,0!==Q);)p+=t.charAt(Y++);for(var te=0,ie=v.length;te<ie;te++)e=v[te],x+=r((te===ie-1?e.substring(0,e.length-1):e).trim(),p,i,n,l);x=G+x+"}",G="",d=4}else d=2;else d=6;if(105===k){if(n===!0&&110===w)if(G=G.substring(9,G.length-1),y=G.indexOf("("),y!==-1){var ne=G.substring(0,y),le=R[ne],se=G.substring(ne.length+1,G.length-1).split(","),ae=le.key.replace(ne,"").replace(/\(|\)/g,"").trim().split(",");G=le.body;for(var te=0,ie=se.length;te<ie;te++){var fe=ae[te].trim();void 0!==fe&&(G=G.replace(new RegExp("var\\(~~"+fe+"\\)","g"),se[te].trim()))}t+=G,ee+=G.length,G=""}else G=R[G].body,0===Z&&(t+=G,ee+=G.length,G="");else if(109===w&&h){var oe=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(G);null!==oe&&(G=l(5,oe[1].replace(/['"; ]/g,""),_,$)||"",G&&(t=t.substring(0,Y+1)+G+t.substring(Y+1),ee+=G.length),G="")}}else 4!==d&&(P=-1,M++)}else if(n===!0&&59===L&&126===O&&126===k&&(b=G.indexOf(":"))!==-1)void 0===E&&(E=[]),E[E.length]=[G.substring(0,b),G.substring(b+1,G.length-1).trim()],G="";else{if(97===O&&110===k&&105===w){G=G.substring(0,G.length-1),b=G.indexOf(":")+1,A=G.substring(0,b);var ge=G.substring(b).trim().split(",");if(i===!0&&45!==(G.charCodeAt(9)||0))for(var ce=0,ie=ge.length;ce<ie;ce++){for(var ue=ge[ce],de=ue.split(" "),he=0,be=de.length;he<be;he++){var pe=de[he].trim(),ve=pe.charCodeAt(0),Ae=pe.charCodeAt(2),xe=pe.length,me=pe.charCodeAt(xe-1);41===me||0===xe||105===ve&&102===Ae&&101===me&&8===xe||108===ve&&110===Ae&&114===me&&6===xe||97===ve&&116===Ae&&101===me&&(9===xe||17===xe)||110===ve&&114===Ae&&108===me&&6===xe||98===ve&&99===Ae&&115===me&&9===xe||102===ve&&114===Ae&&115===me&&8===xe||98===ve&&116===Ae&&104===me&&4===xe||110===ve&&110===Ae&&101===me&&4===xe||114===ve&&110===Ae&&103===me&&7===xe||112===ve&&117===Ae&&100===me&&6===xe||114===ve&&118===Ae&&100===me&&8===xe||115===ve&&101===Ae&&(116===me&&10===xe||100===me&&8===xe)||101===ve&&115===Ae&&(101===me&&4===xe||(11===xe||7===xe||8===xe)&&45===pe.charCodeAt(4))||!isNaN(parseFloat(pe))||pe.indexOf("(")!==-1||(de[he]=f+pe)}A+=(0===ce?"":",")+de.join(" ").trim()}else A+=(110!==(G.charCodeAt(10)||0)?"":f)+ge[0].trim();G=D+A+";"+A+";"}else if(97===O&&112===k&&112===w)G=D+G+q+G+G;else if(100===O&&105===k&&115===w)(y=G.indexOf("flex"))!==-1&&(m=101===G.charCodeAt(y-2)?"inline-":"",G="display: "+D+m+"box;display: "+D+m+"flex;display: "+B+"flexbox;display: "+m+"flex;");else if(116===O&&114===k&&97===w)G=D+G+(102===G.charCodeAt(5)?B+G:"")+G;else if(104===O&&121===k&&112===w||117===O&&115===k&&101===w)G=D+G+q+G+B+G+G;else if(102===O&&108===k&&101===w)G=D+G+B+G+G;else if(111===O&&114===k&&100===w)G=D+G+B+"flex-"+G+G;else if(97===O&&108===k&&105===w&&45===(G.charCodeAt(5)||0))switch(G.charCodeAt(6)||0){case 105:m=G.replace("-items",""),G=D+"box-"+m+B+"flex-"+m+G;break;case 115:G=B+"flex-item-"+G.replace("-self","")+G;break;default:G=B+"flex-line-pack"+G.replace("align-content","")+G}else if(123===L){if(Z++,1===z&&0!==K.length&&(z=0,K=c+" {"+K+"}",h&&(m=l(4,K,_,$),null!=m&&(K=m)),re+=K,K=""),0===M||2===d)if(2===Z){Y++,p="";var Ce=G.substring(0,G.length-1).split(","),ye=C.substring(0,C.length-1).split(",");for(Q=1;Y<ee&&(s=t.charCodeAt(Y),123===s?Q++:125===s&&Q--,0!==Q);)p+=t.charAt(Y++);for(var ce=0,ie=ye.length;ce<ie;ce++){m=ye[ce],ye[ce]="";for(var he=0,be=Ce.length;he<be;he++)e=m.replace(c,"&").trim(),j=Ce[he].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,ye[ce]+=e.trim()+(he===be-1?"":",")}G="\n"+ye.join(",")+" {"+p+"}",J+=G.replace(/ +&/g,""),T=1,G="",Z--}else{v=G.split(","),A="";for(var ce=0,ie=v.length;ce<ie;ce++){var Oe=(e=v[ce]).charCodeAt(0);if(32===Oe&&(Oe=(e=e.trim()).charCodeAt(0)),91===Oe&&e.indexOf("]")===-1)for(var he=ce+1,be=ie;he<be;he++){var ke=(e+=","+v[he]).trim();if(ke.indexOf("]")!==-1){ie-=he,v.splice(ce,he);break}}if(38===Oe)e=c+e.substring(1);else if((y=e.indexOf(" &"))>0&&(Oe=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===Oe){var we=e.charCodeAt(1);if(104===we&&116===e.charCodeAt(4)){var je=(e=e.substring(5)).charCodeAt(0);40===je?e=c+e.substring(1).replace(")",""):45===je?(y=e.indexOf(")"),e=e.substring(9,y)+" "+c+e.substring(y+1)):e=c+e}else e=103===we?e.substring(8).replace(")","").replace("&",c):c+e}else e=c+" "+e;A+=0===ce?e:","+e}C=G=A}}else 125===L&&(0!==Z&&Z--,0===Z&&1===T&&(t=t.substring(0,Y+1)+J+t.substring(Y+1),ee+=J.length,J="",T=0,P++));0!==M?(125===L?P++:123===L&&0!==P&&P--,1!==F||123!==L&&0!==P||0===K.length||(F=0,G=c+" {"+K+"}"+G,K=""),0===P?(0===d?G="":1===d?(G="}@"+H+"}",H=""):3===d&&(R[N].body=H,N="",G="",H=""),d=0,P--,M--):1===d||3===d?(H+=G,3===d&&(G="")):2===d&&0===Z&&(125!==L&&(0===F&&(K=""),K+=G,G=""),F=1)):0===Z&&125!==L&&(z=1,K=void 0===K?G:K+G,G="")}I+=G,G="",125!==L||0!==d&&4!==d||(123!==I.charCodeAt(I.length-2)&&(h&&0!==I.length&&(m=l(3,I,_,$),null!=m&&(I=m)),re+=I.trim()),4===d&&(h&&(m=l(3,x,_,$),null!=m&&(x=m)),d=0,re+=x),I="")}Y++,$++}if(void 0!==K&&0!==K.length&&(K=c+" {"+K+"}",h&&(m=l(4,K,_,$),null!=m&&(K=m)),re+=K),n&&void 0!==E)for(var te=0,ie=E.length;te<ie;te++)re=re.replace(new RegExp("var\\("+E[te][0]+"\\)","g"),E[te][1]);return h&&(m=l(6,re,_,$),null!=m&&(re=m)),re}return r.use=function(e,t){var i=r.plugins,n=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var l in t)r.use(l,t[l]);else if(t.constructor===Array)for(var s=0,n=t.length;s<n;s++)i[n++]=t[s];else if(null==e)i[n]=t;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[n]=function(e,r,i,n){if(6===e)return r=r.replace(a,function(e,r){var i=r.replace(f,",").split(","),n=t.apply(null,i);return null!=n?n:e})}}return r},r.plugins=[],r});