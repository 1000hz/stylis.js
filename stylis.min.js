!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,n,l){e+="";var s,a,f,o,g,c="",u="",h=e.charCodeAt(0)||0;91===h?(a=e.substring(1,e.length-1).split("="),s=(u=a[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),c="["+a[0]+'="'+u+'"]'):u=35===h||46===h||62===h?(c=e).substring(1):c=e,h=0,void 0==i||i===!0?(i=!0,f=u):(f="",i=!1);var d=null!=l;d&&(g=(typeof l).charCodeAt(0),111===g?r.use(l,null):102!==g&&(d=!1)),0!==(o=r.plugins).length&&(l=function(e,r,t,i){for(var n=r,l=0,s=o.length;l<s;l++)n=o[l](e,n,t,i)||n;return n!==r?n:void 0},d=!0);var b,p,v,A,x,m,C,y,O,w,k,j,E,R,N="",z="",F="",q="",B="",D=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,P=0,Q=0,S=0,T="-moz-",U="-ms-",V="-webkit-";d&&(m=l(0,t,Z,Y),null!=m&&(t=m));for(var W=0,X=0,Y=0,Z=1,$=t.length,_="";W<$;){if(D=t.charCodeAt(W),0!==L||0!==P||123!==D&&125!==D&&59!==D){if(13===D||10===D)2===J&&(N=42===N.charCodeAt(N.length-2)?N.substring(0,N.indexOf("/*")).trim():47!==N.charCodeAt(0)&&(y=N.indexOf("//"))!==-1?N.substring(0,y).trim():"",K=0,J=0),Y=0,Z++;else if(9!==D){switch(D){case 34:L=34===L?0:39===L?39:34;break;case 39:L=39===L?0:34===L?34:39;break;case 40:0===L&&(P=1);break;case 41:0===L&&(P=0);break;case 47:0===L&&1!==P&&J<2&&(0!==K&&42!==t.charCodeAt(W-1)||J++,0===K&&42===t.charCodeAt(W+1)&&(K=1))}N+=t.charAt(W)}}else{if(N+=t.charAt(W),O=N.charCodeAt(0),32===O&&(O=(N=N.trim()).charCodeAt(0)),w=N.charCodeAt(1)||0,k=N.charCodeAt(2)||0,d&&125!==D&&(m=123===D?l(1,N.substring(0,N.length-1).trim(),Z,Y):l(2,N,Z,Y),null!=m&&(N=123===D?m+"{":m)),2===J)125===D&&(J=0),N="";else if(64===O){if(1===Q&&0!==B.length&&(Q=0,B=c+" {"+B+"}",d&&(m=l(4,B,Z,Y),null!=m&&(B=m)),_+=B,B=""),107===w||103===w)107===w?(z=N.substring(1,11)+f+N.substring(11),N="@"+V+z,h=1):N="";else if(109===w)if(n===!0&&105===k)void 0===E&&(E={}),z=(R=N.substring(7,N.indexOf("{"))+" ").trim(),R=R.substring(0,R.indexOf(" ")).trim(),E[R]={key:z.trim(),body:""},h=3,N="",z="";else if(101===k)if(0!==X){for(W++,x="",p="",v=C.split(","),I=1;W<$&&(s=t.charCodeAt(W),123===s?I++:125===s&&I--,0!==I);)p+=t.charAt(W++);for(var ee=0,re=v.length;ee<re;ee++)e=v[ee],x+=r((ee===re-1?e.substring(0,e.length-1):e).trim(),p,i,n,l);x=N+x+"}",N="",h=4}else h=2;else h=6;if(105===w){if(n===!0&&110===k)if(N=N.substring(9,N.length-1),y=N.indexOf("("),y!==-1){var te=N.substring(0,y),ie=E[te],ne=N.substring(te.length+1,N.length-1).split(","),le=ie.key.replace(te,"").replace(/\(|\)/g,"").trim().split(",");N=ie.body;for(var ee=0,re=ne.length;ee<re;ee++){var se=le[ee].trim();void 0!==se&&(N=N.replace(new RegExp("var\\(~~"+se+"\\)","g"),ne[ee].trim()))}t+=N,$+=N.length,N=""}else N=E[N].body,0===X&&(t+=N,$+=N.length,N="");else if(109===k&&d){var ae=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(N);null!==ae&&(N=l(5,ae[1].replace(/['"; ]/g,""),Z,Y)||"",N&&(t=t.substring(0,W+1)+N+t.substring(W+1),$+=N.length),N="")}}else 4!==h&&(H=-1,G++)}else if(n===!0&&59===D&&126===O&&126===w)b=N.indexOf(":"),void 0===j&&(j=[]),j[j.length]=[N.substring(0,b),N.substring(b+1,N.length-1).trim()],N="";else{if(97===O&&110===w&&105===k){N=N.substring(0,N.length-1),b=N.indexOf(":")+1,A=N.substring(0,b);var fe=N.substring(b).trim().split(",");if(i===!0&&45!==(N.charCodeAt(9)||0))for(var oe=0,re=fe.length;oe<re;oe++){for(var ge=fe[oe],ce=ge.split(" "),ue=0,he=ce.length;ue<he;ue++){var de=ce[ue].trim(),be=de.charCodeAt(0),pe=de.charCodeAt(2),ve=de.length,Ae=de.charCodeAt(ve-1);41===Ae||0===ve||105===be&&102===pe&&101===Ae&&8===ve||108===be&&110===pe&&114===Ae&&6===ve||97===be&&116===pe&&101===Ae&&(9===ve||17===ve)||110===be&&114===pe&&108===Ae&&6===ve||98===be&&99===pe&&115===Ae&&9===ve||102===be&&114===pe&&115===Ae&&8===ve||98===be&&116===pe&&104===Ae&&4===ve||110===be&&110===pe&&101===Ae&&4===ve||114===be&&110===pe&&103===Ae&&7===ve||112===be&&117===pe&&100===Ae&&6===ve||114===be&&118===pe&&100===Ae&&8===ve||115===be&&101===pe&&(116===Ae&&10===ve||100===Ae&&8===ve)||101===be&&115===pe&&(101===Ae&&4===ve||(11===ve||7===ve||8===ve)&&45===de.charCodeAt(4))||!isNaN(parseFloat(de))||de.indexOf("(")!==-1||(ce[ue]=f+de)}A+=(0===oe?"":",")+ce.join(" ").trim()}else A+=(110!==(N.charCodeAt(10)||0)?"":f)+fe[0].trim();N=V+A+";"+A+";"}else if(97===O&&112===w&&112===k)N=V+N+T+N+N;else if(100===O&&105===w&&115===k)(y=N.indexOf("flex"))!==-1&&(m=101===N.charCodeAt(y-2)?"inline-":"",N="display:"+V+m+"box;display:"+V+m+"flex;"+U+"flexbox;display:"+m+"flex;");else if(116===O&&114===w&&97===k)N=V+N+(102===N.charCodeAt(5)?U+N:"")+N;else if(104===O&&121===w&&112===k||117===O&&115===w&&101===k)N=V+N+T+N+U+N+N;else if(102===O&&108===w&&101===k)N=V+N+U+N+N;else if(111===O&&114===w&&100===k)N=V+N+U+"flex-"+N+N;else if(97===O&&108===w&&105===k&&45===(N.charCodeAt(5)||0))switch(N.charCodeAt(6)||0){case 105:m=N.replace("-items",""),N=V+"box-"+m+U+"flex-"+m+N;break;case 115:N=U+"flex-item-"+N.replace("-self","")+N;break;default:N=U+"flex-line-pack"+N.replace("align-content","")+N}else if(123===D){if(X++,1===Q&&0!==B.length&&(Q=0,B=c+" {"+B+"}",d&&(m=l(4,B,Z,Y),null!=m&&(B=m)),_+=B,B=""),0===G||2===h)if(2===X){W++,p="";var xe=N.substring(0,N.length-1).split(","),me=C.substring(0,C.length-1).split(",");for(I=1;W<$&&(s=t.charCodeAt(W),123===s?I++:125===s&&I--,0!==I);)p+=t.charAt(W++);for(var oe=0,re=me.length;oe<re;oe++){m=me[oe],me[oe]="";for(var ue=0,he=xe.length;ue<he;ue++)e=m.replace(c,"&").trim(),e=xe[ue].indexOf(" &")>0?xe[ue].replace("&","").trim()+" "+e:e+" "+xe[ue].trim(),me[oe]+=e.trim()+(ue===he-1?"":",")}N="\n"+me.join(",")+" {"+p+"}",q+=N.replace(/ +&/g,""),M=1,N="",X--}else{v=N.split(","),A="";for(var oe=0,re=v.length;oe<re;oe++){var Ce=(e=v[oe]).charCodeAt(0);if(32===Ce&&(Ce=(e=e.trim()).charCodeAt(0)),91===Ce&&e.indexOf("]")===-1)for(var ue=oe+1,he=re;ue<he;ue++){var ye=(e+=","+v[ue]).trim();if(ye.indexOf("]")!==-1){re-=ue,v.splice(oe,ue);break}}if(38===Ce)e=c+e.substring(1);else if((y=e.indexOf(" &"))>0&&(Ce=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===Ce){var Oe=e.charCodeAt(1);if(104===Oe&&116===e.charCodeAt(4)){var we=(e=e.substring(5)).charCodeAt(0);40===we?e=c+e.substring(1).replace(")",""):45===we?(y=e.indexOf(")"),e=e.substring(9,y)+" "+c+e.substring(y+1)):e=c+e}else e=103===Oe?e.substring(8).replace(")","").replace("&",c):c+e}else e=c+" "+e;A+=0===oe?e:","+e}C=N=A}}else 125===D&&(0!==X&&X--,0===X&&1===M&&(t=t.substring(0,W+1)+q+t.substring(W+1),$+=q.length,q="",M=0,H++));0!==G?(125===D?H++:123===D&&0!==H&&H--,1!==S||123!==D&&0!==H||0===B.length||(S=0,N=c+" {"+B+"}"+N,B=""),0===H?(0===h?N="":1===h?(N="}@"+z+"}",z=""):3===h&&(E[R].body=z,R="",N="",z=""),h=0,H--,G--):1===h||3===h?(z+=N,3===h&&(N="")):2===h&&0===X&&(125!==D&&(0===S&&(B=""),B+=N,N=""),S=1)):0===X&&125!==D&&(Q=1,B=void 0===B?N:B+N,N="")}F+=N,N="",125!==D||0!==J||0!==h&&4!==h||(123!==F.charCodeAt(F.length-2)&&(d&&0!==F.length&&(m=l(3,F,Z,Y),null!=m&&(F=m)),_+=F.trim()),4===h&&(d&&(m=l(3,x,Z,Y),null!=m&&(x=m)),h=0,_+=x),F="")}W++,Y++}if(void 0!==B&&0!==B.length&&(B=c+" {"+B+"}",d&&(m=l(4,B,Z,Y),null!=m&&(B=m)),_+=B),n&&void 0!==j)for(var ee=0,re=j.length;ee<re;ee++)_=_.replace(new RegExp("var\\("+j[ee][0]+"\\)","g"),j[ee][1]);return d&&(m=l(6,_,Z,Y),null!=m&&(_=m)),_}return r.use=function(e,t){var i=r.plugins,n=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var l in t)r.use(l,t[l]);else if(t.constructor===Array)for(var s=0,n=t.length;s<n;s++)i[n++]=t[s];else if(null==e)i[n]=t;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),f=/[ \t\r\n]*,[ \t\r\n]*/g;i[n]=function(e,r,i,n){if(6===e)return r=r.replace(a,function(e,r){var i=r.replace(f,",").split(","),n=t.apply(null,i);return null!=n?n:e})}}return r},r.plugins=[],r});