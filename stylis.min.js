!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(global);else if("function"==typeof define&&define.amd)define(e(window));else window.stylis=e(window)}(function(e){"use strict";function i(e,g,h,d,u){e+="";var p,b,A,C,m,x="",v="",k=e.charCodeAt(0);if(91===k){if(A=e.substring(1,e.length-1).split("="),p=(v=A[1]).charCodeAt(0),34===p||39===p)v=v.substring(1,v.length-1);x="["+A[0]+'="'+v+'"]'}else if(35===k||46===k||62===k)v=(x=e).substring(1);else v=x=e;if(k=0,void 0==h||true===h)h=true,C=v;else C="",h=false;var w=null!=u,O=t.length;if(w)if(m=(typeof u).charCodeAt(0),111===m)l(u,null);else if(102===m)t[O++]=u;else w=false;if(0!==O)u=1===O?t[0]:function(e,i,l,f,r,s){for(var n=i,a=0,o=t.length;a<o;a++)n=t[a](e,n,l,f,r,s)||n;if(n!==i)return n},w=true;var y,$,j,z,N,E,F,R,q,B,D,G,H,I,J,K,L,M="",P="",Q="",S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,ee=0,ie=0,le=0,te=0,fe=0,re=0,se=0;if(w){if(E=u(0,g,ce,oe,x,0),null!=E)g=E;K=""}for(var ne=0,ae=0,oe=0,ce=1,ge=g.length,he="";ne<ge;){if(S=g.charCodeAt(ne),0===Z&&0===X&&0===fe&&(123===S||125===S||59===S||ne===ge-1&&0!==M.length)){if(M+=g.charAt(ne),w&&125!==S)if(w){if(123===S)E=u(1,M.substring(0,M.length-1).trim(),ce,oe,x,he.length);else E=u(2,M,ce,oe,x,he.length);if(null!=E)M=123===S?E+" {":E}if(q=M.charCodeAt(0),32===q)q=(M=M.trim()).charCodeAt(0);if(B=M.charCodeAt(1),D=M.charCodeAt(2),64===q){if(1===le&&0!==Q.length){if(le=0,Q=x+" {"+Q+"}",w)if(E=u(4,Q,ce,oe,x,he.length),null!=E)Q=E;he+=Q,Q=""}if(59!==S)if(107===B)H=M.substring(1,11)+C+M.substring(11),M="@"+c+H,k=1;else if(109===B&&101===D||103===B)if(0!==ae){if(ne++,oe++,void 0===N)N="";for(E="",$="",j=F.split(r),V=1;ne<ge;){if(p=g.charCodeAt(ne),123===p)V++;else if(125===p)V--;if(0===V)break;$+=g.charAt(ne++),oe=13===p||10===p?(ce++,0):oe+1}O=j.length;for(var de=0;de<O;de++)e=j[de],E+=i((de===O-1?e.substring(0,e.length-1):e).trim(),$,h,d,u);N+=M+E+"}",M="",Y=1,k=4}else k=2,J=M,M="";else k=6;if(4!==k&&59!==S&&105!==B){if(107!==B&&109!==B&&103!==B)k=5;U=-1,T++}}else{if(123===S){if(ae++,1===le&&0!==Q.length){if(le=0,Q=x+" {"+Q+"}",w)if(E=u(4,Q,ce,oe,x,he.length),null!=E)Q=E;he+=Q,Q=""}if(2===ae){ne++,oe++,$="";var ue=M.substring(0,M.length-1).split(r),pe=F.substring(0,F.length-1).split(r);for(V=1;ne<ge;){if(p=g.charCodeAt(ne),123===p)V++;else if(125===p)V--;if(0===V)break;$+=g.charAt(ne++),oe=13===p||10===p?(ce++,0):oe+1}O=pe.length;for(var be=0;be<O;be++){E=pe[be],R=E.indexOf(x),pe[be]="";for(var Ae=0,Ce=ue.length;Ae<Ce;Ae++){if(R>0)e=":global()"+E.trim();else e=E.replace(x,"&").trim();if(G=ue[Ae].trim(),G.indexOf(" &")>0)e=G.replace("&","").trim()+" "+e;else if(null!==s.exec(G))e=G;else e=e+" "+G;pe[be]+=e.replace(/ +&/,"").trim()+(Ae===Ce-1?"":",")}}if(void 0===I)I="";I+="\n"+pe.join(",").replace(n," $1")+" {"+$+"}",W=1,M="",ae--}else if(0===T||2===k){j=M.split(r),z="",F="",O=j.length;for(var be=0;be<O;be++){if(p=(e=j[be]).charCodeAt(0),32===p)p=(e=e.trim()).charCodeAt(0);if(38===p)e=x+e.substring(1).replace(f,x);else{if(e.indexOf("::place")!==-1)ee=1;if((R=e.indexOf(" &"))>0)e=e.replace(f,x).trim();else if(58===p){var me=e.charCodeAt(1);if(d&&104===me&&116===e.charCodeAt(4)){var me=e.charCodeAt(5);if(40===me)e=x+e.replace(/:host\((.*)\)/g,"$1").replace(f,x);else if(45===me)e=e.replace(/:host-context\((.*)\)/g,"$1 "+x).replace(f,x);else e=x+e.substring(5)}else if(d&&103===me)_=1,e=e.replace(s,"$1").replace(f,x).trim();else e=x+e}else if(0===_)e=x+" "+e}if(w)if(E=u(1.5,be===O-1?e.substring(0,e.length-1).trim():e,ce,oe,x,he.length),null!=E)e=be===O-1?E+" {":E;F+=(0!==be?",":"")+(1!==_?e:":global()"+e),z+=0!==be?","+e:e,_=0}M=z}else F=M}else if(false==(125===S&&1===M.length)){if(59!==S)M=(125===S?M.substring(0,M.length-1):M.trim())+";";if(97===q&&110===B&&105===D){if(M=M.substring(0,M.length-1),y=M.indexOf(":")+1,z=M.substring(0,y),true===h&&45!==M.charCodeAt(9)){var xe=M.substring(y).trim().split(",");O=xe.length;for(var be=0;be<O;be++){for(var ve=xe[be],ke=ve.split(" "),Ae=0,Ce=ke.length;Ae<Ce;Ae++){var we=ke[Ae].trim(),Oe=we.charCodeAt(0),ye=we.charCodeAt(2),$e=we.length,je=we.charCodeAt($e-1);if((Oe>64&&Oe<90||Oe>96&&Oe<122||45===Oe||95===Oe&&95!==we.charCodeAt(1))&&41!==je&&0!==$e&&!(105===Oe&&(102===ye&&101===je&&8===$e||105===ye&&108===je&&7===$e||104===ye&&116===je&&7===$e))&&!(117===Oe&&115===ye&&116===je&&5===$e)&&!(108===Oe&&110===ye&&114===je&&6===$e)&&!(97===Oe&&116===ye&&101===je&&(9===$e||17===$e))&&!(110===Oe&&114===ye&&108===je&&6===$e)&&!(98===Oe&&99===ye&&115===je&&9===$e)&&!(102===Oe&&114===ye&&115===je&&8===$e)&&!(98===Oe&&116===ye&&104===je&&4===$e)&&!(110===Oe&&110===ye&&101===je&&4===$e)&&!(114===Oe&&110===ye&&103===je&&7===$e)&&!(112===Oe&&117===ye&&100===je&&6===$e)&&!(114===Oe&&118===ye&&100===je&&8===$e)&&!(115===Oe&&101===ye&&(116===je&&10===$e||100===je&&8===$e))&&!(101===Oe&&115===ye&&(101===je&&4===$e||(11===$e||7===$e||8===$e)&&45===we.charCodeAt(4)))&&isNaN(parseFloat(we))&&we.indexOf("(")===-1)ke[Ae]=C+we}z+=(0===be?"":",")+ke.join(" ").trim()}}else z+=(110!==M.charCodeAt(10)?"":C)+M.substring(y).trim().trim();M=c+z+";"+z+(125===S?";}":";")}else if(97===q&&112===B&&112===D)M=c+M+a+M+M;else if(100===q&&105===B&&115===D){if((R=M.indexOf("flex"))!==-1)E=101===M.charCodeAt(R-2)?"inline-":"",M=M.indexOf(" !important")!==-1?" !important":"",M="display: "+c+E+"box"+M+";display: "+c+E+"flex"+M+";display: "+o+"flexbox"+M+";display: "+E+"flex"+M+";"}else if(116===q&&114===B&&97===D)M=c+M+(102===M.charCodeAt(5)?o+M:"")+M;else if(104===q&&121===B&&112===D||117===q&&115===B&&101===D)M=c+M+a+M+o+M+M;else if(102===q&&108===B&&101===D)M=c+M+o+M+M;else if(111===q&&114===B&&100===D)M=c+M+o+"flex-"+M+M;else if(97===q&&108===B&&105===D&&45===M.charCodeAt(5))switch(M.charCodeAt(6)){case 105:E=M.replace("-items",""),M=c+M+c+"box-"+E+o+"flex-"+E+M;break;case 115:M=o+"flex-item-"+M.replace("-self","")+M;break;default:M=o+"flex-line-pack"+M.replace("align-content","")+M}else if(106===q&&117===B&&115===D)y=M.indexOf(":"),E=M.substring(y).replace("flex-",""),M=c+"box-pack"+E+c+M+o+"flex-pack"+E+M;else if(99===q&&117===B&&114===D&&null!==/zoo|gra/.exec(M))M=M.replace(/: +/g,": "+c)+M.replace(/: +/g,": "+a)+M;else if(119===q&&105===B&&100===D&&(R=M.indexOf("-content"))!==-1)E=M.substring(R-3),M="width: "+c+E+"width: "+a+E+"width: "+E;if(59!==S)if(M=M.substring(0,M.length-1),125===S)M+="}"}if(125===S){if(0!==ae)ae--;if(0===ae&&1===W)g=g.substring(0,ne+1)+I+g.substring(ne+1),ge+=I.length,I="",W=0,U++;if(125!==q&&32===M.charCodeAt(M.length-2))M=M.substring(0,M.length-1).trim()+"}"}if(0!==T){if(125===S)U++;else if(123===S&&0!==U)U--;if(1===te&&(123===S||0===U)&&0!==Q.length)te=0,M=x+" {"+Q+"}"+M,Q="";if(0===U){if(1===k)M="}@"+H+"}",H="";k=0,U--,T--}else if(1===k)H+=M;else if(2===k&&0===ae){if(125!==S){if(0===te)Q="";Q+=M,M=""}te=1}}else if(0===ae&&125!==S)le=1,Q=void 0===Q?M:Q+M,M=""}if(P+=M,125===S&&(0===k||2===k||4===k)){if(p=P.charCodeAt(P.length-2),4===k)k=0;if(void 0!==N&&0!==N.length)P=123===p?N:P+N,N="",p=P.charCodeAt(P.length-2);if(123!==p){if(w)if(E=u(3,P,ce,oe,x,he.length),null!=E)P=E;if(1===ee)L=/::place/g,ee=0,E="input-place",P=P.replace(L,"::"+c+E)+P.replace(L,"::"+a+"place")+P.replace(L,":"+o+E)+P;if(void 0!==J){if(J+=P,125===J.charCodeAt(J.length-2))he+=J,J=void 0}else he+=P}P=""}M=""}else if(13===S||10===S){if(1===se)fe=se=0,M=M.substring(0,M.indexOf("//")).trim();else if(w&&0===fe&&0!==(O=(K=K.trim()).length)&&47!==K.charCodeAt(0)){if(0!==M.length)if(E=u(7,K,ce,oe,x,he.length),null!=E)M=M.replace(new RegExp(K+"$"),E).trim();K=""}oe=0,ce++}else{if(9!==S){if(b=g.charAt(ne),w&&0===fe)K+=b;switch(M+=b,S){case 58:if(0===Z&&0===fe&&0===X)ie=1;break;case 34:if(0===fe)Z=34===Z?0:39===Z?39:34;break;case 39:if(0===fe)Z=39===Z?0:34===Z?34:39;break;case 40:if(0===Z&&0===fe)X=1;break;case 41:if(0===Z&&0===fe)X=0;break;case 47:if(0===Z&&0===X)if(p=g.charCodeAt(ne-1),0===re&&47===p)fe=se=1;else if(42===p)fe=re=0,M=M.substring(0,M.indexOf("/*")).trim();break;case 42:if(0===Z&&0===X&&0===se&&0===re)if(47===g.charCodeAt(ne-1))fe=re=1}}oe++}ne++}if(void 0!==Q&&0!==Q.length){if(Q=x+" {"+Q+"}",w)if(E=u(4,Q,ce,oe,x,he.length),null!=E)Q=E;he+=Q}if(w)if(E=u(6,he,ce,oe,x,he.length),null!=E)he=E;return he}function l(e){var l=t.length;if(null!=e)if(e.constructor===Array)for(var f=0,r=e.length;f<r;f++)t[l++]=e[f];else t[l]=e;return i}var t=[],f=/&/g,r=/,[\s]*(?:(?![^\r\n\[]*[\]\)])|(?=:[^n]*\())/g,s=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,n=/(?:&| ):global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,a="-moz-",o="-ms-",c="-webkit-";return i.use=l,i.p=t,i.r={a:f,s:r,g:s,gs:n},i});