!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function r(e,t,i,n,l){e+="";var s,a,f,o,g,c="",u="",h=e.charCodeAt(0)||0;91===h?(a=e.substring(1,e.length-1).split("="),s=(u=a[1]).charCodeAt(0),34!==s&&39!==s||(u=u.substring(1,u.length-1)),c="["+a[0]+'="'+u+'"]'):u=35===h||46===h||62===h?(c=e).substring(1):c=e,h=0,void 0==i||i===!0?(i=!0,f=u):(f="",i=!1);var d=null!=l;d&&(g=(typeof l).charCodeAt(0),111===g?r.use(l,null):102!==g&&(d=!1)),0!==(o=r.plugins).length&&(l=1===o.length?o[0]:function(e,r,t,i){for(var n=r,l=0,s=o.length;l<s;l++)n=o[l](e,n,t,i,c)||n;return n!==r?n:void 0},d=!0);var b,p,v,A,x,m,C,y,O,k,w,j,E,R,N,z="-moz-",F="-ms-",q="-webkit-",B="",D="",G="",H="",I="",J=0,K=0,L=0,M=0,P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0;d&&(m=l(0,t,_,$,c),null!=m&&(t=m));for(var Y=0,Z=0,$=0,_=1,ee=t.length,re="";Y<ee;){if(J=t.charCodeAt(Y),0!==P||0!==S||0!==V||123!==J&&125!==J&&59!==J)if(13===J||10===J)1===X&&(V=X=0,B=B.substring(0,B.indexOf("//"))),$=0,_++;else{if(9!==J)switch(B+=t.charAt(Y),J){case 34:P=34===P?0:39===P?39:34;break;case 39:P=39===P?0:34===P?34:39;break;case 40:0===P&&(S=1);break;case 41:0===P&&(S=0);break;case 47:0===P&&0===S&&(0===W&&47===t.charCodeAt(Y-1)?V=X=1:42===t.charCodeAt(Y-1)&&(V=W=0,B=B.substring(0,B.indexOf("/*"))));break;case 42:0===P&&0===S&&0===X&&0===W&&47===t.charCodeAt(Y-1)&&(V=W=1)}$++}else{if(B+=t.charAt(Y),O=B.charCodeAt(0),32===O&&(O=(B=B.trim()).charCodeAt(0)),k=B.charCodeAt(1)||0,w=B.charCodeAt(2)||0,d&&125!==J&&(m=123===J?l(1,B.substring(0,B.length-1).trim(),_,$,c):l(2,B,_,$,c),null!=m&&(B=123===J?m+" {":m)),64===O){if(1===T&&0!==I.length&&(T=0,I=c+" {"+I+"}",d&&(m=l(4,I,_,$,c),null!=m&&(I=m)),re+=I,I=""),107===k||103===k)107===k?(D=B.substring(1,11)+f+B.substring(11),B="@"+q+D,h=1):B="";else if(109===k)if(n===!0&&105===w)void 0===R&&(R={}),D=(N=B.substring(7,B.indexOf("{"))+" ").trim(),N=N.substring(0,N.indexOf(" ")).trim(),R[N]={key:D.trim(),body:""},h=3,B="",D="";else if(101===w)if(0!==Z){for(Y++,x="",p="",v=C.split(","),M=1;Y<ee&&(s=t.charCodeAt(Y),123===s?M++:125===s&&M--,0!==M);)p+=t.charAt(Y++);for(var te=0,ie=v.length;te<ie;te++)e=v[te],x+=r((te===ie-1?e.substring(0,e.length-1):e).trim(),p,i,n,l);x=B+x+"}",B="",h=4}else h=2;else h=6;if(105===k){if(n===!0&&110===w)if(B=B.substring(9,B.length-1),y=B.indexOf("("),y!==-1){var ne=B.substring(0,y),le=R[ne],se=B.substring(ne.length+1,B.length-1).split(","),ae=le.key.replace(ne,"").replace(/\(|\)/g,"").trim().split(",");B=le.body;for(var te=0,ie=se.length;te<ie;te++){var fe=ae[te].trim();void 0!==fe&&(B=B.replace(new RegExp("var\\(~~"+fe+"\\)","g"),se[te].trim()))}t+=B,ee+=B.length,B=""}else B=R[B].body,0===Z&&(t+=B,ee+=B.length,B="");else if(109===w&&d){var oe=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(B);null!==oe&&(B=l(5,oe[1].replace(/['"; ]/g,""),_,$,c)||"",B&&(t=t.substring(0,Y+1)+B+t.substring(Y+1),ee+=B.length),B="")}}else 4!==h&&(L=-1,K++)}else if(n===!0&&59===J&&126===O&&126===k&&(b=B.indexOf(":"))!==-1)void 0===E&&(E=[]),E[E.length]=[B.substring(0,b),B.substring(b+1,B.length-1).trim()],B="";else{if(97===O&&110===k&&105===w){B=B.substring(0,B.length-1),b=B.indexOf(":")+1,A=B.substring(0,b);var ge=B.substring(b).trim().split(",");if(i===!0&&45!==(B.charCodeAt(9)||0))for(var ce=0,ie=ge.length;ce<ie;ce++){for(var ue=ge[ce],he=ue.split(" "),de=0,be=he.length;de<be;de++){var pe=he[de].trim(),ve=pe.charCodeAt(0),Ae=pe.charCodeAt(2),xe=pe.length,me=pe.charCodeAt(xe-1);41===me||0===xe||105===ve&&102===Ae&&101===me&&8===xe||108===ve&&110===Ae&&114===me&&6===xe||97===ve&&116===Ae&&101===me&&(9===xe||17===xe)||110===ve&&114===Ae&&108===me&&6===xe||98===ve&&99===Ae&&115===me&&9===xe||102===ve&&114===Ae&&115===me&&8===xe||98===ve&&116===Ae&&104===me&&4===xe||110===ve&&110===Ae&&101===me&&4===xe||114===ve&&110===Ae&&103===me&&7===xe||112===ve&&117===Ae&&100===me&&6===xe||114===ve&&118===Ae&&100===me&&8===xe||115===ve&&101===Ae&&(116===me&&10===xe||100===me&&8===xe)||101===ve&&115===Ae&&(101===me&&4===xe||(11===xe||7===xe||8===xe)&&45===pe.charCodeAt(4))||!isNaN(parseFloat(pe))||pe.indexOf("(")!==-1||(he[de]=f+pe)}A+=(0===ce?"":",")+he.join(" ").trim()}else A+=(110!==(B.charCodeAt(10)||0)?"":f)+ge[0].trim();B=q+A+";"+A+";"}else if(97===O&&112===k&&112===w)B=q+B+z+B+B;else if(100===O&&105===k&&115===w)(y=B.indexOf("flex"))!==-1&&(m=101===B.charCodeAt(y-2)?"inline-":"",B="display: "+q+m+"box;display: "+q+m+"flex;display: "+F+"flexbox;display: "+m+"flex;");else if(116===O&&114===k&&97===w)B=q+B+(102===B.charCodeAt(5)?F+B:"")+B;else if(104===O&&121===k&&112===w||117===O&&115===k&&101===w)B=q+B+z+B+F+B+B;else if(102===O&&108===k&&101===w)B=q+B+F+B+B;else if(111===O&&114===k&&100===w)B=q+B+F+"flex-"+B+B;else if(97===O&&108===k&&105===w&&45===(B.charCodeAt(5)||0))switch(B.charCodeAt(6)||0){case 105:m=B.replace("-items",""),B=q+"box-"+m+F+"flex-"+m+B;break;case 115:B=F+"flex-item-"+B.replace("-self","")+B;break;default:B=F+"flex-line-pack"+B.replace("align-content","")+B}else if(123===J){if(Z++,1===T&&0!==I.length&&(T=0,I=c+" {"+I+"}",d&&(m=l(4,I,_,$,c),null!=m&&(I=m)),re+=I,I=""),0===K||2===h)if(2===Z){Y++,p="";var Ce=B.substring(0,B.length-1).split(","),ye=C.substring(0,C.length-1).split(",");for(M=1;Y<ee&&(s=t.charCodeAt(Y),123===s?M++:125===s&&M--,0!==M);)p+=t.charAt(Y++);for(var ce=0,ie=ye.length;ce<ie;ce++){m=ye[ce],ye[ce]="";for(var de=0,be=Ce.length;de<be;de++)e=m.replace(c,"&").trim(),j=Ce[de].trim(),e=j.indexOf(" &")>0?j.replace("&","").trim()+" "+e:e+" "+j,ye[ce]+=e.trim()+(de===be-1?"":",")}B="\n"+ye.join(",")+" {"+p+"}",H+=B.replace(/ +&/g,""),Q=1,B="",Z--}else{v=B.split(","),A="";for(var ce=0,ie=v.length;ce<ie;ce++){var Oe=(e=v[ce]).charCodeAt(0);if(32===Oe&&(Oe=(e=e.trim()).charCodeAt(0)),91===Oe&&e.indexOf("]")===-1)for(var de=ce+1,be=ie;de<be;de++){var ke=(e+=","+v[de]).trim();if(ke.indexOf("]")!==-1){ie-=de,v.splice(ce,de);break}}if(38===Oe)e=c+e.substring(1);else if((y=e.indexOf(" &"))>0&&(Oe=58,e=":global("+e.substring(0,y)+")"+e.substring(y)),58===Oe){var we=e.charCodeAt(1);if(104===we&&116===e.charCodeAt(4)){var je=(e=e.substring(5)).charCodeAt(0);40===je?e=c+e.substring(1).replace(")",""):45===je?(y=e.indexOf(")"),e=e.substring(9,y)+" "+c+e.substring(y+1)):e=c+e}else e=103===we?e.substring(8).replace(")","").replace("&",c):c+e}else e=c+" "+e;d&&(m=l(1.5,ce===ie-1?e.substring(0,e.length-1).trim():e,_,$,c),null!=m&&(e=ce===ie-1?m+" {":m)),A+=0===ce?e:","+e}C=B=A}}else 125===J&&(0!==Z&&Z--,0===Z&&1===Q&&(t=t.substring(0,Y+1)+H+t.substring(Y+1),ee+=H.length,H="",Q=0,L++));0!==K?(125===J?L++:123===J&&0!==L&&L--,1!==U||123!==J&&0!==L||0===I.length||(U=0,B=c+" {"+I+"}"+B,I=""),0===L?(0===h?B="":1===h?(B="}@"+D+"}",D=""):3===h&&(R[N].body=D,N="",B="",D=""),h=0,L--,K--):1===h||3===h?(D+=B,3===h&&(B="")):2===h&&0===Z&&(125!==J&&(0===U&&(I=""),I+=B,B=""),U=1)):0===Z&&125!==J&&(T=1,I=void 0===I?B:I+B,B="")}G+=B,B="",125!==J||0!==h&&4!==h||(123!==G.charCodeAt(G.length-2)&&(d&&0!==G.length&&(m=l(3,G,_,$,c),null!=m&&(G=m)),re+=G.trim()),4===h&&(d&&(m=l(3,x,_,$,c),null!=m&&(x=m)),h=0,re+=x),G="")}Y++}if(void 0!==I&&0!==I.length&&(I=c+" {"+I+"}",d&&(m=l(4,I,_,$,c),null!=m&&(I=m)),re+=I),n&&void 0!==E)for(var te=0,ie=E.length;te<ie;te++)re=re.replace(new RegExp("var\\("+E[te][0]+"\\)","g"),E[te][1]);return d&&(m=l(6,re,_,$,c),null!=m&&(re=m)),re}return r.use=function(e,t){var i=r.plugins,n=i.length;if(null==t&&(t=e,e=void 0),null!=t)if(t.constructor===Object)for(var l in t)r.use(l,t[l]);else if(t.constructor===Array)for(var s=0,a=t.length;s<a;s++)i[n++]=t[s];else if(null==e)i[n]=t;else{var f=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),o=/[ \t\r\n]*,[ \t\r\n]*/g;i[n]=function(e,r,i,n){if(6===e)return r=r.replace(f,function(e,r){var i=r.replace(o,",").split(","),n=t.apply(null,i);return null!=n?n:e})}}return r},r.plugins=[],r});