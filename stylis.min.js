!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function t(e,t,i,r){var n="",s="",o=e.charCodeAt(0);if(91===o){var f=e.substring(1,e.length-1).split("=");n="["+f[0]+"="+(s=f[1])+"]"}else s=35===o||46===o||62===o?(n=e).substring(1):n=e;for(var l=void 0===i||i===!0?s:"",d=void 0===r||r===!0?s:"",a="",h="",c="",u=t.length,b=0,g=0,o=0,w=0,v=1,m=0;b<u;){var A=t.charCodeAt(b);if(123===A||125===A||59===A){h+=t[b];var C=h.charCodeAt(0);32===C&&(C=(h=h.trim()).charCodeAt(0));var p=h.charCodeAt(1)||0;if(47===C&&42===p&&(C=(h=h.substring(h.indexOf("*/")+2)).charCodeAt(0),p=h.charCodeAt(1)||0),64===C)1===v&&(v=0,0!==a.length&&(a=n+"{"+a+"}")),107!==p&&114!==p||(g++,107===p?(c=h.substring(1,11)+l+h.substring(11),h="@-webkit-"+c,o=1):h="");else{var k=h.charCodeAt(2)||0;if(97===C&&110===p&&105===k){for(var x=h.substring(10).split(","),y="animation:",z=0,O=x.length;z<O;z++)y+=(0===z?"":",")+d+x[z].trim();h="-webkit-"+y+y}else if(97===C&&112===p&&112===k)h="-webkit-"+h+"-moz-"+h+h;else if(104===C&&121===p&&112===k||117===C&&115===p&&101===k)h="-webkit-"+h+"-moz-"+h+"-ms-"+h+h;else if(102===C&&108===p&&101===k||111===C&&114===p&&100===k)h="-webkit-"+h+h;else if(116===C&&114===p&&97===k)h="-webkit-"+h+(102===h.charCodeAt(5)?"-ms-"+h:"")+h;else if(100===C&&105===p&&115===k)h.indexOf("flex")>-1&&(h="display:-webkit-flex; display:flex;");else if(123===A&&(1===v&&(v=0,0!==a.length&&(a=n+"{"+a+"}")),0===g)){for(var j=h.split(","),y="",z=0,O=j.length;z<O;z++){var e=j[z],q=e.charCodeAt(0);32===q&&(q=(e=e.trim()).charCodeAt(0)),e=38===q?n+e.substring(1):n+(58===q?"":" ")+e,y+=0===z?e:","+e}h=y}0!==g&&(125===A?w++:123===A&&0!==w&&w--,2===w?(0===o?h="":(h="}@"+c+"}",c=""),o=0,w=g>1?1:0,g--):1===o&&(c+=h))}a+=h,h="",m=0}else 1!==m||13!==A&&10!==A?9!==A&&13!==A&&10!==A&&(47===A&&0===m&&(m=1),h+=t[b]):h="";b++}return 1===v&&0!==a.length?n+"{"+a+"}":a}return t});