!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.stylis=e(window)}(function(e){"use strict";function t(e,r,l,n,i){e+="";var s,g,a,o,h,c="",f="",d=e.charCodeAt(0);91===d?(a=e.substring(1,e.length-1).split("="),s=(f=a[1]).charCodeAt(0),34!==s&&39!==s||(f=f.substring(1,f.length-1)),c="["+a[0]+'="'+f+'"]'):f=35===d||46===d||62===d?(c=e).substring(1):c=e,d=0,void 0==l||l===!0?(l=!0,o=f):(o="",l=!1);var u=null!=i,b=t.plugins,p=b.length;u&&(h=(typeof i).charCodeAt(0),111===h?t.use(i,null):102===h?b[p++]=i:u=!1),0!==p&&(i=1===p?b[0]:function(e,t,r,l,n,i){for(var s=t,g=0,a=b.length;g<a;g++)s=b[g](e,s,r,l,n,i)||s;if(s!==t)return s},u=!0);var x,v,A,m,C,w,y,O,k,E,R,$,j,z,N,F,q,B,D,G,H="-moz-",I="-ms-",J="-webkit-",K="",L="",M="",P=0,Q=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,ee=0,te=0,re=0,le=0;u&&(w=i(0,r,ge,se,c,0),null!=w&&(r=w),F="");for(var ne=0,ie=0,se=0,ge=1,ae=r.length,oe=ae-1,he="";ne<ae;){if(P=r.charCodeAt(ne),0===X&&0===V&&0===te&&(123===P||125===P||59===P||ne===ae-1&&0!==K.length)){if(K+=r.charAt(ne),u&&125!==P&&u&&(w=123===P?i(1,K.substring(0,K.length-1).trim(),ge,se,c,he.length):i(2,K,ge,se,c,he.length),null!=w&&(K=123===P?w+" {":w)),k=K.charCodeAt(0),32===k&&(k=(K=K.trim()).charCodeAt(0)),E=K.charCodeAt(1),R=K.charCodeAt(2),64===k){if(1===_&&0!==M.length&&(_=0,M=c+" {"+M+"}",u&&(w=i(4,M,ge,se,c,he.length),null!=w&&(M=w)),he+=M,M=""),59!==P)if(107===E||103===E)107===E?(j=K.substring(1,11)+(0===Y?o:"")+K.substring(11),K="@"+J+j,d=1):(Y=1,K="");else if(109===E)if(n===!0&&105===R)void 0===D&&(D={}),j=(G=K.substring(7,K.indexOf("{"))+" ").trim(),G=G.substring(0,G.indexOf(" ")).trim(),D[G]={key:j.trim(),body:""},d=3,K="",j="";else if(101===R)if(0!==ie){for(ne++,se++,void 0===C&&(C=""),w="",v="",A=y.split(t.regex.split),T=1;ne<ae&&(s=r.charCodeAt(ne),123===s?T++:125===s&&T--,0!==T);)v+=r.charAt(ne++),se=13===s||10===s?(ge++,0):se+1;p=A.length;for(var ce=0;ce<p;ce++)e=A[ce],w+=t((ce===p-1?e.substring(0,e.length-1):e).trim(),v,l,n,i);C+=K+w+"}",K="",W=1,d=4}else d=2,N=K,K="";else d=6;if(105===E){if(n===!0&&110===R)if(K=K.substring(9,K.length-1),O=K.indexOf("("),O!==-1){var fe=K.substring(0,O),de=D[fe],ue=K.substring(fe.length+1,K.length-1).split(","),be=de.key.replace(fe,"").replace(/\(|\)/g,"").trim().split(",");K=de.body,p=ue.length;for(var ce=0;ce<p;ce++){var pe=be[ce].trim();void 0!==pe&&(K=K.replace(new RegExp("var\\(~~"+pe+"\\)","g"),ue[ce].trim()))}r+=K,ae+=K.length,K=""}else K=D[K].body,0===ie&&(r+=K,ae+=K.length,K="");else if(109===R&&u){var xe=/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g.exec(K);null!==xe&&(K=i(5,xe[1].replace(/['"; ]/g,""),ge,se,c,he.length)||"",K&&(r=r.substring(0,ne+1)+K+r.substring(ne+1),ae+=K.length),K="")}}else 4!==d&&59!==P&&(107!==E&&103!==E&&109!==E&&(d=5),S=-1,Q++)}else if(n===!0&&126===k&&126===E&&59===P&&(x=K.indexOf(":"))!==-1)void 0===B&&(q=[],B=0),q[B++]=[K.substring(0,x),K.substring(x+1,K.length-1).trim()],K="";else{if(123===P)if(ie++,1===_&&0!==M.length&&(_=0,M=c+" {"+M+"}",u&&(w=i(4,M,ge,se,c,he.length),null!=w&&(M=w)),he+=M,M=""),2===ie){ne++,se++,v="";var ve=K.substring(0,K.length-1).split(t.regex.split),Ae=y.substring(0,y.length-1).split(t.regex.split);for(T=1;ne<ae&&(s=r.charCodeAt(ne),123===s?T++:125===s&&T--,0!==T);)v+=r.charAt(ne++),se=13===s||10===s?(ge++,0):se+1;p=Ae.length;for(var me=0;me<p;me++){w=Ae[me],O=w.indexOf(c),Ae[me]="";for(var Ce=0,we=ve.length;Ce<we;Ce++)e=O>0?":global()"+w.trim():w.replace(c,"&").trim(),$=ve[Ce].trim(),e=$.indexOf(" &")>0?$.replace("&","").trim()+" "+e:null!==t.regex.global[0].exec($)?$:e+" "+$,Ae[me]+=e.replace(/ +&/,"").trim()+(Ce===we-1?"":",")}void 0===z&&(z=""),z+="\n"+Ae.join(",").replace(t.regex.global[1]," $1")+" {"+v+"}",U=1,K="",ie--}else if(0!==Y||0!==Q&&2!==d)y=K;else{A=K.split(t.regex.split),m="",y="",p=A.length;for(var me=0;me<p;me++){if(s=(e=A[me]).charCodeAt(0),32===s&&(s=(e=e.trim()).charCodeAt(0)),38===s)e=c+e.substring(1).replace(t.regex.and,c);else if((O=e.indexOf(" &"))>0&&(Z=2,0!==e.indexOf(":global()")&&(e=":global("+e.substring(0,O)+")"+e.substring(O)),s=58),58===s){var ye=e.charCodeAt(1);if(104===ye&&116===e.charCodeAt(4)){var Oe=e.charCodeAt(5);e=40===Oe?c+e.replace(/:host\((.*)\)/g,"$1").replace(t.regex.and,c):45===Oe?e.replace(/:host-context\((.*)\)/g,"$1 "+c).replace(t.regex.and,c):c+e.substring(5)}else 103===ye?(2!==Z&&(Z=1),e=e.replace(t.regex.global[0],"$1").replace(t.regex.and,c)):e=c+e}else 0===Z&&(e=c+" "+e);u&&(w=i(1.5,me===p-1?e.substring(0,e.length-1).trim():e,ge,se,c,he.length),null!=w&&(e=me===p-1?w+" {":w)),y+=(0!==me?",":"")+(1!==Z?e:":global()"+e),m+=0!==me?","+e:e,Z=0}K=m}else if((125===P&&1===K.length)==!1){if(59!==P&&(K=(125===P?K.substring(0,K.length-1):K.trim())+";"),97===k&&110===E&&105===R){if(K=K.substring(0,K.length-1),x=K.indexOf(":")+1,m=K.substring(0,x),l===!0&&45!==K.charCodeAt(9)){var ke=K.substring(x).trim().split(",");p=ke.length;for(var me=0;me<p;me++){for(var Ee=ke[me],Re=Ee.split(" "),Ce=0,we=Re.length;Ce<we;Ce++){var $e=Re[Ce].trim(),je=$e.charCodeAt(0),ze=$e.charCodeAt(2),Ne=$e.length,oe=$e.charCodeAt(Ne-1);41===oe||0===Ne||105===je&&102===ze&&101===oe&&8===Ne||108===je&&110===ze&&114===oe&&6===Ne||97===je&&116===ze&&101===oe&&(9===Ne||17===Ne)||110===je&&114===ze&&108===oe&&6===Ne||98===je&&99===ze&&115===oe&&9===Ne||102===je&&114===ze&&115===oe&&8===Ne||98===je&&116===ze&&104===oe&&4===Ne||110===je&&110===ze&&101===oe&&4===Ne||114===je&&110===ze&&103===oe&&7===Ne||112===je&&117===ze&&100===oe&&6===Ne||114===je&&118===ze&&100===oe&&8===Ne||115===je&&101===ze&&(116===oe&&10===Ne||100===oe&&8===Ne)||101===je&&115===ze&&(101===oe&&4===Ne||(11===Ne||7===Ne||8===Ne)&&45===$e.charCodeAt(4))||!isNaN(parseFloat($e))||$e.indexOf("(")!==-1||(Re[Ce]=o+$e)}m+=(0===me?"":",")+Re.join(" ").trim()}}else m+=(110!==K.charCodeAt(10)?"":o)+K.substring(x).trim().trim();K=J+m+";"+m+(125===P?";}":";")}else if(97===k&&112===E&&112===R)K=J+K+H+K+K;else if(100===k&&105===E&&115===R)(O=K.indexOf("flex"))!==-1&&(w=101===K.charCodeAt(O-2)?"inline-":"",K="display: "+J+w+"box;display: "+J+w+"flex;display: "+I+"flexbox;display: "+w+"flex;");else if(116===k&&114===E&&97===R)K=J+K+(102===K.charCodeAt(5)?I+K:"")+K;else if(104===k&&121===E&&112===R||117===k&&115===E&&101===R)K=J+K+H+K+I+K+K;else if(102===k&&108===E&&101===R)K=J+K+I+K+K;else if(111===k&&114===E&&100===R)K=J+K+I+"flex-"+K+K;else if(97===k&&108===E&&105===R&&45===K.charCodeAt(5))switch(K.charCodeAt(6)){case 105:w=K.replace("-items",""),K=J+"box-"+w+I+"flex-"+w+K;break;case 115:K=I+"flex-item-"+K.replace("-self","")+K;break;default:K=I+"flex-line-pack"+K.replace("align-content","")+K}else 99===k&&117===E&&114===R&&null!==/zoo|gra/.exec(K)?K=K.replace(/: +/g,": "+J)+K.replace(/: +/g,": "+H)+K:119===k&&105===E&&100===R&&(O=K.indexOf("-content"))!==-1&&(w=K.substring(O-3),K="width: -webkit-"+w+"width: -moz-"+w+"width: "+w);59!==P&&(K=K.substring(0,K.length-1),125===P&&(K+="}"))}125===P&&(0!==ie&&ie--,0===ie&&1===U&&(r=r.substring(0,ne+1)+z+r.substring(ne+1),ae+=z.length,z="",U=0,S++),125!==k&&32===K.charCodeAt(K.length-2)&&(K=K.substring(0,K.length-1).trim()+"}")),0!==Q?(125===P?S++:123===P&&0!==S&&S--,1!==ee||123!==P&&0!==S||0===M.length||(ee=0,K=c+" {"+M+"}"+K,M=""),0===S?(0===d?(Y=0,K=""):1===d?(K="}@"+j+"}",j=""):3===d&&(D[G].body=j,G="",K="",j=""),d=0,S--,Q--):1===d||3===d?(j+=K,3===d&&(K="")):2===d&&0===ie&&(125!==P&&(0===ee&&(M=""),M+=K,K=""),ee=1)):0===ie&&125!==P&&(_=1,M=void 0===M?K:M+K,K="")}L+=K,125!==P||0!==d&&2!==d&&4!==d||(s=L.charCodeAt(L.length-2),4===d&&(d=0),void 0!==C&&0!==C.length&&(L=123===s?C:L+C,C="",s=L.charCodeAt(L.length-2)),123!==s&&(u&&(w=i(3,L,ge,se,c,he.length),null!=w&&(L=w)),void 0!==N?(N+=L,125===N.charCodeAt(N.length-2)&&(he+=N,N=void 0)):he+=L),L=""),K=""}else if(13===P||10===P)1===le?(te=le=0,K=K.substring(0,K.indexOf("//"))):u&&0===te&&0!==(p=(F=F.trim()).length)&&47!==F.charCodeAt(0)&&(0!==K.length&&(w=i(7,F,ge,se,c,he.length),null!=w&&(K=K.replace(new RegExp(F+"$"),w))),F=""),se=0,ge++;else{if(9!==P)switch(g=r.charAt(ne),u&&0===te&&(F+=g),K+=g,P){case 34:0===te&&(X=34===X?0:39===X?39:34);break;case 39:0===te&&(X=39===X?0:34===X?34:39);break;case 40:0===X&&0===te&&(V=1);break;case 41:0===X&&0===te&&(V=0);break;case 47:0===X&&0===V&&(s=r.charCodeAt(ne-1),0===re&&47===s?te=le=1:42===s&&(te=re=0,K=K.substring(0,K.indexOf("/*"))));break;case 42:0===X&&0===V&&0===le&&0===re&&47===r.charCodeAt(ne-1)&&(te=re=1)}se++}ne++}if(void 0!==M&&0!==M.length&&(M=c+" {"+M+"}",u&&(w=i(4,M,ge,se,c,he.length),null!=w&&(M=w)),he+=M),n&&void 0!==q)for(var ce=0;ce<B;ce++)he=he.replace(new RegExp("var\\("+q[ce][0]+"\\)","g"),q[ce][1]);return u&&(w=i(6,he,ge,se,c,he.length),null!=w&&(he=w)),he}return t.use=function(e,r){var l=t.plugins,n=l.length;if(null==r&&(r=e,e=void 0),null!=r)if(r.constructor===Object)for(var i in r)t.use(i,r[i]);else if(r.constructor===Array)for(var s=0,g=r.length;s<g;s++)l[n++]=r[s];else if(null==e)l[n]=r;else{var a=e instanceof RegExp?e:new RegExp(e+"\\([ \\t\\r\\n]*([^\\0]*?)[ \\t\\r\\n]*\\)","g"),o=/[ \t\r\n]*,[ \t\r\n]*/g,h=function(e,t){var l=t.replace(o,",").split(","),n=r.apply(null,l);return null!=n?n:e};l[n]=function(e,t){if(6===e)return t.replace(a,h)}}return t},t.plugins=[],t.regex={and:/&/g,split:/,[\s]*(?![^\r\n\[]*[\]\)])/g,"import":/@import.*?(["'`][^\.\n\r]*?["'`];|["'`][^:\r\n]*?\.[^c].*?["'`])/g,global:[/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,/(?:&| ):global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g]},t});